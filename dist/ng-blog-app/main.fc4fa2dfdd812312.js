"use strict";(self.webpackChunkng_blog_app=self.webpackChunkng_blog_app||[]).push([[179],{2011:(_t,Me,U)=>{U.d(Me,{Dh:()=>ye,GT:()=>le,cc:()=>Ae,hO:()=>$e,on:()=>W,pX:()=>ue,xv:()=>we});var h=U(4650),$=U(9260),O=U(4976);_t=U.hmd(_t);const re=["ngOnDestroy"],ue=(Ne,ke,je,Se={})=>new Proxy(Ne,{get:(be,Pe)=>je.runOutsideAngular(()=>{var He;if(Ne[Pe])return!(null===(He=Se?.spy)||void 0===He)&&He.get&&Se.spy.get(Pe,Ne[Pe]),Ne[Pe];if(re.indexOf(Pe)>-1)return()=>{};const Fe=ke.toPromise().then(ae=>{const Je=ae&&ae[Pe];return"function"==typeof Je?Je.bind(ae):Je&&Je.then?Je.then(bt=>je.run(()=>bt)):je.run(()=>Je)});return new Proxy(()=>{},{get:(ae,Je)=>Fe[Je],apply:(ae,Je,bt)=>Fe.then(nt=>{var Wt;const ot=nt&&nt(...bt);return!(null===(Wt=Se?.spy)||void 0===Wt)&&Wt.apply&&Se.spy.apply(Pe,bt,ot),ot})})})}),le=(Ne,ke)=>{ke.forEach(je=>{Object.getOwnPropertyNames(je.prototype||je).forEach(Se=>{Object.defineProperty(Ne.prototype,Se,Object.getOwnPropertyDescriptor(je.prototype||je,Se))})})};class Ce{constructor(ke){return ke}}const ye=new h.OlP("angularfire2.app.options"),we=new h.OlP("angularfire2.app.name");function W(Ne,ke,je){const be="object"==typeof je&&je||{};be.name=be.name||"string"==typeof je&&je||"[DEFAULT]";const He=$.Z.apps.filter(Fe=>Fe&&Fe.name===be.name)[0]||ke.runOutsideAngular(()=>$.Z.initializeApp(Ne,be));try{JSON.stringify(Ne)!==JSON.stringify(He.options)&&z("error",`${He.name} Firebase App already initialized with different options${_t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ce(He)}const z=(Ne,...ke)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Ne](...ke)},Q={provide:Ce,useFactory:W,deps:[ye,h.R0b,[new h.FiY,we]]};let $e=(()=>{class Ne{constructor(je){$.Z.registerVersion("angularfire",O.q4.full,"core"),$.Z.registerVersion("angularfire",O.q4.full,"app-compat"),$.Z.registerVersion("angular",h.q4F.full,je.toString())}static initializeApp(je,Se){return{ngModule:Ne,providers:[{provide:ye,useValue:je},{provide:we,useValue:Se}]}}}return Ne.\u0275fac=function(je){return new(je||Ne)(h.LFG(h.Lbi))},Ne.\u0275mod=h.oAB({type:Ne}),Ne.\u0275inj=h.cJS({providers:[Q]}),Ne})();function Ae(Ne,ke,je,Se,be){const[,Pe,He]=globalThis.\u0275AngularfireInstanceCache.find(Fe=>Fe[0]===Ne)||[];if(Pe)return function qe(Ne,ke){try{return Ne.toString()===ke.toString()}catch{return Ne===ke}}(be,He)||(_e("error",`${ke} was already initialized on the ${je} Firebase App with different settings.${rt?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:be,was:He})),Pe;{const Fe=Se();return globalThis.\u0275AngularfireInstanceCache.push([Ne,Fe,be]),Fe}}const rt=!!_t.hot,_e=(Ne,...ke)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Ne](...ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(_t,Me,U)=>{U.d(Me,{q4:()=>Pi,iC:()=>zi,HU:()=>Tt,vb:()=>ha,JM:()=>nl});var h=U(4650),$=U(259),O=U(5861),re=U(6881),ue=U(2090),le=U(4859),Ce=U(1877);const ye=(E,D)=>D.some(S=>E instanceof S);let we,W;const $e=new WeakMap,Ae=new WeakMap,qe=new WeakMap,rt=new WeakMap,_e=new WeakMap;let je={get(E,D,S){if(E instanceof IDBTransaction){if("done"===D)return Ae.get(E);if("objectStoreNames"===D)return E.objectStoreNames||qe.get(E);if("store"===D)return S.objectStoreNames[1]?void 0:S.objectStore(S.objectStoreNames[0])}return He(E[D])},set:(E,D,S)=>(E[D]=S,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function Pe(E){return"function"==typeof E?function be(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Q(){return W||(W=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(Fe(this),D),He($e.get(this))}:function(...D){return He(E.apply(Fe(this),D))}:function(D,...S){const V=E.call(Fe(this),D,...S);return qe.set(V,D.sort?D.sort():[D]),He(V)}}(E):(E instanceof IDBTransaction&&function ke(E){if(Ae.has(E))return;const D=new Promise((S,V)=>{const q=()=>{E.removeEventListener("complete",J),E.removeEventListener("error",se),E.removeEventListener("abort",se)},J=()=>{S(),q()},se=()=>{V(E.error||new DOMException("AbortError","AbortError")),q()};E.addEventListener("complete",J),E.addEventListener("error",se),E.addEventListener("abort",se)});Ae.set(E,D)}(E),ye(E,function z(){return we||(we=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,je):E)}function He(E){if(E instanceof IDBRequest)return function Ne(E){const D=new Promise((S,V)=>{const q=()=>{E.removeEventListener("success",J),E.removeEventListener("error",se)},J=()=>{S(He(E.result)),q()},se=()=>{V(E.error),q()};E.addEventListener("success",J),E.addEventListener("error",se)});return D.then(S=>{S instanceof IDBCursor&&$e.set(S,E)}).catch(()=>{}),_e.set(D,E),D}(E);if(rt.has(E))return rt.get(E);const D=Pe(E);return D!==E&&(rt.set(E,D),_e.set(D,E)),D}const Fe=E=>_e.get(E),bt=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],Wt=new Map;function ot(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(Wt.get(D))return Wt.get(D);const S=D.replace(/FromIndex$/,""),V=D!==S,q=nt.includes(S);if(!(S in(V?IDBIndex:IDBObjectStore).prototype)||!q&&!bt.includes(S))return;const J=function(){var se=(0,O.Z)(function*(We,...ze){const lt=this.transaction(We,q?"readwrite":"readonly");let Nt=lt.store;return V&&(Nt=Nt.index(ze.shift())),(yield Promise.all([Nt[S](...ze),q&&lt.done]))[0]});return function(ze){return se.apply(this,arguments)}}();return Wt.set(D,J),J}!function Se(E){je=E(je)}(E=>({...E,get:(D,S,V)=>ot(D,S)||E.get(D,S,V),has:(D,S)=>!!ot(D,S)||E.has(D,S)}));const vs="@firebase/installations",yr="0.6.4",si=1e4,es=`w:${yr}`,ce="FIS_v2",fe="https://firebaseinstallations.googleapis.com/v1",me=36e5,it=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function st(E){return E instanceof ue.ZR&&E.code.includes("request-failed")}function cn({projectId:E}){return`${fe}/projects/${E}/installations`}function wt(E){return{token:E.token,requestStatus:2,expiresIn:nr(E.expiresIn),creationTime:Date.now()}}function tn(E,D){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,O.Z)(function*(E,D){const V=(yield D.json()).error;return it.create("request-failed",{requestName:E,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function hn({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function An(E){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,O.Z)(function*(E){const D=yield E();return D.status>=500&&D.status<600?E():D})).apply(this,arguments)}function nr(E){return Number(E.replace("s","000"))}function dt(){return(dt=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:D},{fid:S}){const V=cn(E),q=hn(E),J=D.getImmediate({optional:!0});if(J){const lt=yield J.getHeartbeatsHeader();lt&&q.append("x-firebase-client",lt)}const We={method:"POST",headers:q,body:JSON.stringify({fid:S,authVersion:ce,appId:E.appId,sdkVersion:es})},ze=yield An(()=>fetch(V,We));if(ze.ok){const lt=yield ze.json();return{fid:lt.fid||S,registrationStatus:2,refreshToken:lt.refreshToken,authToken:wt(lt.authToken)}}throw yield tn("Create Installation",ze)})).apply(this,arguments)}function Un(E){return new Promise(D=>{setTimeout(D,E)})}const zn=/^[cdef][\w-]{21}$/,Fr="";function qr(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const S=function dn(E){return function ts(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return zn.test(S)?S:Fr}catch{return Fr}}function qt(E){return`${E.appName}!${E.appId}`}const ut=new Map;function kt(E,D){const S=qt(E);Bn(S,D),function Zr(E,D){const S=function _r(){return!jn&&"BroadcastChannel"in self&&(jn=new BroadcastChannel("[Firebase] FID Change"),jn.onmessage=E=>{Bn(E.data.key,E.data.fid)}),jn}();S&&S.postMessage({key:E,fid:D}),function Kt(){0===ut.size&&jn&&(jn.close(),jn=null)}()}(S,D)}function Bn(E,D){const S=ut.get(E);if(S)for(const V of S)V(D)}let jn=null;const mi="firebase-installations-database",Yt=1,oi="firebase-installations-store";let Vt=null;function qn(){return Vt||(Vt=function ae(E,D,{blocked:S,upgrade:V,blocking:q,terminated:J}={}){const se=indexedDB.open(E,D),We=He(se);return V&&se.addEventListener("upgradeneeded",ze=>{V(He(se.result),ze.oldVersion,ze.newVersion,He(se.transaction))}),S&&se.addEventListener("blocked",()=>S()),We.then(ze=>{J&&ze.addEventListener("close",()=>J()),q&&ze.addEventListener("versionchange",()=>q())}).catch(()=>{}),We}(mi,Yt,{upgrade:(E,D)=>{0===D&&E.createObjectStore(oi)}})),Vt}function Pn(E,D){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,O.Z)(function*(E,D){const S=qt(E),q=(yield qn()).transaction(oi,"readwrite"),J=q.objectStore(oi),se=yield J.get(S);return yield J.put(D,S),yield q.done,(!se||se.fid!==D.fid)&&kt(E,D.fid),D})).apply(this,arguments)}function Zn(E){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,O.Z)(function*(E){const D=qt(E),V=(yield qn()).transaction(oi,"readwrite");yield V.objectStore(oi).delete(D),yield V.done})).apply(this,arguments)}function Lr(E,D){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,O.Z)(function*(E,D){const S=qt(E),q=(yield qn()).transaction(oi,"readwrite"),J=q.objectStore(oi),se=yield J.get(S),We=D(se);return void 0===We?yield J.delete(S):yield J.put(We,S),yield q.done,We&&(!se||se.fid!==We.fid)&&kt(E,We.fid),We})).apply(this,arguments)}function G(E){return j.apply(this,arguments)}function j(){return j=(0,O.Z)(function*(E){let D;const S=yield Lr(E.appConfig,V=>{const q=function k(E){return Ct(E||{fid:qr(),registrationStatus:0})}(V),J=function L(E,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(it.create("app-offline"))};const S={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},V=function N(E,D){return Z.apply(this,arguments)}(E,S);return{installationEntry:S,registrationPromise:V}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:De(E)}:{installationEntry:D}}(E,q);return D=J.registrationPromise,J.installationEntry});return S.fid===Fr?{installationEntry:yield D}:{installationEntry:S,registrationPromise:D}}),j.apply(this,arguments)}function Z(){return Z=(0,O.Z)(function*(E,D){try{const S=yield function Vn(E,D){return dt.apply(this,arguments)}(E,D);return Pn(E.appConfig,S)}catch(S){throw st(S)&&409===S.customData.serverCode?yield Zn(E.appConfig):yield Pn(E.appConfig,{fid:D.fid,registrationStatus:0}),S}}),Z.apply(this,arguments)}function De(E){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,O.Z)(function*(E){let D=yield St(E.appConfig);for(;1===D.registrationStatus;)yield Un(100),D=yield St(E.appConfig);if(0===D.registrationStatus){const{installationEntry:S,registrationPromise:V}=yield G(E);return V||S}return D})).apply(this,arguments)}function St(E){return Lr(E,D=>{if(!D)throw it.create("installation-not-found");return Ct(D)})}function Ct(E){return function Zt(E){return 1===E.registrationStatus&&E.registrationTime+si<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function Tn(){return(Tn=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:D},S){const V=function Ut(E,{fid:D}){return`${cn(E)}/${D}/authTokens:generate`}(E,S),q=function tr(E,{refreshToken:D}){const S=hn(E);return S.append("Authorization",function gi(E){return`${ce} ${E}`}(D)),S}(E,S),J=D.getImmediate({optional:!0});if(J){const lt=yield J.getHeartbeatsHeader();lt&&q.append("x-firebase-client",lt)}const We={method:"POST",headers:q,body:JSON.stringify({installation:{sdkVersion:es,appId:E.appId}})},ze=yield An(()=>fetch(V,We));if(ze.ok)return wt(yield ze.json());throw yield tn("Generate Auth Token",ze)})).apply(this,arguments)}function vr(E){return ws.apply(this,arguments)}function ws(){return ws=(0,O.Z)(function*(E,D=!1){let S;const V=yield Lr(E.appConfig,J=>{if(!Qt(J))throw it.create("not-registered");const se=J.authToken;if(!D&&function pt(E){return 2===E.requestStatus&&!function fn(E){const D=Date.now();return D<E.creationTime||E.creationTime+E.expiresIn<D+me}(E)}(se))return J;if(1===se.requestStatus)return S=function pe(E,D){return ie.apply(this,arguments)}(E,D),J;{if(!navigator.onLine)throw it.create("app-offline");const We=function rn(E){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:D})}(J);return S=function ft(E,D){return At.apply(this,arguments)}(E,We),We}});return S?yield S:V.authToken}),ws.apply(this,arguments)}function ie(){return(ie=(0,O.Z)(function*(E,D){let S=yield Le(E.appConfig);for(;1===S.authToken.requestStatus;)yield Un(100),S=yield Le(E.appConfig);const V=S.authToken;return 0===V.requestStatus?vr(E,D):V})).apply(this,arguments)}function Le(E){return Lr(E,D=>{if(!Qt(D))throw it.create("not-registered");return function Vr(E){return 1===E.requestStatus&&E.requestTime+si<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function At(){return At=(0,O.Z)(function*(E,D){try{const S=yield function xt(E,D){return Tn.apply(this,arguments)}(E,D),V=Object.assign(Object.assign({},D),{authToken:S});return yield Pn(E.appConfig,V),S}catch(S){if(!st(S)||401!==S.customData.serverCode&&404!==S.customData.serverCode){const V=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Pn(E.appConfig,V)}else yield Zn(E.appConfig);throw S}}),At.apply(this,arguments)}function Qt(E){return void 0!==E&&2===E.registrationStatus}function Au(){return(Au=(0,O.Z)(function*(E){const D=E,{installationEntry:S,registrationPromise:V}=yield G(D);return V?V.catch(console.error):vr(D).catch(console.error),S.fid})).apply(this,arguments)}function co(){return co=(0,O.Z)(function*(E,D=!1){const S=E;return yield function Er(E){return Ke.apply(this,arguments)}(S),(yield vr(S,D)).token}),co.apply(this,arguments)}function Ke(){return(Ke=(0,O.Z)(function*(E){const{registrationPromise:D}=yield G(E);D&&(yield D)})).apply(this,arguments)}function Is(E){return it.create("missing-app-config-values",{valueName:E})}const $t="installations",Ti=E=>{const D=E.getProvider("app").getImmediate(),S=function Pa(E){if(!E||!E.options)throw Is("App Configuration");if(!E.name)throw Is("App Name");const D=["projectId","apiKey","appId"];for(const S of D)if(!E.options[S])throw Is(S);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(D);return{app:D,appConfig:S,heartbeatServiceProvider:(0,re._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Oa=E=>{const D=E.getProvider("app").getImmediate(),S=(0,re._getProvider)(D,$t).getImmediate();return{getId:()=>function wr(E){return Au.apply(this,arguments)}(S),getToken:q=>function ff(E){return co.apply(this,arguments)}(S,q)}};(function Us(){(0,re._registerComponent)(new le.wA($t,Ti,"PUBLIC")),(0,re._registerComponent)(new le.wA("installations-internal",Oa,"PRIVATE"))})(),(0,re.registerVersion)(vs,yr),(0,re.registerVersion)(vs,yr,"esm2017");const or="@firebase/remote-config",Ur=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class kg{constructor(D,S,V,q){this.client=D,this.storage=S,this.storageCache=V,this.logger=q}isCachedDataFresh(D,S){if(!S)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-S,q=V<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${q}.`),q}fetch(D){var S=this;return(0,O.Z)(function*(){const[V,q]=yield Promise.all([S.storage.getLastSuccessfulFetchTimestampMillis(),S.storage.getLastSuccessfulFetchResponse()]);if(q&&S.isCachedDataFresh(D.cacheMaxAgeMillis,V))return q;D.eTag=q&&q.eTag;const J=yield S.client.fetch(D),se=[S.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===J.status&&se.push(S.storage.setLastSuccessfulFetchResponse(J)),yield Promise.all(se),J})()}}function ad(E=navigator){return E.languages&&E.languages[0]||E.language}class pf{constructor(D,S,V,q,J,se){this.firebaseInstallations=D,this.sdkVersion=S,this.namespace=V,this.projectId=q,this.apiKey=J,this.appId=se}fetch(D){var S=this;return(0,O.Z)(function*(){const[V,q]=yield Promise.all([S.firebaseInstallations.getId(),S.firebaseInstallations.getToken()]),se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${S.projectId}/namespaces/${S.namespace}:fetch?key=${S.apiKey}`,We={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},ze={sdk_version:S.sdkVersion,app_instance_id:V,app_instance_id_token:q,app_id:S.appId,language_code:ad()},lt={method:"POST",headers:We,body:JSON.stringify(ze)},Nt=fetch(se,lt),Pt=new Promise((br,as)=>{D.signal.addEventListener(()=>{const us=new Error("The operation was aborted.");us.name="AbortError",as(us)})});let kr;try{yield Promise.race([Nt,Pt]),kr=yield Nt}catch(br){let as="fetch-client-network";throw"AbortError"===br?.name&&(as="fetch-timeout"),Ur.create(as,{originalErrorMessage:br?.message})}let Dn=kr.status;const Ht=kr.headers.get("ETag")||void 0;let os,au;if(200===kr.status){let br;try{br=yield kr.json()}catch(as){throw Ur.create("fetch-client-parse",{originalErrorMessage:as?.message})}os=br.entries,au=br.state}if("INSTANCE_STATE_UNSPECIFIED"===au?Dn=500:"NO_CHANGE"===au?Dn=304:("NO_TEMPLATE"===au||"EMPTY_CONFIG"===au)&&(os={}),304!==Dn&&200!==Dn)throw Ur.create("fetch-status",{httpStatus:Dn});return{status:Dn,eTag:Ht,config:os}})()}}class ld{constructor(D,S){this.client=D,this.storage=S}fetch(D){var S=this;return(0,O.Z)(function*(){const V=(yield S.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return S.attemptFetch(D,V)})()}attemptFetch(D,{throttleEndTimeMillis:S,backoffCount:V}){var q=this;return(0,O.Z)(function*(){yield function ud(E,D){return new Promise((S,V)=>{const q=Math.max(D-Date.now(),0),J=setTimeout(S,q);E.addEventListener(()=>{clearTimeout(J),V(Ur.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,S);try{const J=yield q.client.fetch(D);return yield q.storage.deleteThrottleMetadata(),J}catch(J){if(!function Fg(E){if(!(E instanceof ue.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}(J))throw J;const se={throttleEndTimeMillis:Date.now()+(0,ue.$s)(V),backoffCount:V+1};return yield q.storage.setThrottleMetadata(se),q.attemptFetch(D,se)}})()}}class gf{constructor(D,S,V,q,J){this.app=D,this._client=S,this._storageCache=V,this._storage=q,this._logger=J,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function $s(E,D){const S=E.target.error||void 0;return Ur.create(D,{originalErrorMessage:S&&S?.message})}const Wo="app_namespace_store";class hd{constructor(D,S,V,q=function yf(){return new Promise((E,D)=>{try{const S=indexedDB.open("firebase_remote_config",1);S.onerror=V=>{D($s(V,"storage-open"))},S.onsuccess=V=>{E(V.target.result)},S.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(Wo,{keyPath:"compositeKey"})}}catch(S){D(Ur.create("storage-open",{originalErrorMessage:S?.message}))}})}()){this.appId=D,this.appName=S,this.namespace=V,this.openDbPromise=q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var S=this;return(0,O.Z)(function*(){const V=yield S.openDbPromise;return new Promise((q,J)=>{const We=V.transaction([Wo],"readonly").objectStore(Wo),ze=S.createCompositeKey(D);try{const lt=We.get(ze);lt.onerror=Nt=>{J($s(Nt,"storage-get"))},lt.onsuccess=Nt=>{const Pt=Nt.target.result;q(Pt?Pt.value:void 0)}}catch(lt){J(Ur.create("storage-get",{originalErrorMessage:lt?.message}))}})})()}set(D,S){var V=this;return(0,O.Z)(function*(){const q=yield V.openDbPromise;return new Promise((J,se)=>{const ze=q.transaction([Wo],"readwrite").objectStore(Wo),lt=V.createCompositeKey(D);try{const Nt=ze.put({compositeKey:lt,value:S});Nt.onerror=Pt=>{se($s(Pt,"storage-set"))},Nt.onsuccess=()=>{J()}}catch(Nt){se(Ur.create("storage-set",{originalErrorMessage:Nt?.message}))}})})()}delete(D){var S=this;return(0,O.Z)(function*(){const V=yield S.openDbPromise;return new Promise((q,J)=>{const We=V.transaction([Wo],"readwrite").objectStore(Wo),ze=S.createCompositeKey(D);try{const lt=We.delete(ze);lt.onerror=Nt=>{J($s(Nt,"storage-delete"))},lt.onsuccess=()=>{q()}}catch(lt){J(Ur.create("storage-delete",{originalErrorMessage:lt?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class mo{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const S=D.storage.getLastFetchStatus(),V=D.storage.getLastSuccessfulFetchTimestampMillis(),q=D.storage.getActiveConfig(),J=yield S;J&&(D.lastFetchStatus=J);const se=yield V;se&&(D.lastSuccessfulFetchTimestampMillis=se);const We=yield q;We&&(D.activeConfig=We)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function pd(){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,O.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}!function Zo(){(0,re._registerComponent)(new le.wA("remote-config",function E(D,{instanceIdentifier:S}){const V=D.getProvider("app").getImmediate(),q=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ur.create("registration-window");if(!(0,ue.hl)())throw Ur.create("indexed-db-unavailable");const{projectId:J,apiKey:se,appId:We}=V.options;if(!J)throw Ur.create("registration-project-id");if(!se)throw Ur.create("registration-api-key");if(!We)throw Ur.create("registration-app-id");const ze=new hd(We,V.name,S=S||"firebase"),lt=new mo(ze),Nt=new Ce.Yd(or);Nt.logLevel=Ce.in.ERROR;const Pt=new pf(q,re.SDK_VERSION,S,J,se,We),kr=new ld(Pt,ze),Dn=new kg(kr,ze,lt,Nt),Ht=new gf(V,Dn,lt,ze,Nt);return function Qr(E){const D=(0,ue.m9)(E);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Ht),Ht},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(or,"0.4.4"),(0,re.registerVersion)(or,"0.4.4","esm2017")}();const _f=(E,D)=>D.some(S=>E instanceof S);let Hs,Ll;const Ko=new WeakMap,yo=new WeakMap,On=new WeakMap,Va=new WeakMap,Pu=new WeakMap;let vo={get(E,D,S){if(E instanceof IDBTransaction){if("done"===D)return yo.get(E);if("objectStoreNames"===D)return E.objectStoreNames||On.get(E);if("store"===D)return S.objectStoreNames[1]?void 0:S.objectStore(S.objectStoreNames[0])}return Jr(E[D])},set:(E,D,S)=>(E[D]=S,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function Ou(E){return"function"==typeof E?function wf(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function vf(){return Ll||(Ll=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(Cr(this),D),Jr(Ko.get(this))}:function(...D){return Jr(E.apply(Cr(this),D))}:function(D,...S){const V=E.call(Cr(this),D,...S);return On.set(V,D.sort?D.sort():[D]),Jr(V)}}(E):(E instanceof IDBTransaction&&function _o(E){if(yo.has(E))return;const D=new Promise((S,V)=>{const q=()=>{E.removeEventListener("complete",J),E.removeEventListener("error",se),E.removeEventListener("abort",se)},J=()=>{S(),q()},se=()=>{V(E.error||new DOMException("AbortError","AbortError")),q()};E.addEventListener("complete",J),E.addEventListener("error",se),E.addEventListener("abort",se)});yo.set(E,D)}(E),_f(E,function Nu(){return Hs||(Hs=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,vo):E)}function Jr(E){if(E instanceof IDBRequest)return function ar(E){const D=new Promise((S,V)=>{const q=()=>{E.removeEventListener("success",J),E.removeEventListener("error",se)},J=()=>{S(Jr(E.result)),q()},se=()=>{V(E.error),q()};E.addEventListener("success",J),E.addEventListener("error",se)});return D.then(S=>{S instanceof IDBCursor&&Ko.set(S,E)}).catch(()=>{}),Pu.set(D,E),D}(E);if(Va.has(E))return Va.get(E);const D=Ou(E);return D!==E&&(Va.set(E,D),Pu.set(D,E)),D}const Cr=E=>Pu.get(E);function Ua(E,D,{blocked:S,upgrade:V,blocking:q,terminated:J}={}){const se=indexedDB.open(E,D),We=Jr(se);return V&&se.addEventListener("upgradeneeded",ze=>{V(Jr(se.result),ze.oldVersion,ze.newVersion,Jr(se.transaction))}),S&&se.addEventListener("blocked",()=>S()),We.then(ze=>{J&&ze.addEventListener("close",()=>J()),q&&ze.addEventListener("versionchange",()=>q())}).catch(()=>{}),We}function Gs(E,{blocked:D}={}){const S=indexedDB.deleteDatabase(E);return D&&S.addEventListener("blocked",()=>D()),Jr(S).then(()=>{})}const gd=["get","getKey","getAll","getAllKeys","count"],Ds=["put","add","delete","clear"],Ba=new Map;function Yo(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(Ba.get(D))return Ba.get(D);const S=D.replace(/FromIndex$/,""),V=D!==S,q=Ds.includes(S);if(!(S in(V?IDBIndex:IDBObjectStore).prototype)||!q&&!gd.includes(S))return;const J=function(){var se=(0,O.Z)(function*(We,...ze){const lt=this.transaction(We,q?"readwrite":"readonly");let Nt=lt.store;return V&&(Nt=Nt.index(ze.shift())),(yield Promise.all([Nt[S](...ze),q&&lt.done]))[0]});return function(ze){return se.apply(this,arguments)}}();return Ba.set(D,J),J}!function Pr(E){vo=E(vo)}(E=>({...E,get:(D,S,V)=>Yo(D,S)||E.get(D,S,V),has:(D,S)=>!!Yo(D,S)||E.has(D,S)}));const Rt="/firebase-messaging-sw.js",ku="/firebase-cloud-messaging-push-scope",Ef="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Vl="https://fcmregistrations.googleapis.com/v1",Ul="google.c.a.c_id",Bl="google.c.a.c_l",md="google.c.a.ts",yd="google.c.a.e";var ge=(()=>{return(E=ge||(ge={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",ge;var E})();function Lt(E){const D=new Uint8Array(E);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jl(E){const S=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(S),q=new Uint8Array(V.length);for(let J=0;J<V.length;++J)q[J]=V.charCodeAt(J);return q}const ja="fcm_token_details_db",Kn=5,_d="fcm_token_object_Store";function xi(){return xi=(0,O.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(J=>J.name).includes(ja))return null;let D=null;return(yield Ua(ja,Kn,{upgrade:(V=(0,O.Z)(function*(q,J,se,We){var ze;if(J<2||!q.objectStoreNames.contains(_d))return;const lt=We.objectStore(_d),Nt=yield lt.index("fcmSenderId").get(E);if(yield lt.clear(),Nt)if(2===J){const Pt=Nt;if(!Pt.auth||!Pt.p256dh||!Pt.endpoint)return;D={token:Pt.fcmToken,createTime:null!==(ze=Pt.createTime)&&void 0!==ze?ze:Date.now(),subscriptionOptions:{auth:Pt.auth,p256dh:Pt.p256dh,endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:"string"==typeof Pt.vapidKey?Pt.vapidKey:Lt(Pt.vapidKey)}}}else if(3===J){const Pt=Nt;D={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:Lt(Pt.auth),p256dh:Lt(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:Lt(Pt.vapidKey)}}}else if(4===J){const Pt=Nt;D={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:Lt(Pt.auth),p256dh:Lt(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:Lt(Pt.vapidKey)}}}}),function(J,se,We,ze){return V.apply(this,arguments)})})).close(),yield Gs(ja),yield Gs("fcm_vapid_details_db"),yield Gs("undefined"),function Fu(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:D}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}(D)?D:null;var V}),xi.apply(this,arguments)}const vd="firebase-messaging-database",wd=1,zs="firebase-messaging-store";let Jo=null;function Or(){return Jo||(Jo=Ua(vd,wd,{upgrade:(E,D)=>{0===D&&E.createObjectStore(zs)}})),Jo}function ai(E){return Ws.apply(this,arguments)}function Ws(){return Ws=(0,O.Z)(function*(E){const D=Id(E),V=yield(yield Or()).transaction(zs).objectStore(zs).get(D);if(V)return V;{const q=yield function Qo(E){return xi.apply(this,arguments)}(E.appConfig.senderId);if(q)return yield bs(E,q),q}}),Ws.apply(this,arguments)}function bs(E,D){return rs.apply(this,arguments)}function rs(){return(rs=(0,O.Z)(function*(E,D){const S=Id(E),q=(yield Or()).transaction(zs,"readwrite");return yield q.objectStore(zs).put(D,S),yield q.done,D})).apply(this,arguments)}function wo(){return(wo=(0,O.Z)(function*(E){const D=Id(E),V=(yield Or()).transaction(zs,"readwrite");yield V.objectStore(zs).delete(D),yield V.done})).apply(this,arguments)}function Id({appConfig:E}){return E.appId}const Yn=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Lu(E,D){return $a.apply(this,arguments)}function $a(){return($a=(0,O.Z)(function*(E,D){const S=yield Ha(E),V=Uu(D),q={method:"POST",headers:S,body:JSON.stringify(V)};let J;try{J=yield(yield fetch($l(E.appConfig),q)).json()}catch(se){throw Yn.create("token-subscribe-failed",{errorInfo:se?.toString()})}if(J.error)throw Yn.create("token-subscribe-failed",{errorInfo:J.error.message});if(!J.token)throw Yn.create("token-subscribe-no-token");return J.token})).apply(this,arguments)}function Vu(){return(Vu=(0,O.Z)(function*(E,D){const S=yield Ha(E),V=Uu(D.subscriptionOptions),q={method:"PATCH",headers:S,body:JSON.stringify(V)};let J;try{J=yield(yield fetch(`${$l(E.appConfig)}/${D.token}`,q)).json()}catch(se){throw Yn.create("token-update-failed",{errorInfo:se?.toString()})}if(J.error)throw Yn.create("token-update-failed",{errorInfo:J.error.message});if(!J.token)throw Yn.create("token-update-no-token");return J.token})).apply(this,arguments)}function Dd(E,D){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,O.Z)(function*(E,D){const V={method:"DELETE",headers:yield Ha(E)};try{const J=yield(yield fetch(`${$l(E.appConfig)}/${D}`,V)).json();if(J.error)throw Yn.create("token-unsubscribe-failed",{errorInfo:J.error.message})}catch(q){throw Yn.create("token-unsubscribe-failed",{errorInfo:q?.toString()})}})).apply(this,arguments)}function $l({projectId:E}){return`${Vl}/projects/${E}/registrations`}function Ha(E){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,O.Z)(function*({appConfig:E,installations:D}){const S=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${S}`})})).apply(this,arguments)}function Uu({p256dh:E,auth:D,endpoint:S,vapidKey:V}){const q={web:{endpoint:S,auth:D,p256dh:E}};return V!==Ef&&(q.web.applicationPubKey=V),q}const bd=6048e5;function Td(){return Td=(0,O.Z)(function*(E){const D=yield function Ug(E,D){return Ad.apply(this,arguments)}(E.swRegistration,E.vapidKey),S={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:D.endpoint,auth:Lt(D.getKey("auth")),p256dh:Lt(D.getKey("p256dh"))},V=yield ai(E.firebaseDependencies);if(V){if(function Bg(E,D){return D.vapidKey===E.vapidKey&&D.endpoint===E.endpoint&&D.auth===E.auth&&D.p256dh===E.p256dh}(V.subscriptionOptions,S))return Date.now()>=V.createTime+bd?function Mn(E,D){return Sd.apply(this,arguments)}(E,{token:V.token,createTime:Date.now(),subscriptionOptions:S}):V.token;try{yield Dd(E.firebaseDependencies,V.token)}catch(q){console.warn(q)}return ea(E.firebaseDependencies,S)}return ea(E.firebaseDependencies,S)}),Td.apply(this,arguments)}function is(){return is=(0,O.Z)(function*(E){const D=yield ai(E.firebaseDependencies);D&&(yield Dd(E.firebaseDependencies,D.token),yield function Ed(E){return wo.apply(this,arguments)}(E.firebaseDependencies));const S=yield E.swRegistration.pushManager.getSubscription();return!S||S.unsubscribe()}),is.apply(this,arguments)}function Sd(){return Sd=(0,O.Z)(function*(E,D){try{const S=yield function Cd(E,D){return Vu.apply(this,arguments)}(E.firebaseDependencies,D),V=Object.assign(Object.assign({},D),{token:S,createTime:Date.now()});return yield bs(E.firebaseDependencies,V),S}catch(S){throw yield function jr(E){return is.apply(this,arguments)}(E),S}}),Sd.apply(this,arguments)}function ea(E,D){return zl.apply(this,arguments)}function zl(){return(zl=(0,O.Z)(function*(E,D){const V={token:yield Lu(E,D),createTime:Date.now(),subscriptionOptions:D};return yield bs(E,V),V.token})).apply(this,arguments)}function Ad(){return(Ad=(0,O.Z)(function*(E,D){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:jl(D)})})).apply(this,arguments)}function Bu(E){const D={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function Wl(E,D){if(!D.notification)return;E.notification={};const S=D.notification.title;S&&(E.notification.title=S);const V=D.notification.body;V&&(E.notification.body=V);const q=D.notification.image;q&&(E.notification.image=q);const J=D.notification.icon;J&&(E.notification.icon=J)}(D,E),function xd(E,D){D.data&&(E.data=D.data)}(D,E),function Md(E,D){var S,V,q,J,se;if(!(D.fcmOptions||null!==(S=D.notification)&&void 0!==S&&S.click_action))return;E.fcmOptions={};const We=null!==(q=null===(V=D.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==q?q:null===(J=D.notification)||void 0===J?void 0:J.click_action;We&&(E.fcmOptions.link=We);const ze=null===(se=D.fcmOptions)||void 0===se?void 0:se.analytics_label;ze&&(E.fcmOptions.analyticsLabel=ze)}(D,E),D}function ta(E,D){const S=[];for(let V=0;V<E.length;V++)S.push(E.charAt(V)),V<D.length&&S.push(D.charAt(V));return S.join("")}function Ts(E){return Yn.create("missing-app-config-values",{valueName:E})}ta("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ta("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class jg{constructor(D,S,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const q=function Ga(E){if(!E||!E.options)throw Ts("App Configuration Object");if(!E.name)throw Ts("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:S}=E;for(const V of D)if(!S[V])throw Ts(V);return{appName:E.name,projectId:S.projectId,apiKey:S.apiKey,appId:S.appId,senderId:S.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:q,installations:S,analyticsProvider:V}}_delete(){return Promise.resolve()}}function If(E){return $u.apply(this,arguments)}function $u(){return($u=(0,O.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(Rt,{scope:ku}),E.swRegistration.update().catch(()=>{})}catch(D){throw Yn.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function Ss(){return(Ss=(0,O.Z)(function*(E,D){if(!D&&!E.swRegistration&&(yield If(E)),D||!E.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Yn.create("invalid-sw-registration");E.swRegistration=D}})).apply(this,arguments)}function za(){return(za=(0,O.Z)(function*(E,D){D?E.vapidKey=D:E.vapidKey||(E.vapidKey=Ef)})).apply(this,arguments)}function na(){return na=(0,O.Z)(function*(E,D){if(!navigator)throw Yn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Yn.create("permission-blocked");return yield function ql(E,D){return za.apply(this,arguments)}(E,D?.vapidKey),yield function Rd(E,D){return Ss.apply(this,arguments)}(E,D?.serviceWorkerRegistration),function Gl(E){return Td.apply(this,arguments)}(E)}),na.apply(this,arguments)}function qs(){return(qs=(0,O.Z)(function*(E,D,S){const V=function Eo(E){switch(E){case ge.NOTIFICATION_CLICKED:return"notification_open";case ge.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(D);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:S[Ul],message_name:S[Bl],message_time:S[md],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Io(){return Io=(0,O.Z)(function*(E,D){const S=D.data;if(!S.isFirebaseMessaging)return;E.onMessageHandler&&S.messageType===ge.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(Bu(S)):E.onMessageHandler.next(Bu(S)));const V=S.data;(function ju(E){return"object"==typeof E&&!!E&&Ul in E})(V)&&"1"===V[yd]&&(yield function Nd(E,D,S){return qs.apply(this,arguments)}(E,S.messageType,V))}),Io.apply(this,arguments)}const ia="@firebase/messaging",qa=E=>{const D=new jg(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",S=>function ra(E,D){return Io.apply(this,arguments)}(D,S)),D},Zl=E=>{const D=E.getProvider("messaging").getImmediate();return{getToken:V=>function Hu(E,D){return na.apply(this,arguments)}(D,V)}};function Cf(){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,O.Z)(function*(){try{yield(0,ue.eu)()}catch{return!1}return typeof window<"u"&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Za(){(0,re._registerComponent)(new le.wA("messaging",qa,"PUBLIC")),(0,re._registerComponent)(new le.wA("messaging-internal",Zl,"PRIVATE")),(0,re.registerVersion)(ia,"0.12.4"),(0,re.registerVersion)(ia,"0.12.4","esm2017")}();const Zs="analytics",zu="firebase_id",kd="origin",Ka=6e4,Fd="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Wu="https://www.googletagmanager.com/gtag/js",ur=new Ce.Yd("@firebase/analytics"),kn=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Df(E){if(!E.startsWith(Wu)){const D=kn.create("invalid-gtag-resource",{gtagURL:E});return ur.warn(D.message),""}return E}function Ks(E){return Promise.all(E.map(D=>D.catch(S=>S)))}function Ys(){return(Ys=(0,O.Z)(function*(E,D,S,V,q,J){const se=V[q];try{if(se)yield D[se];else{const ze=(yield Ks(S)).find(lt=>lt.measurementId===q);ze&&(yield D[ze.appId])}}catch(We){ur.error(We)}E("config",q,J)})).apply(this,arguments)}function Co(){return(Co=(0,O.Z)(function*(E,D,S,V,q){try{let J=[];if(q&&q.send_to){let se=q.send_to;Array.isArray(se)||(se=[se]);const We=yield Ks(S);for(const ze of se){const lt=We.find(Pt=>Pt.measurementId===ze),Nt=lt&&D[lt.appId];if(!Nt){J=[];break}J.push(Nt)}}0===J.length&&(J=Object.values(D)),yield Promise.all(J),E("event",V,q||{})}catch(J){ur.error(J)}})).apply(this,arguments)}const Zu=30,bo=new class Ld{constructor(D={},S=1e3){this.throttleMetadata=D,this.intervalMillis=S}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,S){this.throttleMetadata[D]=S}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Tf(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function an(){return(an=(0,O.Z)(function*(E){var D;const{appId:S,apiKey:V}=E,q={method:"GET",headers:Tf(V)},J=Fd.replace("{app-id}",S),se=yield fetch(J,q);if(200!==se.status&&304!==se.status){let We="";try{const ze=yield se.json();null!==(D=ze.error)&&void 0!==D&&D.message&&(We=ze.error.message)}catch{}throw kn.create("config-fetch-failed",{httpStatus:se.status,responseMessage:We})}return se.json()})).apply(this,arguments)}function Ud(){return(Ud=(0,O.Z)(function*(E,D=bo,S){const{appId:V,apiKey:q,measurementId:J}=E.options;if(!V)throw kn.create("no-app-id");if(!q){if(J)return{measurementId:J,appId:V};throw kn.create("no-api-key")}const se=D.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},We=new e_;return setTimeout((0,O.Z)(function*(){We.abort()}),void 0!==S?S:Ka),nc({appId:V,apiKey:q,measurementId:J},se,We,D)})).apply(this,arguments)}function nc(E,D,S){return rc.apply(this,arguments)}function rc(){return rc=(0,O.Z)(function*(E,{throttleEndTimeMillis:D,backoffCount:S},V,q=bo){var J;const{appId:se,measurementId:We}=E;try{yield function Sf(E,D){return new Promise((S,V)=>{const q=Math.max(D-Date.now(),0),J=setTimeout(S,q);E.addEventListener(()=>{clearTimeout(J),V(kn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(V,D)}catch(ze){if(We)return ur.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${We} provided in the "measurementId" field in the local Firebase config. [${ze?.message}]`),{appId:se,measurementId:We};throw ze}try{const ze=yield function Vd(E){return an.apply(this,arguments)}(E);return q.deleteThrottleMetadata(se),ze}catch(ze){const lt=ze;if(!function Xy(E){if(!(E instanceof ue.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}(lt)){if(q.deleteThrottleMetadata(se),We)return ur.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${We} provided in the "measurementId" field in the local Firebase config. [${lt?.message}]`),{appId:se,measurementId:We};throw ze}const Nt=503===Number(null===(J=lt?.customData)||void 0===J?void 0:J.httpStatus)?(0,ue.$s)(S,q.intervalMillis,Zu):(0,ue.$s)(S,q.intervalMillis),Pt={throttleEndTimeMillis:Date.now()+Nt,backoffCount:S+1};return q.setThrottleMetadata(se,Pt),ur.debug(`Calling attemptFetch again in ${Nt} millis`),nc(E,Pt,V,q)}}),rc.apply(this,arguments)}class e_{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let To,oc;function Af(){return(Af=(0,O.Z)(function*(E,D,S,V,q){if(q&&q.global)E("event",S,V);else{const J=yield D;E("event",S,Object.assign(Object.assign({},V),{send_to:J}))}})).apply(this,arguments)}function gn(){return(gn=(0,O.Z)(function*(){if(!(0,ue.hl)())return ur.warn(kn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(E){return ur.warn(kn.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function at(){return at=(0,O.Z)(function*(E,D,S,V,q,J,se){var We;const ze=function tc(E){return Ud.apply(this,arguments)}(E);ze.then(Dn=>{S[Dn.measurementId]=Dn.appId,E.options.measurementId&&Dn.measurementId!==E.options.measurementId&&ur.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${Dn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Dn=>ur.error(Dn)),D.push(ze);const lt=function Mi(){return gn.apply(this,arguments)}().then(Dn=>{if(Dn)return V.getId()}),[Nt,Pt]=yield Promise.all([ze,lt]);(function aa(E){const D=window.document.getElementsByTagName("script");for(const S of Object.values(D))if(S.src&&S.src.includes(Wu)&&S.src.includes(E))return S;return null})(J)||function oa(E,D){const S=function qu(E,D){let S;return window.trustedTypes&&(S=window.trustedTypes.createPolicy(E,D)),S}("firebase-js-sdk-policy",{createScriptURL:Df}),V=document.createElement("script"),q=`${Wu}?l=${E}&id=${D}`;V.src=S?S?.createScriptURL(q):q,V.async=!0,document.head.appendChild(V)}(J,Nt.measurementId),oc&&(q("consent","default",oc),function Qu(E){oc=E}(void 0)),q("js",new Date);const kr=null!==(We=se?.config)&&void 0!==We?We:{};return kr[kd]="firebase",kr.update=!0,null!=Pt&&(kr[zu]=Pt),q("config",Nt.measurementId,kr),To&&(q("set",To),function ac(E){To=E}(void 0)),Nt.measurementId}),at.apply(this,arguments)}class Hi{constructor(D){this.app=D}_delete(){return delete rr[this.app.options.appId],Promise.resolve()}}let rr={},jd=[];const Ja={};let $d,Ri,li="dataLayer",uc="gtag",Js=!1;function la(E,D,S){!function So(){const E=[];if((0,ue.ru)()&&E.push("This is a browser extension environment."),(0,ue.zI)()||E.push("Cookies are not available."),E.length>0){const D=E.map((V,q)=>`(${q+1}) ${V}`).join(" "),S=kn.create("invalid-analytics-context",{errorInfo:D});ur.warn(S.message)}}();const V=E.options.appId;if(!V)throw kn.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw kn.create("no-api-key");ur.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=rr[V])throw kn.create("already-exists",{id:V});if(!Js){!function Jl(E){let D=[];Array.isArray(window[E])?D=window[E]:window[E]=D}(li);const{wrappedGtag:J,gtagCore:se}=function Do(E,D,S,V,q){let J=function(...se){window[V].push(arguments)};return window[q]&&"function"==typeof window[q]&&(J=window[q]),window[q]=function Ya(E,D,S,V){function J(){return J=(0,O.Z)(function*(se,...We){try{if("event"===se){const[ze,lt]=We;yield function bf(E,D,S,V,q){return Co.apply(this,arguments)}(E,D,S,ze,lt)}else if("config"===se){const[ze,lt]=We;yield function Xl(E,D,S,V,q,J){return Ys.apply(this,arguments)}(E,D,S,V,ze,lt)}else if("consent"===se){const[ze]=We;E("consent","update",ze)}else if("get"===se){const[ze,lt,Nt]=We;E("get",ze,lt,Nt)}else if("set"===se){const[ze]=We;E("set",ze)}else E(se,...We)}catch(ze){ur.error(ze)}}),J.apply(this,arguments)}return function q(se){return J.apply(this,arguments)}}(J,E,D,S),{gtagCore:J,wrappedGtag:window[q]}}(rr,jd,Ja,li,uc);Ri=J,$d=se,Js=!0}return rr[V]=function $i(E,D,S,V,q,J,se){return at.apply(this,arguments)}(E,jd,Ja,D,$d,li,S),new Hi(E)}function Hd(){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,O.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}const nu="@firebase/analytics";!function hc(){(0,re._registerComponent)(new le.wA(Zs,(D,{options:S})=>la(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),S),"PUBLIC")),(0,re._registerComponent)(new le.wA("analytics-internal",function E(D){try{const S=D.getProvider(Zs).getImmediate();return{logEvent:(V,q,J)=>function xf(E,D,S,V){E=(0,ue.m9)(E),function t_(E,D,S,V,q){return Af.apply(this,arguments)}(Ri,rr[E.app.options.appId],D,S,V).catch(q=>ur.error(q))}(S,V,q,J)}}catch(S){throw kn.create("interop-component-reg-failed",{reason:S})}},"PRIVATE")),(0,re.registerVersion)(nu,"0.10.0"),(0,re.registerVersion)(nu,"0.10.0","esm2017")}();var fc=U(4408),_i=U(7565);const Xr=new class pc extends _i.v{}(class ru extends fc.o{constructor(D,S){super(D,S),this.scheduler=D,this.work=S}schedule(D,S=0){return S>0?super.schedule(D,S):(this.delay=S,this.state=D,this.scheduler.flush(this),this)}execute(D,S){return S>0||this.closed?super.execute(D,S):this._execute(D,S)}requestAsyncId(D,S,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(D,S,V):(D.flush(this),0)}});var Mf=U(4986),Jn=U(8505),xo=U(9468),ca=U(5363);const Pi=new h.GfV("7.6.1"),Xn="__angularfire_symbol__analyticsIsSupportedValue",su="__angularfire_symbol__analyticsIsSupported",el="__angularfire_symbol__remoteConfigIsSupportedValue",da="__angularfire_symbol__remoteConfigIsSupported",Gi="__angularfire_symbol__messagingIsSupportedValue",Xs="__angularfire_symbol__messagingIsSupported";function nl(E,D,S){if(D){if(1===D.length)return D[0];const J=D.filter(se=>se.app===S);if(1===J.length)return J[0]}return S.container.getProvider(E).getImmediate({optional:!0})}globalThis[su]||(globalThis[su]=Hd().then(E=>globalThis[Xn]=E).catch(()=>globalThis[Xn]=!1)),globalThis[Xs]||(globalThis[Xs]=Cf().then(E=>globalThis[Gi]=E).catch(()=>globalThis[Gi]=!1)),globalThis[da]||(globalThis[da]=pd().then(E=>globalThis[el]=E).catch(()=>globalThis[el]=!1));const ha=(E,D)=>{const S=D?[D]:(0,$.C6)(),V=[];return S.forEach(q=>{q.container.getProvider(E).instances.forEach(se=>{V.includes(se)||V.push(se)})}),V};function Mo(){}class gc{constructor(D,S=Xr){this.zone=D,this.delegate=S}now(){return this.delegate.now()}schedule(D,S,V){const q=this.zone;return this.delegate.schedule(function(se){q.runGuarded(()=>{D.apply(this,[se])})},S,V)}}class ou{constructor(D){this.zone=D,this.task=null}call(D,S){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Mo,{},Mo,Mo)),S.pipe((0,Jn.b)({next:V,complete:V,error:V})).subscribe(D).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Tt=(()=>{class E{constructor(S){this.ngZone=S,this.outsideAngular=S.runOutsideAngular(()=>new gc(Zone.current)),this.insideAngular=S.run(()=>new gc(Zone.current,Mf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(S){return new(S||E)(h.LFG(h.R0b))},E.\u0275prov=h.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function ci(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function zi(E){return ci(),function Wd(E){return function(S){return(S=S.lift(new ou(E.ngZone))).pipe((0,xo.R)(E.outsideAngular),(0,ca.Q)(E.insideAngular))}}(ci())(E)}},1389:(_t,Me,U)=>{U.d(Me,{$:()=>Rt,A:()=>z,D:()=>Ae,I:()=>$n,J:()=>Ti,L:()=>ns,N:()=>Lr,P:()=>$i,Q:()=>hd,R:()=>Yu,U:()=>fd,V:()=>pd,W:()=>Ru,X:()=>Cs,Y:()=>Nu,Z:()=>vf,_:()=>Pu,a:()=>ui,a0:()=>Ef,a1:()=>Ul,a2:()=>Lg,a3:()=>_d,a4:()=>xi,a5:()=>vd,a6:()=>zs,a7:()=>Or,a8:()=>Ws,a9:()=>rs,aA:()=>ae,aB:()=>el,aC:()=>Zn,aD:()=>Yr,aE:()=>xo,aF:()=>tu,aG:()=>eu,aH:()=>pn,aL:()=>ss,aO:()=>Hs,aa:()=>Ed,ab:()=>Id,ac:()=>Vg,ad:()=>Cd,ae:()=>Dd,af:()=>$l,ai:()=>bd,aj:()=>Td,ak:()=>jr,an:()=>wf,ao:()=>Wl,aq:()=>za,ar:()=>ia,as:()=>bt,at:()=>Ct,au:()=>De,av:()=>Se,aw:()=>kr,ax:()=>Dr,ay:()=>Zt,az:()=>be,b:()=>Gu,c:()=>Ri,d:()=>la,e:()=>lc,f:()=>nu,g:()=>pc,h:()=>fc,i:()=>ec,j:()=>Mf,k:()=>br,l:()=>Qa,m:()=>Pf,p:()=>ye,r:()=>Bd,s:()=>Qs,u:()=>Mi});var h=U(5861),$=U(2090),O=U(6881),re=U(7582),ue=U(1877),le=U(4859);const ye={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ae=function Q(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},qe=function $e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},rt=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ne=new ue.Yd("@firebase/auth");function je(v,...p){Ne.logLevel<=ue.in.ERROR&&Ne.error(`Auth (${O.SDK_VERSION}): ${v}`,...p)}function Se(v,...p){throw Fe(v,...p)}function be(v,...p){return Fe(v,...p)}function Pe(v,p,m){const I=Object.assign(Object.assign({},qe()),{[p]:m});return new $.LL("auth","Firebase",I).create(p,{appName:v.name})}function He(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Se(v,"argument-error"),Pe(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fe(v,...p){if("string"!=typeof v){const m=p[0],I=[...p.slice(1)];return I[0]&&(I[0].appName=v.name),v._errorFactory.create(m,...I)}return rt.create(v,...p)}function ae(v,p,...m){if(!v)throw Fe(p,...m)}function Je(v){const p="INTERNAL ASSERTION FAILED: "+v;throw je(p),new Error(p)}function bt(v,p){v||Je(p)}function nt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Wt(){return"http:"===ot()||"https:"===ot()}function ot(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class si{constructor(p,m){this.shortDelay=p,this.longDelay=m,bt(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function vs(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Wt()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function es(v,p){bt(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class ce{static initialize(p,m,I){this.fetchImpl=p,m&&(this.headersImpl=m),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},me=new si(3e4,6e4);function te(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function xe(v,p,m,I){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,h.Z)(function*(v,p,m,I,M={}){return it(v,M,(0,h.Z)(function*(){let P={},Y={};I&&("GET"===p?Y=I:P={body:JSON.stringify(I)});const de=(0,$.xO)(Object.assign({key:v.config.apiKey},Y)).slice(1),Be=yield v._getAdditionalHeaders();return Be["Content-Type"]="application/json",v.languageCode&&(Be["X-Firebase-Locale"]=v.languageCode),ce.fetch()(tn(v,v.config.apiHost,m,de),Object.assign({method:p,headers:Be,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function it(v,p,m){return st.apply(this,arguments)}function st(){return(st=(0,h.Z)(function*(v,p,m){v._canInitEmulator=!1;const I=Object.assign(Object.assign({},fe),p);try{const M=new Sn(v),P=yield Promise.race([m(),M.promise]);M.clearNetworkTimeout();const Y=yield P.json();if("needConfirmation"in Y)throw hn(v,"account-exists-with-different-credential",Y);if(P.ok&&!("errorMessage"in Y))return Y;{const de=P.ok?Y.errorMessage:Y.error.message,[Be,Ze]=de.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Be)throw hn(v,"credential-already-in-use",Y);if("EMAIL_EXISTS"===Be)throw hn(v,"email-already-in-use",Y);if("USER_DISABLED"===Be)throw hn(v,"user-disabled",Y);const yt=I[Be]||Be.toLowerCase().replace(/[_\s]+/g,"-");if(Ze)throw Pe(v,yt,Ze);Se(v,yt)}}catch(M){if(M instanceof $.ZR)throw M;Se(v,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function cn(v,p,m,I){return wt.apply(this,arguments)}function wt(){return(wt=(0,h.Z)(function*(v,p,m,I,M={}){const P=yield xe(v,p,m,I,M);return"mfaPendingCredential"in P&&Se(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function tn(v,p,m,I){const M=`${p}${m}?${I}`;return v.config.emulator?es(v.config,M):`${v.config.apiScheme}://${M}`}class Sn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,I)=>{this.timer=setTimeout(()=>I(be(this.auth,"network-request-failed")),me.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hn(v,p,m){const I={appName:v.name};m.email&&(I.email=m.email),m.phoneNumber&&(I.phoneNumber=m.phoneNumber);const M=be(v,p,I);return M.customData._tokenResponse=m,M}function An(){return(An=(0,h.Z)(function*(v,p){return xe(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function nr(){return(nr=(0,h.Z)(function*(v,p){return xe(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Vn(){return(Vn=(0,h.Z)(function*(v,p){return xe(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function dt(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function zn(){return(zn=(0,h.Z)(function*(v,p=!1){const m=(0,$.m9)(v),I=yield m.getIdToken(p),M=qr(I);ae(M&&M.exp&&M.auth_time&&M.iat,m.auth,"internal-error");const P="object"==typeof M.firebase?M.firebase:void 0,Y=P?.sign_in_provider;return{claims:M,token:I,authTime:dt(Fr(M.auth_time)),issuedAtTime:dt(Fr(M.iat)),expirationTime:dt(Fr(M.exp)),signInProvider:Y||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function Fr(v){return 1e3*Number(v)}function qr(v){const[p,m,I]=v.split(".");if(void 0===p||void 0===m||void 0===I)return je("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,$.tV)(m);return M?JSON.parse(M):(je("Failed to decode base64 JWT payload"),null)}catch(M){return je("Caught error parsing JWT payload as JSON",M?.toString()),null}}function qt(v,p){return ut.apply(this,arguments)}function ut(){return(ut=(0,h.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(I){throw I instanceof $.ZR&&function kt({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(I)&&v.auth.currentUser===v&&(yield v.auth.signOut()),I}})).apply(this,arguments)}class Wn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const M=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const I=this.getInterval(p);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),I)}iteration(){var p=this;return(0,h.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class Mr{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=dt(this.lastLoginAt),this.creationTime=dt(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Bn(v){return Zr.apply(this,arguments)}function Zr(){return Zr=(0,h.Z)(function*(v){var p;const m=v.auth,I=yield v.getIdToken(),M=yield qt(v,function gi(v,p){return Vn.apply(this,arguments)}(m,{idToken:I}));ae(M?.users.length,m,"internal-error");const P=M.users[0];v._notifyReloadListener(P);const Y=null!==(p=P.providerUserInfo)&&void 0!==p&&p.length?function mi(v){return v.map(p=>{var{providerId:m}=p,I=(0,re._T)(p,["providerId"]);return{providerId:m,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(P.providerUserInfo):[],de=function Kt(v,p){return[...v.filter(I=>!p.some(M=>M.providerId===I.providerId)),...p]}(v.providerData,Y),yt=!!v.isAnonymous&&!(v.email&&P.passwordHash||de?.length),Gt={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:de,metadata:new Mr(P.createdAt,P.lastLoginAt),isAnonymous:yt};Object.assign(v,Gt)}),Zr.apply(this,arguments)}function _r(){return(_r=(0,h.Z)(function*(v){const p=(0,$.m9)(v);yield Bn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function oi(){return(oi=(0,h.Z)(function*(v,p){const m=yield it(v,{},(0,h.Z)(function*(){const I=(0,$.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:M,apiKey:P}=v.config,Y=tn(v,M,"/v1/token",`key=${P}`),de=yield v._getAdditionalHeaders();return de["Content-Type"]="application/x-www-form-urlencoded",ce.fetch()(Y,{method:"POST",headers:de,body:I})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Vt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ae(p.idToken,"internal-error"),ae(typeof p.idToken<"u","internal-error"),ae(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function dn(v){const p=qr(v);return ae(p,"internal-error"),ae(typeof p.exp<"u","internal-error"),ae(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var I=this;return(0,h.Z)(function*(){return ae(!I.accessToken||I.refreshToken,p,"user-token-expired"),m||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(p,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var I=this;return(0,h.Z)(function*(){const{accessToken:M,refreshToken:P,expiresIn:Y}=yield function Yt(v,p){return oi.apply(this,arguments)}(p,m);I.updateTokensAndExpiration(M,P,Number(Y))})()}updateTokensAndExpiration(p,m,I){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(p,m){const{refreshToken:I,accessToken:M,expirationTime:P}=m,Y=new Vt;return I&&(ae("string"==typeof I,"internal-error",{appName:p}),Y.refreshToken=I),M&&(ae("string"==typeof M,"internal-error",{appName:p}),Y.accessToken=M),P&&(ae("number"==typeof P,"internal-error",{appName:p}),Y.expirationTime=P),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Vt,this.toJSON())}_performRefresh(){return Je("not implemented")}}function qn(v,p){ae("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class Pn{constructor(p){var{uid:m,auth:I,stsTokenManager:M}=p,P=(0,re._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=I,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Mr(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,h.Z)(function*(){const I=yield qt(m,m.stsTokenManager.getToken(m.auth,p));return ae(I,m.auth,"internal-error"),m.accessToken!==I&&(m.accessToken=I,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),I})()}getIdTokenResult(p){return function ts(v){return zn.apply(this,arguments)}(this,p)}reload(){return function jn(v){return _r.apply(this,arguments)}(this)}_assign(p){this!==p&&(ae(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const m=new Pn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(p){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var I=this;return(0,h.Z)(function*(){let M=!1;p.idToken&&p.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(p),M=!0),m&&(yield Bn(I)),yield I.auth._persistUserIfCurrent(I),M&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var p=this;return(0,h.Z)(function*(){const m=yield p.getIdToken();return yield qt(p,function tr(v,p){return An.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var I,M,P,Y,de,Be,Ze,yt;const Gt=null!==(I=m.displayName)&&void 0!==I?I:void 0,di=null!==(M=m.email)&&void 0!==M?M:void 0,Ro=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,pa=null!==(Y=m.photoURL)&&void 0!==Y?Y:void 0,mc=null!==(de=m.tenantId)&&void 0!==de?de:void 0,As=null!==(Be=m._redirectEventId)&&void 0!==Be?Be:void 0,Vf=null!==(Ze=m.createdAt)&&void 0!==Ze?Ze:void 0,Yd=null!==(yt=m.lastLoginAt)&&void 0!==yt?yt:void 0,{uid:yc,emailVerified:ga,isAnonymous:Qd,providerData:Jd,stsTokenManager:ol}=m;ae(yc&&ol,p,"internal-error");const Xd=Vt.fromJSON(this.name,ol);ae("string"==typeof yc,p,"internal-error"),qn(Gt,p.name),qn(di,p.name),ae("boolean"==typeof ga,p,"internal-error"),ae("boolean"==typeof Qd,p,"internal-error"),qn(Ro,p.name),qn(pa,p.name),qn(mc,p.name),qn(As,p.name),qn(Vf,p.name),qn(Yd,p.name);const al=new Pn({uid:yc,auth:p,email:di,emailVerified:ga,displayName:Gt,isAnonymous:Qd,photoURL:pa,phoneNumber:Ro,tenantId:mc,stsTokenManager:Xd,createdAt:Vf,lastLoginAt:Yd});return Jd&&Array.isArray(Jd)&&(al.providerData=Jd.map(ma=>Object.assign({},ma))),As&&(al._redirectEventId=As),al}static _fromIdTokenResponse(p,m,I=!1){return(0,h.Z)(function*(){const M=new Vt;M.updateFromServerResponse(m);const P=new Pn({uid:m.localId,auth:p,stsTokenManager:M,isAnonymous:I});return yield Bn(P),P})()}}const Rr=new Map;function Zn(v){bt(v instanceof Function,"Expected a class definition");let p=Rr.get(v);return p?(bt(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,Rr.set(v,p),p)}const Lr=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,I){var M=this;return(0,h.Z)(function*(){M.storage[m]=I})()}_get(m){var I=this;return(0,h.Z)(function*(){const M=I.storage[m];return void 0===M?null:M})()}_remove(m){var I=this;return(0,h.Z)(function*(){delete I.storage[m]})()}_addListener(m,I){}_removeListener(m,I){}}return v.type="NONE",v})();function Yr(v,p,m){return`firebase:${v}:${p}:${m}`}class G{constructor(p,m,I){this.persistence=p,this.auth=m,this.userKey=I;const{config:M,name:P}=this.auth;this.fullUserKey=Yr(this.userKey,M.apiKey,P),this.fullPersistenceKey=Yr("persistence",M.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,h.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Pn._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,h.Z)(function*(){if(m.persistence===p)return;const I=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,I?m.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,I="authUser"){return(0,h.Z)(function*(){if(!m.length)return new G(Zn(Lr),p,I);const M=(yield Promise.all(m.map(function(){var Ze=(0,h.Z)(function*(yt){if(yield yt._isAvailable())return yt});return function(yt){return Ze.apply(this,arguments)}}()))).filter(Ze=>Ze);let P=M[0]||Zn(Lr);const Y=Yr(I,p.config.apiKey,p.name);let de=null;for(const Ze of m)try{const yt=yield Ze._get(Y);if(yt){const Gt=Pn._fromJSON(p,yt);Ze!==P&&(de=Gt),P=Ze;break}}catch{}const Be=M.filter(Ze=>Ze._shouldAllowMigration);return P._shouldAllowMigration&&Be.length?(P=Be[0],de&&(yield P._set(Y,de.toJSON())),yield Promise.all(m.map(function(){var Ze=(0,h.Z)(function*(yt){if(yt!==P)try{yield yt._remove(Y)}catch{}});return function(yt){return Ze.apply(this,arguments)}}())),new G(P,p,I)):new G(P,p,I)})()}}function j(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Z(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(k(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Xe(p))return"Blackberry";if(St(p))return"Webos";if(L(p))return"Safari";if((p.includes("chrome/")||N(p))&&!p.includes("edge/"))return"Chrome";if(De(p))return"Android";{const I=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function k(v=(0,$.z$)()){return/firefox\//i.test(v)}function L(v=(0,$.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function N(v=(0,$.z$)()){return/crios\//i.test(v)}function Z(v=(0,$.z$)()){return/iemobile/i.test(v)}function De(v=(0,$.z$)()){return/android/i.test(v)}function Xe(v=(0,$.z$)()){return/blackberry/i.test(v)}function St(v=(0,$.z$)()){return/webos/i.test(v)}function Ct(v=(0,$.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Zt(v=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Ut(v=(0,$.z$)()){return Ct(v)||De(v)||St(v)||Xe(v)||/windows phone/i.test(v)||Z(v)}function ws(v,p=[]){let m;switch(v){case"Browser":m=j((0,$.z$)());break;case"Worker":m=`${j((0,$.z$)())}-${v}`;break;default:m=v}const I=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${O.SDK_VERSION}/${I}`}function ie(){return(ie=(0,h.Z)(function*(v){return(yield xe(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Le(v,p){return ft.apply(this,arguments)}function ft(){return(ft=(0,h.Z)(function*(v,p){return xe(v,"GET","/v2/recaptchaConfig",te(v,p))})).apply(this,arguments)}function At(v){return void 0!==v&&void 0!==v.getResponse}function Qt(v){return void 0!==v&&void 0!==v.enterprise}class pt{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function rn(v){return new Promise((p,m)=>{const I=document.createElement("script");I.setAttribute("src",v),I.onload=p,I.onerror=M=>{const P=be("internal-error");P.customData=M,m(P)},I.type="text/javascript",I.charset="UTF-8",function fn(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(I)})}function Vr(v){return`__${v}${Math.floor(1e6*Math.random())}`}const ff="NO_RECAPTCHA";class co{constructor(p){this.type="recaptcha-enterprise",this.auth=pn(p)}verify(p="verify",m=!1){var I=this;return(0,h.Z)(function*(){function P(){return P=(0,h.Z)(function*(de){if(!m){if(null==de.tenantId&&null!=de._agentRecaptchaConfig)return de._agentRecaptchaConfig.siteKey;if(null!=de.tenantId&&void 0!==de._tenantRecaptchaConfigs[de.tenantId])return de._tenantRecaptchaConfigs[de.tenantId].siteKey}return new Promise(function(){var Be=(0,h.Z)(function*(Ze,yt){Le(de,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Gt=>{if(void 0!==Gt.recaptchaKey){const di=new pt(Gt);return null==de.tenantId?de._agentRecaptchaConfig=di:de._tenantRecaptchaConfigs[de.tenantId]=di,Ze(di.siteKey)}yt(new Error("recaptcha Enterprise site key undefined"))}).catch(Gt=>{yt(Gt)})});return function(Ze,yt){return Be.apply(this,arguments)}}())}),P.apply(this,arguments)}function Y(de,Be,Ze){const yt=window.grecaptcha;Qt(yt)?yt.enterprise.ready(()=>{yt.enterprise.execute(de,{action:p}).then(Gt=>{Be(Gt)}).catch(()=>{Be(ff)})}):Ze(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((de,Be)=>{(function M(de){return P.apply(this,arguments)})(I.auth).then(Ze=>{if(!m&&Qt(window.grecaptcha))Y(Ze,de,Be);else{if(typeof window>"u")return void Be(new Error("RecaptchaVerifier is only supported in browser"));rn("https://www.google.com/recaptcha/enterprise.js?render="+Ze).then(()=>{Y(Ze,de,Be)}).catch(yt=>{Be(yt)})}}).catch(Ze=>{Be(Ze)})})})()}}function Er(v,p,m){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,h.Z)(function*(v,p,m,I=!1){const M=new co(v);let P;try{P=yield M.verify(m)}catch{P=yield M.verify(m,!0)}const Y=Object.assign({},p);return Object.assign(Y,I?{captchaResp:P}:{captchaResponse:P}),Object.assign(Y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Y})).apply(this,arguments)}class jt{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const I=P=>new Promise((Y,de)=>{try{Y(p(P))}catch(Be){de(Be)}});I.onAbort=m,this.queue.push(I);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,h.Z)(function*(){if(m.auth.currentUser===p)return;const I=[];try{for(const M of m.queue)yield M(p),M.onAbort&&I.push(M.onAbort)}catch(M){I.reverse();for(const P of I)try{P()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}class xn{constructor(p,m,I,M){this.app=p,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=I,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vs(this),this.idTokenSubscription=new Vs(this),this.beforeStateQueue=new jt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(p,m){var I=this;return m&&(this._popupRedirectResolver=Zn(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var M,P;if(!I._deleted&&(I.persistenceManager=yield G.create(I,p),!I._deleted)){if(null!==(M=I._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(m),I.lastNotifiedUid=(null===(P=I.currentUser)||void 0===P?void 0:P.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,h.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,h.Z)(function*(){var I;const M=yield m.assertedPersistence.getCurrentUser();let P=M,Y=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const de=null===(I=m.redirectUser)||void 0===I?void 0:I._redirectEventId,Be=P?._redirectEventId,Ze=yield m.tryRedirectSignIn(p);(!de||de===Be)&&Ze?.user&&(P=Ze.user,Y=!0)}if(!P)return m.directlySetCurrentUser(null);if(!P._redirectEventId){if(Y)try{yield m.beforeStateQueue.runMiddleware(P)}catch(de){P=M,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(de))}return P?m.reloadAndSetCurrentUserOrClear(P):m.directlySetCurrentUser(null)}return ae(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===P._redirectEventId?m.directlySetCurrentUser(P):m.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(p){var m=this;return(0,h.Z)(function*(){let I=null;try{I=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,h.Z)(function*(){try{yield Bn(p)}catch(I){if("auth/network-request-failed"!==I?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function yr(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,h.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,h.Z)(function*(){const I=p?(0,$.m9)(p):null;return I&&ae(I.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(I&&I._clone(m))})()}_updateCurrentUser(p,m=!1){var I=this;return(0,h.Z)(function*(){if(!I._deleted)return p&&ae(I.tenantId===p.tenantId,I,"tenant-id-mismatch"),m||(yield I.beforeStateQueue.runMiddleware(p)),I.queue((0,h.Z)(function*(){yield I.directlySetCurrentUser(p),I.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,h.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(Zn(p))}))}initializeRecaptchaConfig(){var p=this;return(0,h.Z)(function*(){const m=yield Le(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new pt(m);null==p.tenantId?p._agentRecaptchaConfig=I:p._tenantRecaptchaConfigs[p.tenantId]=I,I.emailPasswordEnabled&&new co(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new $.LL("auth","Firebase",p())}onAuthStateChanged(p,m,I){return this.registerStateListener(this.authStateSubscription,p,m,I)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,I){return this.registerStateListener(this.idTokenSubscription,p,m,I)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var I=this;return(0,h.Z)(function*(){const M=yield I.getOrInitRedirectPersistenceManager(m);return null===p?M.removeCurrentUser():M.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const I=p&&Zn(p)||m._popupRedirectResolver;ae(I,m,"argument-error"),m.redirectPersistenceManager=yield G.create(m,[Zn(I._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,h.Z)(function*(){var I,M;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(I=m._currentUser)||void 0===I?void 0:I._redirectEventId)===p?m._currentUser:(null===(M=m.redirectUser)||void 0===M?void 0:M._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,h.Z)(function*(){if(p===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,I,M){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),Y=this._isInitialized?Promise.resolve():this._initializationPromise;return ae(Y,this,"internal-error"),Y.then(()=>P(this.currentUser)),"function"==typeof m?p.addObserver(m,I,M):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=ws(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,h.Z)(function*(){var m;const I={"X-Client-Version":p.clientVersion};p.app.options.appId&&(I["X-Firebase-gmpid"]=p.app.options.appId);const M=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();M&&(I["X-Firebase-Client"]=M);const P=yield p._getAppCheckToken();return P&&(I["X-Firebase-AppCheck"]=P),I})()}_getAppCheckToken(){var p=this;return(0,h.Z)(function*(){var m;const I=yield null===(m=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return I?.error&&function ke(v,...p){Ne.logLevel<=ue.in.WARN&&Ne.warn(`Auth (${O.SDK_VERSION}): ${v}`,...p)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function pn(v){return(0,$.m9)(v)}class Vs{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,$.ne)(m=>this.observer=m)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function $n(v,p,m){const I=pn(v);ae(I._canInitEmulator,I,"emulator-config-failed"),ae(/^https?:\/\//.test(p),I,"invalid-emulator-scheme");const M=!!m?.disableWarnings,P=Pa(p),{host:Y,port:de}=function Is(v){const p=Pa(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const I=m[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(I);if(M){const P=M[1];return{host:P,port:$t(I.substr(P.length+1))}}{const[P,Y]=I.split(":");return{host:P,port:$t(Y)}}}(p);I.config.emulator={url:`${P}//${Y}${null===de?"":`:${de}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:Y,port:de,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function xu(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Pa(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function $t(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class Ti{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return Je("not implemented")}_getIdTokenResponse(p){return Je("not implemented")}_linkToIdToken(p,m){return Je("not implemented")}_getReauthenticationResolver(p){return Je("not implemented")}}function Oa(v,p){return Us.apply(this,arguments)}function Us(){return(Us=(0,h.Z)(function*(v,p){return xe(v,"POST","/v1/accounts:resetPassword",te(v,p))})).apply(this,arguments)}function or(v,p){return ho.apply(this,arguments)}function ho(){return(ho=(0,h.Z)(function*(v,p){return xe(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Si(){return(Si=(0,h.Z)(function*(v,p){return xe(v,"POST","/v1/accounts:update",te(v,p))})).apply(this,arguments)}function Go(v,p){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,h.Z)(function*(v,p){return cn(v,"POST","/v1/accounts:signInWithPassword",te(v,p))})).apply(this,arguments)}function Cn(v,p){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,h.Z)(function*(v,p){return xe(v,"POST","/v1/accounts:sendOobCode",te(v,p))})).apply(this,arguments)}function ka(){return(ka=(0,h.Z)(function*(v,p){return Cn(v,p)})).apply(this,arguments)}function zo(v,p){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,h.Z)(function*(v,p){return Cn(v,p)})).apply(this,arguments)}function po(v,p){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,h.Z)(function*(v,p){return Cn(v,p)})).apply(this,arguments)}function Qr(){return(Qr=(0,h.Z)(function*(v,p){return Cn(v,p)})).apply(this,arguments)}function go(){return(go=(0,h.Z)(function*(v,p){return cn(v,"POST","/v1/accounts:signInWithEmailLink",te(v,p))})).apply(this,arguments)}function Fa(){return(Fa=(0,h.Z)(function*(v,p){return cn(v,"POST","/v1/accounts:signInWithEmailLink",te(v,p))})).apply(this,arguments)}class Br extends Ti{constructor(p,m,I,M=null){super("password",I),this._email=p,this._password=m,this._tenantId=M}static _fromEmailAndPassword(p,m){return new Br(p,m,"password")}static _fromEmailAndCode(p,m,I=null){return new Br(p,m,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,h.Z)(function*(){var I;switch(m.signInMethod){case"password":const M={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=p._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const P=yield Er(p,M,"signInWithPassword");return Go(p,P)}return Go(p,M).catch(function(){var P=(0,h.Z)(function*(Y){if("auth/missing-recaptcha-token"===Y.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const de=yield Er(p,M,"signInWithPassword");return Go(p,de)}return Promise.reject(Y)});return function(Y){return P.apply(this,arguments)}}());case"emailLink":return function ji(v,p){return go.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Se(p,"internal-error")}})()}_linkToIdToken(p,m){var I=this;return(0,h.Z)(function*(){switch(I.signInMethod){case"password":return or(p,{idToken:m,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Mu(v,p){return Fa.apply(this,arguments)}(p,{idToken:m,email:I._email,oobCode:I._password});default:Se(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function js(v,p){return La.apply(this,arguments)}function La(){return(La=(0,h.Z)(function*(v,p){return cn(v,"POST","/v1/accounts:signInWithIdp",te(v,p))})).apply(this,arguments)}class ns extends Ti{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new ns(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Se("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:M}=m,P=(0,re._T)(m,["providerId","signInMethod"]);if(!I||!M)return null;const Y=new ns(I,M);return Y.idToken=P.idToken||void 0,Y.accessToken=P.accessToken||void 0,Y.secret=P.secret,Y.nonce=P.nonce,Y.pendingToken=P.pendingToken||null,Y}_getIdTokenResponse(p){return js(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,js(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,js(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,$.xO)(m)}return p}}function ad(){return(ad=(0,h.Z)(function*(v,p){return xe(v,"POST","/v1/accounts:sendVerificationCode",te(v,p))})).apply(this,arguments)}function ud(){return(ud=(0,h.Z)(function*(v,p){return cn(v,"POST","/v1/accounts:signInWithPhoneNumber",te(v,p))})).apply(this,arguments)}function ld(){return(ld=(0,h.Z)(function*(v,p){const m=yield cn(v,"POST","/v1/accounts:signInWithPhoneNumber",te(v,p));if(m.temporaryProof)throw hn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const cd={USER_NOT_FOUND:"user-not-found"};function gf(){return(gf=(0,h.Z)(function*(v,p){return cn(v,"POST","/v1/accounts:signInWithPhoneNumber",te(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),cd)})).apply(this,arguments)}class $s extends Ti{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new $s({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new $s({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function pf(v,p){return ud.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function Fg(v,p){return ld.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function dd(v,p){return gf.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:I,verificationCode:M}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:I,code:M}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:I,phoneNumber:M,temporaryProof:P}=p;return I||m||M||P?new $s({verificationId:m,verificationCode:I,phoneNumber:M,temporaryProof:P}):null}}class qo{constructor(p){var m,I,M,P,Y,de;const Be=(0,$.zd)((0,$.pd)(p)),Ze=null!==(m=Be.apiKey)&&void 0!==m?m:null,yt=null!==(I=Be.oobCode)&&void 0!==I?I:null,Gt=function Wo(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Be.mode)&&void 0!==M?M:null);ae(Ze&&yt&&Gt,"argument-error"),this.apiKey=Ze,this.operation=Gt,this.code=yt,this.continueUrl=null!==(P=Be.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Y=Be.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(de=Be.tenantId)&&void 0!==de?de:null}static parseLink(p){const m=function mf(v){const p=(0,$.zd)((0,$.pd)(v)).link,m=p?(0,$.zd)((0,$.pd)(p)).deep_link_id:null,I=(0,$.zd)((0,$.pd)(v)).deep_link_id;return(I?(0,$.zd)((0,$.pd)(I)).link:null)||I||m||p||v}(p);try{return new qo(m)}catch{return null}}}let hd=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,I){return Br._fromEmailAndPassword(m,I)}static credentialWithLink(m,I){const M=qo.parseLink(I);return ae(M,"argument-error"),Br._fromEmailAndCode(m,M.code,M.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class mo{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Zo extends mo{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Cs extends Zo{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return ae("providerId"in m&&"signInMethod"in m,"argument-error"),ns._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ae(p.idToken||p.accessToken,"argument-error"),ns._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Cs.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Cs.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:I,oauthTokenSecret:M,pendingToken:P,nonce:Y,providerId:de}=p;if(!I&&!M&&!m&&!P||!de)return null;try{return new Cs(de)._credential({idToken:m,accessToken:I,nonce:Y,pendingToken:P})}catch{return null}}}let fd=(()=>{class v extends Zo{constructor(){super("facebook.com")}static credential(m){return ns._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),pd=(()=>{class v extends Zo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,I){return ns._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:I})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:I,oauthAccessToken:M}=m;if(!I&&!M)return null;try{return v.credential(I,M)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Ru=(()=>{class v extends Zo{constructor(){super("github.com")}static credential(m){return ns._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Hs extends Ti{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return js(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,js(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,js(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:M,pendingToken:P}=m;return I&&M&&P&&I===M?new Hs(I,P):null}static _create(p,m){return new Hs(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Nu extends mo{constructor(p){ae(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Nu.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Nu.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Hs.fromJSON(p);return ae(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:I}=p;if(!m||!I)return null;try{return Hs._create(I,m)}catch{return null}}}let vf=(()=>{class v extends Zo{constructor(){super("twitter.com")}static credential(m,I){return ns._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:I})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:I,oauthTokenSecret:M}=m;if(!I||!M)return null;try{return v.credential(I,M)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Ko(v,p){return yo.apply(this,arguments)}function yo(){return(yo=(0,h.Z)(function*(v,p){return cn(v,"POST","/v1/accounts:signUp",te(v,p))})).apply(this,arguments)}class On{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,I,M=!1){return(0,h.Z)(function*(){const P=yield Pn._fromIdTokenResponse(p,I,M),Y=Va(I);return new On({user:P,providerId:Y,_tokenResponse:I,operationType:m})})()}static _forOperation(p,m,I){return(0,h.Z)(function*(){yield p._updateTokensIfNecessary(I,!0);const M=Va(I);return new On({user:p,providerId:M,_tokenResponse:I,operationType:m})})()}}function Va(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Pu(v){return ar.apply(this,arguments)}function ar(){return(ar=(0,h.Z)(function*(v){var p;const m=pn(v);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new On({user:m.currentUser,providerId:null,operationType:"signIn"});const I=yield Ko(m,{returnSecureToken:!0}),M=yield On._fromIdTokenResponse(m,"signIn",I,!0);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class _o extends $.ZR{constructor(p,m,I,M){var P;super(m.code,m.message),this.operationType=I,this.user=M,Object.setPrototypeOf(this,_o.prototype),this.customData={appName:p.name,tenantId:null!==(P=p.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(p,m,I,M){return new _o(p,m,I,M)}}function vo(v,p,m,I){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?_o._fromErrorAndOperation(v,P,p,I):P})}function Pr(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function wf(v,p){return Ou.apply(this,arguments)}function Ou(){return Ou=(0,h.Z)(function*(v,p){const m=(0,$.m9)(v);yield Ua(!0,m,p);const{providerUserInfo:I}=yield function Nn(v,p){return nr.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),M=Pr(I||[]);return m.providerData=m.providerData.filter(P=>M.has(P.providerId)),M.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),Ou.apply(this,arguments)}function Jr(v,p){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,h.Z)(function*(v,p,m=!1){const I=yield qt(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return On._forOperation(v,"link",I)})).apply(this,arguments)}function Ua(v,p,m){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,h.Z)(function*(v,p,m){yield Bn(p);const M=!1===v?"provider-already-linked":"no-such-provider";ae(Pr(p.providerData).has(m)===v,p.auth,M)})).apply(this,arguments)}function gd(v,p){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,h.Z)(function*(v,p,m=!1){const{auth:I}=v,M="reauthenticate";try{const P=yield qt(v,vo(I,M,p,v),m);ae(P.idToken,I,"internal-error");const Y=qr(P.idToken);ae(Y,I,"internal-error");const{sub:de}=Y;return ae(v.uid===de,I,"user-mismatch"),On._forOperation(v,M,P)}catch(P){throw"auth/user-not-found"===P?.code&&Se(I,"user-mismatch"),P}})).apply(this,arguments)}function Ba(v,p){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,h.Z)(function*(v,p,m=!1){const I="signIn",M=yield vo(v,I,p),P=yield On._fromIdTokenResponse(v,I,M);return m||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Rt(v,p){return ku.apply(this,arguments)}function ku(){return(ku=(0,h.Z)(function*(v,p){return Ba(pn(v),p)})).apply(this,arguments)}function Ef(v,p){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,h.Z)(function*(v,p){const m=(0,$.m9)(v);return yield Ua(!1,m,p.providerId),Jr(m,p)})).apply(this,arguments)}function Ul(v,p){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,h.Z)(function*(v,p){return gd((0,$.m9)(v),p)})).apply(this,arguments)}function yd(){return(yd=(0,h.Z)(function*(v,p){return cn(v,"POST","/v1/accounts:signInWithCustomToken",te(v,p))})).apply(this,arguments)}function Lg(v,p){return ge.apply(this,arguments)}function ge(){return ge=(0,h.Z)(function*(v,p){const m=pn(v),I=yield function md(v,p){return yd.apply(this,arguments)}(m,{token:p,returnSecureToken:!0}),M=yield On._fromIdTokenResponse(m,"signIn",I);return yield m._updateCurrentUser(M.user),M}),ge.apply(this,arguments)}class Lt{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?jl._fromServerResponse(p,m):"totpInfo"in m?ja._fromServerResponse(p,m):Se(p,"internal-error")}}class jl extends Lt{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new jl(m)}}class ja extends Lt{constructor(p){super("totp",p)}static _fromServerResponse(p,m){return new ja(m)}}function Kn(v,p,m){var I;ae((null===(I=m.url)||void 0===I?void 0:I.length)>0,v,"invalid-continue-uri"),ae(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ae(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(ae(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function _d(v,p,m){return Qo.apply(this,arguments)}function Qo(){return Qo=(0,h.Z)(function*(v,p,m){var I;const M=pn(v),P={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=M._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Y=yield Er(M,P,"getOobCode",!0);m&&Kn(M,Y,m),yield zo(M,Y)}else m&&Kn(M,P,m),yield zo(M,P).catch(function(){var Y=(0,h.Z)(function*(de){if("auth/missing-recaptcha-token"!==de.code)return Promise.reject(de);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Be=yield Er(M,P,"getOobCode",!0);m&&Kn(M,Be,m),yield zo(M,Be)}});return function(de){return Y.apply(this,arguments)}}())}),Qo.apply(this,arguments)}function xi(v,p,m){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,h.Z)(function*(v,p,m){yield Oa((0,$.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function vd(v,p){return wd.apply(this,arguments)}function wd(){return wd=(0,h.Z)(function*(v,p){yield function fo(v,p){return Si.apply(this,arguments)}((0,$.m9)(v),{oobCode:p})}),wd.apply(this,arguments)}function zs(v,p){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,h.Z)(function*(v,p){const m=(0,$.m9)(v),I=yield Oa(m,{oobCode:p}),M=I.requestType;switch(ae(M,m,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ae(I.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ae(I.mfaInfo,m,"internal-error");default:ae(I.email,m,"internal-error")}let P=null;return I.mfaInfo&&(P=Lt._fromServerResponse(pn(m),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:P},operation:M}})).apply(this,arguments)}function Or(v,p){return ai.apply(this,arguments)}function ai(){return(ai=(0,h.Z)(function*(v,p){const{data:m}=yield zs((0,$.m9)(v),p);return m.email})).apply(this,arguments)}function Ws(v,p,m){return bs.apply(this,arguments)}function bs(){return bs=(0,h.Z)(function*(v,p,m){var I;const M=pn(v),P={returnSecureToken:!0,email:p,password:m,clientType:"CLIENT_TYPE_WEB"};let Y;if(null!==(I=M._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Ze=yield Er(M,P,"signUpPassword");Y=Ko(M,Ze)}else Y=Ko(M,P).catch(function(){var Ze=(0,h.Z)(function*(yt){if("auth/missing-recaptcha-token"===yt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Gt=yield Er(M,P,"signUpPassword");return Ko(M,Gt)}return Promise.reject(yt)});return function(yt){return Ze.apply(this,arguments)}}());const de=yield Y.catch(Ze=>Promise.reject(Ze)),Be=yield On._fromIdTokenResponse(M,"signIn",de);return yield M._updateCurrentUser(Be.user),Be}),bs.apply(this,arguments)}function rs(v,p,m){return Rt((0,$.m9)(v),hd.credential(p,m))}function Ed(v,p,m){return wo.apply(this,arguments)}function wo(){return wo=(0,h.Z)(function*(v,p,m){var I;const M=pn(v),P={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function Y(de,Be){ae(Be.handleCodeInApp,M,"argument-error"),Be&&Kn(M,de,Be)}if(null!==(I=M._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const de=yield Er(M,P,"getOobCode",!0);Y(de,m),yield po(M,de)}else Y(P,m),yield po(M,P).catch(function(){var de=(0,h.Z)(function*(Be){if("auth/missing-recaptcha-token"!==Be.code)return Promise.reject(Be);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ze=yield Er(M,P,"getOobCode",!0);Y(Ze,m),yield po(M,Ze)}});return function(Be){return de.apply(this,arguments)}}())}),wo.apply(this,arguments)}function Id(v,p){return"EMAIL_SIGNIN"===qo.parseLink(p)?.operation}function Vg(v,p,m){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,h.Z)(function*(v,p,m){const I=(0,$.m9)(v),M=hd.credentialWithLink(p,m||nt());return ae(M._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Rt(I,M)})).apply(this,arguments)}function $a(){return($a=(0,h.Z)(function*(v,p){return xe(v,"POST","/v1/accounts:createAuthUri",te(v,p))})).apply(this,arguments)}function Cd(v,p){return Vu.apply(this,arguments)}function Vu(){return Vu=(0,h.Z)(function*(v,p){const I={identifier:p,continueUri:Wt()?nt():"http://localhost"},{signinMethods:M}=yield function Lu(v,p){return $a.apply(this,arguments)}((0,$.m9)(v),I);return M||[]}),Vu.apply(this,arguments)}function Dd(v,p){return Xo.apply(this,arguments)}function Xo(){return Xo=(0,h.Z)(function*(v,p){const m=(0,$.m9)(v),M={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Kn(m.auth,M,p);const{email:P}=yield function Fl(v,p){return ka.apply(this,arguments)}(m.auth,M);P!==v.email&&(yield v.reload())}),Xo.apply(this,arguments)}function $l(v,p,m){return Ha.apply(this,arguments)}function Ha(){return Ha=(0,h.Z)(function*(v,p,m){const I=(0,$.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&Kn(I.auth,P,m);const{email:Y}=yield function od(v,p){return Qr.apply(this,arguments)}(I.auth,P);Y!==v.email&&(yield v.reload())}),Ha.apply(this,arguments)}function Uu(){return(Uu=(0,h.Z)(function*(v,p){return xe(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function bd(v,p){return Gl.apply(this,arguments)}function Gl(){return Gl=(0,h.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const I=(0,$.m9)(v),P={idToken:yield I.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},Y=yield qt(I,function Hl(v,p){return Uu.apply(this,arguments)}(I.auth,P));I.displayName=Y.displayName||null,I.photoURL=Y.photoUrl||null;const de=I.providerData.find(({providerId:Be})=>"password"===Be);de&&(de.displayName=I.displayName,de.photoURL=I.photoURL),yield I._updateTokensIfNecessary(Y)}),Gl.apply(this,arguments)}function Td(v,p){return is((0,$.m9)(v),p,null)}function jr(v,p){return is((0,$.m9)(v),null,p)}function is(v,p,m){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,h.Z)(function*(v,p,m){const{auth:I}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(P.email=p),m&&(P.password=m);const Y=yield qt(v,or(I,P));yield v._updateTokensIfNecessary(Y,!0)})).apply(this,arguments)}class ea{constructor(p,m,I={}){this.isNewUser=p,this.providerId=m,this.profile=I}}class zl extends ea{constructor(p,m,I,M){super(p,m,I),this.username=M}}class Ug extends ea{constructor(p,m){super(p,"facebook.com",m)}}class Ad extends zl{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Bg extends ea{constructor(p,m){super(p,"google.com",m)}}class Bu extends zl{constructor(p,m,I){super(p,"twitter.com",m,I)}}function Wl(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Sd(v){var p,m;if(!v)return null;const{providerId:I}=v,M=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!I&&v?.idToken){const Y=null===(m=null===(p=qr(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(Y)return new ea(P,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!I)return null;switch(I){case"facebook.com":return new Ug(P,M);case"github.com":return new Ad(P,M);case"google.com":return new Bg(P,M);case"twitter.com":return new Bu(P,M,v.screenName||null);case"custom":case"anonymous":return new ea(P,null);default:return new ea(P,I,M)}}(m)}class Ss{constructor(p,m,I){this.type=p,this.credential=m,this.auth=I}static _fromIdtoken(p,m){return new Ss("enroll",p,m)}static _fromMfaPendingCredential(p){return new Ss("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,I;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Ss._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(I=p.multiFactorSession)&&void 0!==I&&I.idToken)return Ss._fromIdtoken(p.multiFactorSession.idToken)}return null}}class ql{constructor(p,m,I){this.session=p,this.hints=m,this.signInResolver=I}static _fromError(p,m){const I=pn(p),M=m.customData._serverResponse,P=(M.mfaInfo||[]).map(de=>Lt._fromServerResponse(I,de));ae(M.mfaPendingCredential,I,"internal-error");const Y=Ss._fromMfaPendingCredential(M.mfaPendingCredential);return new ql(Y,P,function(){var de=(0,h.Z)(function*(Be){const Ze=yield Be._process(I,Y);delete M.mfaInfo,delete M.mfaPendingCredential;const yt=Object.assign(Object.assign({},M),{idToken:Ze.idToken,refreshToken:Ze.refreshToken});switch(m.operationType){case"signIn":const Gt=yield On._fromIdTokenResponse(I,m.operationType,yt);return yield I._updateCurrentUser(Gt.user),Gt;case"reauthenticate":return ae(m.user,I,"internal-error"),On._forOperation(m.user,m.operationType,yt);default:Se(I,"internal-error")}});return function(Be){return de.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,h.Z)(function*(){return m.signInResolver(p)})()}}function za(v,p){var m;const I=(0,$.m9)(v),M=p;return ae(p.customData.operationType,I,"argument-error"),ae(null===(m=M.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,I,"argument-error"),ql._fromError(I,M)}class ra{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(I=>Lt._fromServerResponse(p.auth,I)))})}static _fromUser(p){return new ra(p)}getSession(){var p=this;return(0,h.Z)(function*(){return Ss._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var I=this;return(0,h.Z)(function*(){const M=p,P=yield I.getSession(),Y=yield qt(I.user,M._process(I.user.auth,P,m));return yield I.user._updateTokensIfNecessary(Y),I.user.reload()})()}unenroll(p){var m=this;return(0,h.Z)(function*(){const I="string"==typeof p?p:p.uid,M=yield m.user.getIdToken();try{const P=yield qt(m.user,function Eo(v,p){return xe(v,"POST","/v2/accounts/mfaEnrollment:withdraw",te(v,p))}(m.user.auth,{idToken:M,mfaEnrollmentId:I}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Y})=>Y!==I),yield m.user._updateTokensIfNecessary(P),yield m.user.reload()}catch(P){throw P}})()}}const Io=new WeakMap;function ia(v){const p=(0,$.m9)(v);return Io.has(p)||Io.set(p,ra._fromUser(p)),Io.get(p)}const Wa="__sak";class qa{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Wa,"1"),this.storage.removeItem(Wa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Gu=(()=>{class v extends qa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,I)=>this.onStorageEvent(m,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Zl(){const v=(0,$.z$)();return L(v)||Ct(v)}()&&function vr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ut(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const I of Object.keys(this.listeners)){const M=this.storage.getItem(I),P=this.localCache[I];M!==P&&m(I,P,M)}}onStorageEvent(m,I=!1){if(!m.key)return void this.forAllChangedKeys((de,Be,Ze)=>{this.notifyListeners(de,Ze)});const M=m.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const de=this.storage.getItem(M);if(m.newValue!==de)null!==m.newValue?this.storage.setItem(M,m.newValue):this.storage.removeItem(M);else if(this.localCache[M]===m.newValue&&!I)return}const P=()=>{const de=this.storage.getItem(M);!I&&this.localCache[M]===de||this.notifyListeners(M,de)},Y=this.storage.getItem(M);!function Tn(){return(0,$.w1)()&&10===document.documentMode}()||Y===m.newValue||m.newValue===m.oldValue?P():setTimeout(P,10)}notifyListeners(m,I){this.localCache[m]=I;const M=this.listeners[m];if(M)for(const P of Array.from(M))P(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,I,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:I,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,I){var M=()=>super._set,P=this;return(0,h.Z)(function*(){yield M().call(P,m,I),P.localCache[m]=JSON.stringify(I)})()}_get(m){var I=()=>super._get,M=this;return(0,h.Z)(function*(){const P=yield I().call(M,m);return M.localCache[m]=JSON.stringify(P),P})()}_remove(m){var I=()=>super._remove,M=this;return(0,h.Z)(function*(){yield I().call(M,m),delete M.localCache[m]})()}}return v.type="LOCAL",v})(),ui=(()=>{class v extends qa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,I){}_removeListener(m,I){}}return v.type="SESSION",v})();let Ql=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const I=this.receivers.find(P=>P.isListeningto(m));if(I)return I;const M=new v(m);return this.receivers.push(M),M}isListeningto(m){return this.eventTarget===m}handleEvent(m){var I=this;return(0,h.Z)(function*(){const M=m,{eventId:P,eventType:Y,data:de}=M.data,Be=I.handlersMap[Y];if(!Be?.size)return;M.ports[0].postMessage({status:"ack",eventId:P,eventType:Y});const Ze=Array.from(Be).map(function(){var Gt=(0,h.Z)(function*(di){return di(M.origin,de)});return function(di){return Gt.apply(this,arguments)}}()),yt=yield function Pd(v){return Promise.all(v.map(function(){var p=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(I){return{fulfilled:!1,reason:I}}});return function(m){return p.apply(this,arguments)}}()))}(Ze);M.ports[0].postMessage({status:"done",eventId:P,eventType:Y,response:yt})})()}_subscribe(m,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(I)}_unsubscribe(m,I){this.handlersMap[m]&&I&&this.handlersMap[m].delete(I),(!I||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function ss(v="",p=10){let m="";for(let I=0;I<p;I++)m+=Math.floor(10*Math.random());return v+m}class Od{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,I=50){var M=this;return(0,h.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Y,de;return new Promise((Be,Ze)=>{const yt=ss("",20);P.port1.start();const Gt=setTimeout(()=>{Ze(new Error("unsupported_event"))},I);de={messageChannel:P,onMessage(di){const Ro=di;if(Ro.data.eventId===yt)switch(Ro.data.status){case"ack":clearTimeout(Gt),Y=setTimeout(()=>{Ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),Be(Ro.data.response);break;default:clearTimeout(Gt),clearTimeout(Y),Ze(new Error("invalid_response"))}}},M.handlers.add(de),P.port1.addEventListener("message",de.onMessage),M.target.postMessage({eventType:p,eventId:yt,data:m},[P.port2])}).finally(()=>{de&&M.removeMessageHandler(de)})})()}}function Qn(){return window}function zu(){return typeof Qn().WorkerGlobalScope<"u"&&"function"==typeof Qn().importScripts}function Ka(){return(Ka=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ur="firebaseLocalStorageDb",sa=1,kn="firebaseLocalStorage",Df="fbase_key";class Ks{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function qu(v,p){return v.transaction([kn],p?"readwrite":"readonly").objectStore(kn)}function Jl(){const v=indexedDB.open(ur,sa);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const I=v.result;try{I.createObjectStore(kn,{keyPath:Df})}catch(M){m(M)}}),v.addEventListener("success",(0,h.Z)(function*(){const I=v.result;I.objectStoreNames.contains(kn)?p(I):(I.close(),yield function oa(){const v=indexedDB.deleteDatabase(ur);return new Ks(v).toPromise()}(),p(yield Jl()))}))})}function Xl(v,p,m){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,h.Z)(function*(v,p,m){const I=qu(v,!0).put({[Df]:p,value:m});return new Ks(I).toPromise()})).apply(this,arguments)}function Co(){return(Co=(0,h.Z)(function*(v,p){const m=qu(v,!1).get(p),I=yield new Ks(m).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Ya(v,p){const m=qu(v,!0).delete(p);return new Ks(m).toPromise()}const ec=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield Jl()),m.db})()}_withRetries(m){var I=this;return(0,h.Z)(function*(){let M=0;for(;;)try{const P=yield I._openDb();return yield m(P)}catch(P){if(M++>3)throw P;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return zu()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=Ql._getInstance(function Wu(){return zu()?self:null}()),m.receiver._subscribe("keyChanged",function(){var I=(0,h.Z)(function*(M,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(M,P){return I.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var I=(0,h.Z)(function*(M,P){return["keyChanged"]});return function(M,P){return I.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var I,M;if(m.activeServiceWorker=yield function kd(){return Ka.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Od(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);P&&null!==(I=P[0])&&void 0!==I&&I.fulfilled&&null!==(M=P[0])&&void 0!==M&&M.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var I=this;return(0,h.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Fd(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:m},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Jl();return yield Xl(m,Wa,"1"),yield Ya(m,Wa),!0}catch{}return!1})()}_withPendingWrite(m){var I=this;return(0,h.Z)(function*(){I.pendingWrites++;try{yield m()}finally{I.pendingWrites--}})()}_set(m,I){var M=this;return(0,h.Z)(function*(){return M._withPendingWrite((0,h.Z)(function*(){return yield M._withRetries(P=>Xl(P,m,I)),M.localCache[m]=I,M.notifyServiceWorker(m)}))})()}_get(m){var I=this;return(0,h.Z)(function*(){const M=yield I._withRetries(P=>function bf(v,p){return Co.apply(this,arguments)}(P,m));return I.localCache[m]=M,M})()}_remove(m){var I=this;return(0,h.Z)(function*(){return I._withPendingWrite((0,h.Z)(function*(){return yield I._withRetries(M=>Ya(M,m)),delete I.localCache[m],I.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const I=yield m._withRetries(Y=>{const de=qu(Y,!1).getAll();return new Ks(de).toPromise()});if(!I)return[];if(0!==m.pendingWrites)return[];const M=[],P=new Set;for(const{fbase_key:Y,value:de}of I)P.add(Y),JSON.stringify(m.localCache[Y])!==JSON.stringify(de)&&(m.notifyListeners(Y,de),M.push(Y));for(const Y of Object.keys(m.localCache))m.localCache[Y]&&!P.has(Y)&&(m.notifyListeners(Y,null),M.push(Y));return M})()}notifyListeners(m,I){this.localCache[m]=I;const M=this.listeners[m];if(M)for(const P of Array.from(M))P(I)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),tc=1e12;class Ud{constructor(p){this.auth=p,this.counter=tc,this._widgets=new Map}render(p,m){const I=this.counter;return this._widgets.set(I,new nc(p,this.auth.name,m||{})),this.counter++,I}reset(p){var m;const I=p||tc;null===(m=this._widgets.get(I))||void 0===m||m.delete(),this._widgets.delete(I)}getResponse(p){var m;return(null===(m=this._widgets.get(p||tc))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,h.Z)(function*(){var I;return null===(I=m._widgets.get(p||tc))||void 0===I||I.execute(),""})()}}class nc{constructor(p,m,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof p?document.getElementById(p):p;ae(M,"argument-error",{appName:m}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function rc(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<v;I++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Sf=Vr("rcb"),Xy=new si(3e4,6e4);class To{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Qn().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return ae(function t_(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)&&At(Qn().grecaptcha)?Promise.resolve(Qn().grecaptcha):new Promise((I,M)=>{const P=Qn().setTimeout(()=>{M(be(p,"network-request-failed"))},Xy.get());Qn()[Sf]=()=>{Qn().clearTimeout(P),delete Qn()[Sf];const de=Qn().grecaptcha;if(!de||!At(de))return void M(be(p,"internal-error"));const Be=de.render;de.render=(Ze,yt)=>{const Gt=Be(Ze,yt);return this.counter++,Gt},this.hostLanguage=m,I(de)},rn(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:Sf,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),M(be(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=Qn().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Af{load(p){return(0,h.Z)(function*(){return new Ud(p)})()}clearedOneInstance(){}}const lr="recaptcha",Ku={theme:"light",type:"image"};class Yu{constructor(p,m=Object.assign({},Ku),I){this.parameters=m,this.type=lr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pn(I),this.isInvisible="invisible"===this.parameters.size,ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof p?document.getElementById(p):p;ae(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Af:new To,this.validateStartingState()}verify(){var p=this;return(0,h.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),I=p.getAssertedRecaptcha();return I.getResponse(m)||new Promise(P=>{const Y=de=>{de&&(p.tokenChangeListeners.delete(Y),P(de))};p.tokenChangeListeners.add(Y),p.isInvisible&&I.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ae(!this.parameters.sitekey,this.auth,"argument-error"),ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(I=>I(m)),"function"==typeof p)p(m);else if("string"==typeof p){const I=Qn()[p];"function"==typeof I&&I(m)}}}assertNotDestroyed(){ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,h.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const I=document.createElement("div");m.appendChild(I),m=I}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,h.Z)(function*(){ae(Wt()&&!zu(),p.auth,"internal-error"),yield function ic(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function pe(v){return ie.apply(this,arguments)}(p.auth);ae(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class yi{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=$s._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function Qs(v,p,m){return sc.apply(this,arguments)}function sc(){return(sc=(0,h.Z)(function*(v,p,m){const I=pn(v),M=yield Qu(I,p,(0,$.m9)(m));return new yi(M,P=>Rt(I,P))})).apply(this,arguments)}function Qa(v,p,m){return ua.apply(this,arguments)}function ua(){return(ua=(0,h.Z)(function*(v,p,m){const I=(0,$.m9)(v);yield Ua(!1,I,"phone");const M=yield Qu(I.auth,p,(0,$.m9)(m));return new yi(M,P=>Ef(I,P))})).apply(this,arguments)}function Bd(v,p,m){return oc.apply(this,arguments)}function oc(){return(oc=(0,h.Z)(function*(v,p,m){const I=(0,$.m9)(v),M=yield Qu(I.auth,p,(0,$.m9)(m));return new yi(M,P=>Ul(I,P))})).apply(this,arguments)}function Qu(v,p,m){return ac.apply(this,arguments)}function ac(){return ac=(0,h.Z)(function*(v,p,m){var I;const M=yield m.verify();try{let P;if(ae("string"==typeof M,v,"argument-error"),ae(m.type===lr,v,"argument-error"),P="string"==typeof p?{phoneNumber:p}:p,"session"in P){const Y=P.session;if("phoneNumber"in P)return ae("enroll"===Y.type,v,"internal-error"),(yield function Hu(v,p){return xe(v,"POST","/v2/accounts/mfaEnrollment:start",te(v,p))}(v,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{ae("signin"===Y.type,v,"internal-error");const de=(null===(I=P.multiFactorHint)||void 0===I?void 0:I.uid)||P.multiFactorUid;return ae(de,v,"missing-multi-factor-info"),(yield function Ld(v,p){return xe(v,"POST","/v2/accounts/mfaSignIn:start",te(v,p))}(v,{mfaPendingCredential:Y.credential,mfaEnrollmentId:de,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield function kg(v,p){return ad.apply(this,arguments)}(v,{phoneNumber:P.phoneNumber,recaptchaToken:M});return Y}}finally{m._reset()}}),ac.apply(this,arguments)}function Mi(v,p){return gn.apply(this,arguments)}function gn(){return(gn=(0,h.Z)(function*(v,p){yield Jr((0,$.m9)(v),p)})).apply(this,arguments)}let $i=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=pn(m)}verifyPhoneNumber(m,I){return Qu(this.auth,m,(0,$.m9)(I))}static credential(m,I){return $s._fromVerification(m,I)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:I,temporaryProof:M}=m;return I&&M?$s._fromTokenResponse(I,M):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function at(v,p){return p?Zn(p):(ae(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Hi extends Ti{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return js(p,this._buildIdpRequest())}_linkToIdToken(p,m){return js(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return js(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function rr(v){return Ba(v.auth,new Hi(v),v.bypassAuthState)}function jd(v){const{auth:p,user:m}=v;return ae(m,p,"internal-error"),gd(m,new Hi(v),v.bypassAuthState)}function Ja(v){return li.apply(this,arguments)}function li(){return(li=(0,h.Z)(function*(v){const{auth:p,user:m}=v;return ae(m,p,"internal-error"),Jr(m,new Hi(v),v.bypassAuthState)})).apply(this,arguments)}class uc{constructor(p,m,I,M,P=!1){this.auth=p,this.resolver=I,this.user=M,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,h.Z)(function*(I,M){p.pendingPromise={resolve:I,reject:M};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(P){p.reject(P)}});return function(I,M){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,h.Z)(function*(){const{urlResponse:I,sessionId:M,postBody:P,tenantId:Y,error:de,type:Be}=p;if(de)return void m.reject(de);const Ze={auth:m.auth,requestUri:I,sessionId:M,tenantId:Y||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Be)(Ze))}catch(yt){m.reject(yt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return rr;case"linkViaPopup":case"linkViaRedirect":return Ja;case"reauthViaPopup":case"reauthViaRedirect":return jd;default:Se(this.auth,"internal-error")}}resolve(p){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $d=new si(2e3,1e4);function Ri(v,p,m){return Js.apply(this,arguments)}function Js(){return(Js=(0,h.Z)(function*(v,p,m){const I=pn(v);He(v,p,mo);const M=at(I,m);return new cc(I,"signInViaPopup",p,M).executeNotNull()})).apply(this,arguments)}function lc(v,p,m){return So.apply(this,arguments)}function So(){return(So=(0,h.Z)(function*(v,p,m){const I=(0,$.m9)(v);He(I.auth,p,mo);const M=at(I.auth,m);return new cc(I.auth,"reauthViaPopup",p,M,I).executeNotNull()})).apply(this,arguments)}function la(v,p,m){return gt.apply(this,arguments)}function gt(){return(gt=(0,h.Z)(function*(v,p,m){const I=(0,$.m9)(v);He(I.auth,p,mo);const M=at(I.auth,m);return new cc(I.auth,"linkViaPopup",p,M,I).executeNotNull()})).apply(this,arguments)}let cc=(()=>{class v extends uc{constructor(m,I,M,P,Y){super(m,I,P,Y),this.provider=M,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const I=yield m.execute();return ae(I,m.auth,"internal-error"),I})()}onExecution(){var m=this;return(0,h.Z)(function*(){bt(1===m.filter.length,"Popup operations only handle one event");const I=ss();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],I),m.authWindow.associatedEvent=I,m.resolver._originValidation(m.auth).catch(M=>{m.reject(M)}),m.resolver._isIframeWebStorageSupported(m.auth,M=>{M||m.reject(be(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var I,M;this.pollId=null!==(M=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(be(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,$d.get())};m()}}return v.currentPopupAction=null,v})();const Hd="pendingRedirect",Ni=new Map;class Ju extends uc{constructor(p,m,I=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,I),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,h.Z)(function*(){let I=Ni.get(m.auth._key());if(!I){try{const P=(yield function $r(v,p){return Xa.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;I=()=>Promise.resolve(P)}catch(M){I=()=>Promise.reject(M)}Ni.set(m.auth._key(),I)}return m.bypassAuthState||Ni.set(m.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,I=this;return(0,h.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(I,p);if("unknown"!==p.type){if(p.eventId){const M=yield I.auth._redirectUserForId(p.eventId);if(M)return I.user=M,m().call(I,p);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Xa(){return(Xa=(0,h.Z)(function*(v,p){const m=Xu(p),I=xf(v);if(!(yield I._isAvailable()))return!1;const M="true"===(yield I._get(m));return yield I._remove(m),M})).apply(this,arguments)}function dc(v,p){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,h.Z)(function*(v,p){return xf(v)._set(Xu(p),"true")})).apply(this,arguments)}function eu(){Ni.clear()}function tu(v,p){Ni.set(v._key(),p)}function xf(v){return Zn(v._redirectPersistence)}function Xu(v){return Yr(Hd,v.config.apiKey,v.name)}function nu(v,p,m){return function Gd(v,p,m){return hc.apply(this,arguments)}(v,p,m)}function hc(){return(hc=(0,h.Z)(function*(v,p,m){const I=pn(v);He(v,p,mo),yield I._initializationPromise;const M=at(I,m);return yield dc(M,I),M._openRedirect(I,p,"signInViaRedirect")})).apply(this,arguments)}function fc(v,p,m){return function ru(v,p,m){return _i.apply(this,arguments)}(v,p,m)}function _i(){return(_i=(0,h.Z)(function*(v,p,m){const I=(0,$.m9)(v);He(I.auth,p,mo),yield I.auth._initializationPromise;const M=at(I.auth,m);yield dc(M,I.auth);const P=yield Pi(I);return M._openRedirect(I.auth,p,"reauthViaRedirect",P)})).apply(this,arguments)}function pc(v,p,m){return function Xr(v,p,m){return iu.apply(this,arguments)}(v,p,m)}function iu(){return(iu=(0,h.Z)(function*(v,p,m){const I=(0,$.m9)(v);He(I.auth,p,mo),yield I.auth._initializationPromise;const M=at(I.auth,m);yield Ua(!1,I,p.providerId),yield dc(M,I.auth);const P=yield Pi(I);return M._openRedirect(I.auth,p,"linkViaRedirect",P)})).apply(this,arguments)}function Mf(v,p){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,h.Z)(function*(v,p){return yield pn(v)._initializationPromise,xo(v,p,!1)})).apply(this,arguments)}function xo(v,p){return ca.apply(this,arguments)}function ca(){return(ca=(0,h.Z)(function*(v,p,m=!1){const I=pn(v),M=at(I,p),Y=yield new Ju(I,M,m).execute();return Y&&!m&&(delete Y.user._redirectEventId,yield I._persistUserIfCurrent(Y.user),yield I._setRedirectUser(null,p)),Y})).apply(this,arguments)}function Pi(v){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,h.Z)(function*(v){const p=ss(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class el{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(p,I)&&(m=!0,this.sendToConsumer(p,I),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Xs(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gi(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var I;if(p.error&&!Gi(p)){const M=(null===(I=p.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";m.onError(be(this.auth,M))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const I=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&I}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(da(p))}saveEventToCache(p){this.cachedEventUids.add(da(p)),this.lastProcessedEventTime=Date.now()}}function da(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function Gi({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function Dr(v){return eo.apply(this,arguments)}function eo(){return(eo=(0,h.Z)(function*(v,p={}){return xe(v,"GET","/v1/projects",p)})).apply(this,arguments)}const n_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tl=/^https?/;function ha(){return(ha=(0,h.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Dr(v);for(const m of p)try{if(Mo(m))return}catch{}Se(v,"unauthorized-domain")})).apply(this,arguments)}function Mo(v){const p=nt(),{protocol:m,hostname:I}=new URL(p);if(v.startsWith("chrome-extension://")){const Y=new URL(v);return""===Y.hostname&&""===I?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&Y.hostname===I}if(!tl.test(m))return!1;if(n_.test(v))return I===v;const M=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(I)}const gc=new si(3e4,6e4);function ou(){const v=Qn().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let ci=null;const Oi=new si(5e3,15e3),Nf="__/auth/iframe",zd="emulator/auth/iframe",zi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qd(v){const p=v.config;ae(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?es(p,zd):`https://${v.config.authDomain}/${Nf}`,I={apiKey:p.apiKey,appName:v.name,v:O.SDK_VERSION},M=Wd.get(v.config.apiHost);M&&(I.eid=M);const P=v._getFrameworks();return P.length&&(I.fw=P.join(",")),`${m}?${(0,$.xO)(I).slice(1)}`}function E(){return E=(0,h.Z)(function*(v){const p=yield function Rf(v){return ci=ci||function Tt(v){return new Promise((p,m)=>{var I,M,P;function Y(){ou(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{ou(),m(be(v,"network-request-failed"))},timeout:gc.get()})}if(null!==(M=null===(I=Qn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==M&&M.Iframe)p(gapi.iframes.getContext());else{if(null===(P=Qn().gapi)||void 0===P||!P.load){const de=Vr("iframefcb");return Qn()[de]=()=>{gapi.load?Y():m(be(v,"network-request-failed"))},rn(`https://apis.google.com/js/api.js?onload=${de}`).catch(Be=>m(Be))}Y()}}).catch(p=>{throw ci=null,p})}(v),ci}(v),m=Qn().gapi;return ae(m,v,"internal-error"),p.open({where:document.body,url:qd(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zi,dontclear:!0},I=>new Promise(function(){var M=(0,h.Z)(function*(P,Y){yield I.restyle({setHideOnLeave:!1});const de=be(v,"network-request-failed"),Be=Qn().setTimeout(()=>{Y(de)},Oi.get());function Ze(){Qn().clearTimeout(Be),P(I)}I.ping(Ze).then(Ze,()=>{Y(de)})});return function(P,Y){return M.apply(this,arguments)}}()))}),E.apply(this,arguments)}const D={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},S=500,V=600,q="_blank",J="http://localhost";class se{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const lt="__/auth/handler",Nt="emulator/auth/handler",Pt=encodeURIComponent("fac");function kr(v,p,m,I,M,P){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,h.Z)(function*(v,p,m,I,M,P){ae(v.config.authDomain,v,"auth-domain-config-required"),ae(v.config.apiKey,v,"invalid-api-key");const Y={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:I,v:O.SDK_VERSION,eventId:M};if(p instanceof mo){p.setDefaultLanguage(v.languageCode),Y.providerId=p.providerId||"",(0,$.xb)(p.getCustomParameters())||(Y.customParameters=JSON.stringify(p.getCustomParameters()));for(const[yt,Gt]of Object.entries(P||{}))Y[yt]=Gt}if(p instanceof Zo){const yt=p.getScopes().filter(Gt=>""!==Gt);yt.length>0&&(Y.scopes=yt.join(","))}v.tenantId&&(Y.tid=v.tenantId);const de=Y;for(const yt of Object.keys(de))void 0===de[yt]&&delete de[yt];const Be=yield v._getAppCheckToken(),Ze=Be?`#${Pt}=${encodeURIComponent(Be)}`:"";return`${function Ht({config:v}){return v.emulator?es(v,Nt):`https://${v.authDomain}/${lt}`}(v)}?${(0,$.xO)(de).slice(1)}${Ze}`})).apply(this,arguments)}const os="webStorageSupport",br=class au{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ui,this._completeRedirectFn=xo,this._overrideRedirectResult=tu}_openPopup(p,m,I,M){var P=this;return(0,h.Z)(function*(){var Y;bt(null===(Y=P.eventManagers[p._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const de=yield kr(p,m,I,nt(),M);return function We(v,p,m,I=S,M=V){const P=Math.max((window.screen.availHeight-M)/2,0).toString(),Y=Math.max((window.screen.availWidth-I)/2,0).toString();let de="";const Be=Object.assign(Object.assign({},D),{width:I.toString(),height:M.toString(),top:P,left:Y}),Ze=(0,$.z$)().toLowerCase();m&&(de=N(Ze)?q:m),k(Ze)&&(p=p||J,Be.scrollbars="yes");const yt=Object.entries(Be).reduce((di,[Ro,pa])=>`${di}${Ro}=${pa},`,"");if(function xt(v=(0,$.z$)()){var p;return Ct(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Ze)&&"_self"!==de)return function ze(v,p){const m=document.createElement("a");m.href=v,m.target=p;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(I)}(p||"",de),new se(null);const Gt=window.open(p||"",de,yt);ae(Gt,v,"popup-blocked");try{Gt.focus()}catch{}return new se(Gt)}(p,de,ss())})()}_openRedirect(p,m,I,M){var P=this;return(0,h.Z)(function*(){return yield P._originValidation(p),function Zs(v){Qn().location.href=v}(yield kr(p,m,I,nt(),M)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:M,promise:P}=this.eventManagers[m];return M?Promise.resolve(M):(bt(P,"If manager is not set, promise should be"),P)}const I=this.initAndGetManager(p);return this.eventManagers[m]={promise:I},I.catch(()=>{delete this.eventManagers[m]}),I}initAndGetManager(p){var m=this;return(0,h.Z)(function*(){const I=yield function Zd(v){return E.apply(this,arguments)}(p),M=new el(p);return I.register("authEvent",P=>(ae(P?.authEvent,p,"invalid-auth-event"),{status:M.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:M},m.iframes[p._key()]=I,M})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(os,{type:os},M=>{var P;const Y=null===(P=M?.[0])||void 0===P?void 0:P[os];void 0!==Y&&m(!!Y),Se(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function nl(v){return ha.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Ut()||L()||Ct()}};class as{constructor(p){this.factorId=p}_process(p,m,I){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,I);case"signin":return this._finalizeSignIn(p,m.credential);default:return Je("unexpected MultiFactorSessionType")}}}class us extends as{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new us(p)}_finalizeEnroll(p,m,I){return function na(v,p){return xe(v,"POST","/v2/accounts/mfaEnrollment:finalize",te(v,p))}(p,{idToken:m,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function bo(v,p){return xe(v,"POST","/v2/accounts/mfaSignIn:finalize",te(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Pf=(()=>{class v{constructor(){}static assertion(m){return us._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var lu="@firebase/auth";class fa{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(I=>{p(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);m&&(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,$.Pz)("authIdTokenMaxAge"),function kf(v){(0,O._registerComponent)(new le.wA("auth",(p,{options:m})=>{const I=p.getProvider("app").getImmediate(),M=p.getProvider("heartbeat"),P=p.getProvider("app-check-internal"),{apiKey:Y,authDomain:de}=I.options;ae(Y&&!Y.includes(":"),"invalid-api-key",{appName:I.name});const Be={apiKey:Y,authDomain:de,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ws(v)},Ze=new xn(I,M,P,Be);return function Es(v,p){const m=p?.persistence||[],I=(Array.isArray(m)?m:[m]).map(Zn);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(I,p?.popupRedirectResolver)}(Ze,m),Ze},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,I)=>{p.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new le.wA("auth-internal",p=>{const m=pn(p.getProvider("auth").getImmediate());return new fa(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(lu,"0.23.2",function sl(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,O.registerVersion)(lu,"0.23.2","esm2017")}("Browser")},2090:(_t,Me,U)=>{U.d(Me,{$s:()=>Zn,BH:()=>Pe,DV:()=>nr,G6:()=>es,GJ:()=>An,L:()=>we,LL:()=>Ve,Pz:()=>be,Sg:()=>He,UG:()=>Je,UI:()=>Vn,US:()=>le,Wl:()=>wt,Yr:()=>si,ZB:()=>Q,ZR:()=>xe,aH:()=>Se,b$:()=>Wt,cI:()=>cn,dS:()=>mi,eu:()=>fe,g5:()=>O,gK:()=>Zr,gQ:()=>dn,h$:()=>ye,hl:()=>ce,hu:()=>$,jU:()=>bt,m9:()=>Yr,ne:()=>qt,p$:()=>z,pd:()=>qr,r3:()=>Nn,ru:()=>nt,tV:()=>W,uI:()=>ae,ug:()=>Yt,vZ:()=>dt,w1:()=>vs,w9:()=>tr,xO:()=>zn,xb:()=>gi,z$:()=>Fe,zI:()=>me,zd:()=>Fr});const h={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},$=function(G,j){if(!G)throw O(j)},O=function(G){return new Error("Firebase Database ("+h.SDK_VERSION+") INTERNAL ASSERT FAILED: "+G)},re=function(G){const j=[];let k=0;for(let L=0;L<G.length;L++){let N=G.charCodeAt(L);N<128?j[k++]=N:N<2048?(j[k++]=N>>6|192,j[k++]=63&N|128):55296==(64512&N)&&L+1<G.length&&56320==(64512&G.charCodeAt(L+1))?(N=65536+((1023&N)<<10)+(1023&G.charCodeAt(++L)),j[k++]=N>>18|240,j[k++]=N>>12&63|128,j[k++]=N>>6&63|128,j[k++]=63&N|128):(j[k++]=N>>12|224,j[k++]=N>>6&63|128,j[k++]=63&N|128)}return j},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,j){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const k=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,L=[];for(let N=0;N<G.length;N+=3){const Z=G[N],De=N+1<G.length,Xe=De?G[N+1]:0,St=N+2<G.length,Ct=St?G[N+2]:0;let Tn=(15&Xe)<<2|Ct>>6,Ut=63&Ct;St||(Ut=64,De||(Tn=64)),L.push(k[Z>>2],k[(3&Z)<<4|Xe>>4],k[Tn],k[Ut])}return L.join("")},encodeString(G,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(G):this.encodeByteArray(re(G),j)},decodeString(G,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(G):function(G){const j=[];let k=0,L=0;for(;k<G.length;){const N=G[k++];if(N<128)j[L++]=String.fromCharCode(N);else if(N>191&&N<224){const Z=G[k++];j[L++]=String.fromCharCode((31&N)<<6|63&Z)}else if(N>239&&N<365){const St=((7&N)<<18|(63&G[k++])<<12|(63&G[k++])<<6|63&G[k++])-65536;j[L++]=String.fromCharCode(55296+(St>>10)),j[L++]=String.fromCharCode(56320+(1023&St))}else{const Z=G[k++],De=G[k++];j[L++]=String.fromCharCode((15&N)<<12|(63&Z)<<6|63&De)}}return j.join("")}(this.decodeStringToByteArray(G,j))},decodeStringToByteArray(G,j){this.init_();const k=j?this.charToByteMapWebSafe_:this.charToByteMap_,L=[];for(let N=0;N<G.length;){const Z=k[G.charAt(N++)],Xe=N<G.length?k[G.charAt(N)]:0;++N;const Ct=N<G.length?k[G.charAt(N)]:64;++N;const xt=N<G.length?k[G.charAt(N)]:64;if(++N,null==Z||null==Xe||null==Ct||null==xt)throw new Ce;L.push(Z<<2|Xe>>4),64!==Ct&&(L.push(Xe<<4&240|Ct>>2),64!==xt&&L.push(Ct<<6&192|xt))}return L},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}};class Ce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ye=function(G){const j=re(G);return le.encodeByteArray(j,!0)},we=function(G){return ye(G).replace(/\./g,"")},W=function(G){try{return le.decodeString(G,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function z(G){return Q(void 0,G)}function Q(G,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return j}for(const k in j)!j.hasOwnProperty(k)||!$e(k)||(G[k]=Q(G[k],j[k]));return G}function $e(G){return"__proto__"!==G}const Ne=()=>{try{return function Ae(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const G=process.env.__FIREBASE_DEFAULTS__;return G?JSON.parse(G):void 0})()||(()=>{if(typeof document>"u")return;let G;try{G=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=G&&W(G[1]);return j&&JSON.parse(j)})()}catch(G){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${G}`)}},Se=()=>{var G;return null===(G=Ne())||void 0===G?void 0:G.config},be=G=>{var j;return null===(j=Ne())||void 0===j?void 0:j[`_${G}`]};class Pe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,k)=>{this.resolve=j,this.reject=k})}wrapCallback(j){return(k,L)=>{k?this.reject(k):this.resolve(L),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(k):j(k,L))}}}function He(G,j){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const L=j||"demo-project",N=G.iat||0,Z=G.sub||G.user_id;if(!Z)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const De=Object.assign({iss:`https://securetoken.google.com/${L}`,aud:L,iat:N,exp:N+3600,auth_time:N,sub:Z,user_id:Z,firebase:{sign_in_provider:"custom",identities:{}}},G);return[we(JSON.stringify({alg:"none",type:"JWT"})),we(JSON.stringify(De)),""].join(".")}function Fe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ae(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function Je(){var G;const j=null===(G=Ne())||void 0===G?void 0:G.forceEnvironment;if("node"===j)return!0;if("browser"===j)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function bt(){return"object"==typeof self&&self.self===self}function nt(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function Wt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function vs(){const G=Fe();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function si(){return!0===h.NODE_CLIENT||!0===h.NODE_ADMIN}function es(){return!Je()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ce(){try{return"object"==typeof indexedDB}catch{return!1}}function fe(){return new Promise((G,j)=>{try{let k=!0;const L="validate-browser-context-for-indexeddb-analytics-module",N=self.indexedDB.open(L);N.onsuccess=()=>{N.result.close(),k||self.indexedDB.deleteDatabase(L),G(!0)},N.onupgradeneeded=()=>{k=!1},N.onerror=()=>{var Z;j((null===(Z=N.error)||void 0===Z?void 0:Z.message)||"")}}catch(k){j(k)}})}function me(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class xe extends Error{constructor(j,k,L){super(k),this.code=j,this.customData=L,this.name="FirebaseError",Object.setPrototypeOf(this,xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ve.prototype.create)}}class Ve{constructor(j,k,L){this.service=j,this.serviceName=k,this.errors=L}create(j,...k){const L=k[0]||{},N=`${this.service}/${j}`,Z=this.errors[j],De=Z?function it(G,j){return G.replace(st,(k,L)=>{const N=j[L];return null!=N?String(N):`<${L}?>`})}(Z,L):"Error";return new xe(N,`${this.serviceName}: ${De} (${N}).`,L)}}const st=/\{\$([^}]+)}/g;function cn(G){return JSON.parse(G)}function wt(G){return JSON.stringify(G)}const tn=function(G){let j={},k={},L={},N="";try{const Z=G.split(".");j=cn(W(Z[0])||""),k=cn(W(Z[1])||""),N=Z[2],L=k.d||{},delete k.d}catch{}return{header:j,claims:k,data:L,signature:N}},tr=function(G){const k=tn(G).claims;return!!k&&"object"==typeof k&&k.hasOwnProperty("iat")},An=function(G){const j=tn(G).claims;return"object"==typeof j&&!0===j.admin};function Nn(G,j){return Object.prototype.hasOwnProperty.call(G,j)}function nr(G,j){if(Object.prototype.hasOwnProperty.call(G,j))return G[j]}function gi(G){for(const j in G)if(Object.prototype.hasOwnProperty.call(G,j))return!1;return!0}function Vn(G,j,k){const L={};for(const N in G)Object.prototype.hasOwnProperty.call(G,N)&&(L[N]=j.call(k,G[N],N,G));return L}function dt(G,j){if(G===j)return!0;const k=Object.keys(G),L=Object.keys(j);for(const N of k){if(!L.includes(N))return!1;const Z=G[N],De=j[N];if(Un(Z)&&Un(De)){if(!dt(Z,De))return!1}else if(Z!==De)return!1}for(const N of L)if(!k.includes(N))return!1;return!0}function Un(G){return null!==G&&"object"==typeof G}function zn(G){const j=[];for(const[k,L]of Object.entries(G))Array.isArray(L)?L.forEach(N=>{j.push(encodeURIComponent(k)+"="+encodeURIComponent(N))}):j.push(encodeURIComponent(k)+"="+encodeURIComponent(L));return j.length?"&"+j.join("&"):""}function Fr(G){const j={};return G.replace(/^\?/,"").split("&").forEach(L=>{if(L){const[N,Z]=L.split("=");j[decodeURIComponent(N)]=decodeURIComponent(Z)}}),j}function qr(G){const j=G.indexOf("?");if(!j)return"";const k=G.indexOf("#",j);return G.substring(j,k>0?k:void 0)}class dn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let j=1;j<this.blockSize;++j)this.pad_[j]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(j,k){k||(k=0);const L=this.W_;if("string"==typeof j)for(let xt=0;xt<16;xt++)L[xt]=j.charCodeAt(k)<<24|j.charCodeAt(k+1)<<16|j.charCodeAt(k+2)<<8|j.charCodeAt(k+3),k+=4;else for(let xt=0;xt<16;xt++)L[xt]=j[k]<<24|j[k+1]<<16|j[k+2]<<8|j[k+3],k+=4;for(let xt=16;xt<80;xt++){const Tn=L[xt-3]^L[xt-8]^L[xt-14]^L[xt-16];L[xt]=4294967295&(Tn<<1|Tn>>>31)}let Ct,Zt,N=this.chain_[0],Z=this.chain_[1],De=this.chain_[2],Xe=this.chain_[3],St=this.chain_[4];for(let xt=0;xt<80;xt++){xt<40?xt<20?(Ct=Xe^Z&(De^Xe),Zt=1518500249):(Ct=Z^De^Xe,Zt=1859775393):xt<60?(Ct=Z&De|Xe&(Z|De),Zt=2400959708):(Ct=Z^De^Xe,Zt=3395469782);const Tn=(N<<5|N>>>27)+Ct+St+Zt+L[xt]&4294967295;St=Xe,Xe=De,De=4294967295&(Z<<30|Z>>>2),Z=N,N=Tn}this.chain_[0]=this.chain_[0]+N&4294967295,this.chain_[1]=this.chain_[1]+Z&4294967295,this.chain_[2]=this.chain_[2]+De&4294967295,this.chain_[3]=this.chain_[3]+Xe&4294967295,this.chain_[4]=this.chain_[4]+St&4294967295}update(j,k){if(null==j)return;void 0===k&&(k=j.length);const L=k-this.blockSize;let N=0;const Z=this.buf_;let De=this.inbuf_;for(;N<k;){if(0===De)for(;N<=L;)this.compress_(j,N),N+=this.blockSize;if("string"==typeof j){for(;N<k;)if(Z[De]=j.charCodeAt(N),++De,++N,De===this.blockSize){this.compress_(Z),De=0;break}}else for(;N<k;)if(Z[De]=j[N],++De,++N,De===this.blockSize){this.compress_(Z),De=0;break}}this.inbuf_=De,this.total_+=k}digest(){const j=[];let k=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let N=this.blockSize-1;N>=56;N--)this.buf_[N]=255&k,k/=256;this.compress_(this.buf_);let L=0;for(let N=0;N<5;N++)for(let Z=24;Z>=0;Z-=8)j[L]=this.chain_[N]>>Z&255,++L;return j}}function qt(G,j){const k=new ut(G,j);return k.subscribe.bind(k)}class ut{constructor(j,k){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=k,this.task.then(()=>{j(this)}).catch(L=>{this.error(L)})}next(j){this.forEachObserver(k=>{k.next(j)})}error(j){this.forEachObserver(k=>{k.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,k,L){let N;if(void 0===j&&void 0===k&&void 0===L)throw new Error("Missing Observer.");N=function Wn(G,j){if("object"!=typeof G||null===G)return!1;for(const k of j)if(k in G&&"function"==typeof G[k])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:k,complete:L},void 0===N.next&&(N.next=Mr),void 0===N.error&&(N.error=Mr),void 0===N.complete&&(N.complete=Mr);const Z=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?N.error(this.finalError):N.complete()}catch{}}),this.observers.push(N),Z}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let k=0;k<this.observers.length;k++)this.sendOne(k,j)}sendOne(j,k){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{k(this.observers[j])}catch(L){typeof console<"u"&&console.error&&console.error(L)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mr(){}function Zr(G,j){return`${G} failed: ${j} argument `}const mi=function(G){const j=[];let k=0;for(let L=0;L<G.length;L++){let N=G.charCodeAt(L);if(N>=55296&&N<=56319){const Z=N-55296;L++,$(L<G.length,"Surrogate pair missing trail surrogate."),N=65536+(Z<<10)+(G.charCodeAt(L)-56320)}N<128?j[k++]=N:N<2048?(j[k++]=N>>6|192,j[k++]=63&N|128):N<65536?(j[k++]=N>>12|224,j[k++]=N>>6&63|128,j[k++]=63&N|128):(j[k++]=N>>18|240,j[k++]=N>>12&63|128,j[k++]=N>>6&63|128,j[k++]=63&N|128)}return j},Yt=function(G){let j=0;for(let k=0;k<G.length;k++){const L=G.charCodeAt(k);L<128?j++:L<2048?j+=2:L>=55296&&L<=56319?(j+=4,k++):j+=3}return j},Vt=1e3,qn=2,Pn=144e5,Rr=.5;function Zn(G,j=Vt,k=qn){const L=j*Math.pow(k,G),N=Math.round(Rr*L*(Math.random()-.5)*2);return Math.min(Pn,L+N)}function Yr(G){return G&&G._delegate?G._delegate:G}},1236:(_t,Me,U)=>{var h=U(4650);let $=null;function O(){return $}class ue{}const le=new h.OlP("DocumentToken");let Ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ye(){return(0,h.LFG)(W)}()},providedIn:"platform"}),n})();const we=new h.OlP("Location Initialized");let W=(()=>{class n extends Ce{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){z()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){z()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Q(){return new W((0,h.LFG)(le))}()},providedIn:"platform"}),n})();function z(){return!!window.history.pushState}function $e(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ae(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function qe(n){return n&&"?"!==n[0]?"?"+n:n}let rt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Ne)},providedIn:"root"}),n})();const _e=new h.OlP("appBaseHref");let Ne=(()=>{class n extends rt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return $e(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+qe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+qe(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+qe(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ce),h.LFG(_e,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ke=(()=>{class n extends rt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=$e(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+qe(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+qe(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ce),h.LFG(_e,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),je=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function He(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Ae(Pe(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+qe(r))}normalize(t){return n.stripTrailingSlash(function be(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Pe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=qe,n.joinWithSlash=$e,n.stripTrailingSlash=Ae,n.\u0275fac=function(t){return new(t||n)(h.LFG(rt))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Se(){return new je((0,h.LFG)(rt))}()},providedIn:"root"}),n})();function Pe(n){return n.replace(/\/index.html$/,"")}var bt=(()=>((bt=bt||{})[bt.Format=0]="Format",bt[bt.Standalone=1]="Standalone",bt))(),nt=(()=>((nt=nt||{})[nt.Narrow=0]="Narrow",nt[nt.Abbreviated=1]="Abbreviated",nt[nt.Wide=2]="Wide",nt[nt.Short=3]="Short",nt))(),Wt=(()=>((Wt=Wt||{})[Wt.Short=0]="Short",Wt[Wt.Medium=1]="Medium",Wt[Wt.Long=2]="Long",Wt[Wt.Full=3]="Full",Wt))(),ot=(()=>((ot=ot||{})[ot.Decimal=0]="Decimal",ot[ot.Group=1]="Group",ot[ot.List=2]="List",ot[ot.PercentSign=3]="PercentSign",ot[ot.PlusSign=4]="PlusSign",ot[ot.MinusSign=5]="MinusSign",ot[ot.Exponential=6]="Exponential",ot[ot.SuperscriptingExponent=7]="SuperscriptingExponent",ot[ot.PerMille=8]="PerMille",ot[ot.Infinity=9]="Infinity",ot[ot.NaN=10]="NaN",ot[ot.TimeSeparator=11]="TimeSeparator",ot[ot.CurrencyDecimal=12]="CurrencyDecimal",ot[ot.CurrencyGroup=13]="CurrencyGroup",ot))();function xe(n,e){return Vn((0,h.cg1)(n)[h.wAp.DateFormat],e)}function Ve(n,e){return Vn((0,h.cg1)(n)[h.wAp.TimeFormat],e)}function it(n,e){return Vn((0,h.cg1)(n)[h.wAp.DateTimeFormat],e)}function st(n,e){const t=(0,h.cg1)(n),r=t[h.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===ot.CurrencyDecimal)return t[h.wAp.NumberSymbols][ot.Decimal];if(e===ot.CurrencyGroup)return t[h.wAp.NumberSymbols][ot.Group]}return r}function An(n){if(!n[h.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[h.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Vn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function dt(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Fr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,qr={},dn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var qt=(()=>((qt=qt||{})[qt.Short=0]="Short",qt[qt.ShortGMT=1]="ShortGMT",qt[qt.Long=2]="Long",qt[qt.Extended=3]="Extended",qt))(),ut=(()=>((ut=ut||{})[ut.FullYear=0]="FullYear",ut[ut.Month=1]="Month",ut[ut.Date=2]="Date",ut[ut.Hours=3]="Hours",ut[ut.Minutes=4]="Minutes",ut[ut.Seconds=5]="Seconds",ut[ut.FractionalSeconds=6]="FractionalSeconds",ut[ut.Day=7]="Day",ut))(),kt=(()=>((kt=kt||{})[kt.DayPeriods=0]="DayPeriods",kt[kt.Days=1]="Days",kt[kt.Months=2]="Months",kt[kt.Eras=3]="Eras",kt))();function Wn(n,e,t,r){let i=function N(n){if(De(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,a=1,l=1]=n.split("-").map(f=>+f);return Mr(i,a-1,l)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Fr))return function Z(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,a=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const l=Number(n[4]||0)-t,f=Number(n[5]||0)-r,y=Number(n[6]||0),w=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return a.call(e,l,f,y,w),e}(r)}const e=new Date(n);if(!De(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Bn(t,e)||e;let f,l=[];for(;e;){if(f=dn.exec(e),!f){l.push(e);break}{l=l.concat(f.slice(1));const T=l.pop();if(!T)break;e=T}}let y=i.getTimezoneOffset();r&&(y=j(r,y),i=function L(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function k(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(j(e,i)-i))}(i,r,!0));let w="";return l.forEach(T=>{const x=function G(n){if(Yr[n])return Yr[n];let e;switch(n){case"G":case"GG":case"GGG":e=Yt(kt.Eras,nt.Abbreviated);break;case"GGGG":e=Yt(kt.Eras,nt.Wide);break;case"GGGGG":e=Yt(kt.Eras,nt.Narrow);break;case"y":e=Kt(ut.FullYear,1,0,!1,!0);break;case"yy":e=Kt(ut.FullYear,2,0,!0,!0);break;case"yyy":e=Kt(ut.FullYear,3,0,!1,!0);break;case"yyyy":e=Kt(ut.FullYear,4,0,!1,!0);break;case"Y":e=Lr(1);break;case"YY":e=Lr(2,!0);break;case"YYY":e=Lr(3);break;case"YYYY":e=Lr(4);break;case"M":case"L":e=Kt(ut.Month,1,1);break;case"MM":case"LL":e=Kt(ut.Month,2,1);break;case"MMM":e=Yt(kt.Months,nt.Abbreviated);break;case"MMMM":e=Yt(kt.Months,nt.Wide);break;case"MMMMM":e=Yt(kt.Months,nt.Narrow);break;case"LLL":e=Yt(kt.Months,nt.Abbreviated,bt.Standalone);break;case"LLLL":e=Yt(kt.Months,nt.Wide,bt.Standalone);break;case"LLLLL":e=Yt(kt.Months,nt.Narrow,bt.Standalone);break;case"w":e=Kr(1);break;case"ww":e=Kr(2);break;case"W":e=Kr(1,!0);break;case"d":e=Kt(ut.Date,1);break;case"dd":e=Kt(ut.Date,2);break;case"c":case"cc":e=Kt(ut.Day,1);break;case"ccc":e=Yt(kt.Days,nt.Abbreviated,bt.Standalone);break;case"cccc":e=Yt(kt.Days,nt.Wide,bt.Standalone);break;case"ccccc":e=Yt(kt.Days,nt.Narrow,bt.Standalone);break;case"cccccc":e=Yt(kt.Days,nt.Short,bt.Standalone);break;case"E":case"EE":case"EEE":e=Yt(kt.Days,nt.Abbreviated);break;case"EEEE":e=Yt(kt.Days,nt.Wide);break;case"EEEEE":e=Yt(kt.Days,nt.Narrow);break;case"EEEEEE":e=Yt(kt.Days,nt.Short);break;case"a":case"aa":case"aaa":e=Yt(kt.DayPeriods,nt.Abbreviated);break;case"aaaa":e=Yt(kt.DayPeriods,nt.Wide);break;case"aaaaa":e=Yt(kt.DayPeriods,nt.Narrow);break;case"b":case"bb":case"bbb":e=Yt(kt.DayPeriods,nt.Abbreviated,bt.Standalone,!0);break;case"bbbb":e=Yt(kt.DayPeriods,nt.Wide,bt.Standalone,!0);break;case"bbbbb":e=Yt(kt.DayPeriods,nt.Narrow,bt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Yt(kt.DayPeriods,nt.Abbreviated,bt.Format,!0);break;case"BBBB":e=Yt(kt.DayPeriods,nt.Wide,bt.Format,!0);break;case"BBBBB":e=Yt(kt.DayPeriods,nt.Narrow,bt.Format,!0);break;case"h":e=Kt(ut.Hours,1,-12);break;case"hh":e=Kt(ut.Hours,2,-12);break;case"H":e=Kt(ut.Hours,1);break;case"HH":e=Kt(ut.Hours,2);break;case"m":e=Kt(ut.Minutes,1);break;case"mm":e=Kt(ut.Minutes,2);break;case"s":e=Kt(ut.Seconds,1);break;case"ss":e=Kt(ut.Seconds,2);break;case"S":e=Kt(ut.FractionalSeconds,1);break;case"SS":e=Kt(ut.FractionalSeconds,2);break;case"SSS":e=Kt(ut.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Vt(qt.Short);break;case"ZZZZZ":e=Vt(qt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Vt(qt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Vt(qt.Long);break;default:return null}return Yr[n]=e,e}(T);w+=x?x(i,t,y):"''"===T?"'":T.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),w}function Mr(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Bn(n,e){const t=function yr(n){return(0,h.cg1)(n)[h.wAp.LocaleId]}(n);if(qr[t]=qr[t]||{},qr[t][e])return qr[t][e];let r="";switch(e){case"shortDate":r=xe(n,Wt.Short);break;case"mediumDate":r=xe(n,Wt.Medium);break;case"longDate":r=xe(n,Wt.Long);break;case"fullDate":r=xe(n,Wt.Full);break;case"shortTime":r=Ve(n,Wt.Short);break;case"mediumTime":r=Ve(n,Wt.Medium);break;case"longTime":r=Ve(n,Wt.Long);break;case"fullTime":r=Ve(n,Wt.Full);break;case"short":const i=Bn(n,"shortTime"),a=Bn(n,"shortDate");r=Zr(it(n,Wt.Short),[i,a]);break;case"medium":const l=Bn(n,"mediumTime"),f=Bn(n,"mediumDate");r=Zr(it(n,Wt.Medium),[l,f]);break;case"long":const y=Bn(n,"longTime"),w=Bn(n,"longDate");r=Zr(it(n,Wt.Long),[y,w]);break;case"full":const T=Bn(n,"fullTime"),x=Bn(n,"fullDate");r=Zr(it(n,Wt.Full),[T,x])}return r&&(qr[t][e]=r),r}function Zr(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function jn(n,e,t="-",r,i){let a="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,a=t));let l=String(n);for(;l.length<e;)l="0"+l;return r&&(l=l.slice(l.length-e)),a+l}function Kt(n,e,t=0,r=!1,i=!1){return function(a,l){let f=function mi(n,e){switch(n){case ut.FullYear:return e.getFullYear();case ut.Month:return e.getMonth();case ut.Date:return e.getDate();case ut.Hours:return e.getHours();case ut.Minutes:return e.getMinutes();case ut.Seconds:return e.getSeconds();case ut.FractionalSeconds:return e.getMilliseconds();case ut.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,a);if((t>0||f>-t)&&(f+=t),n===ut.Hours)0===f&&-12===t&&(f=12);else if(n===ut.FractionalSeconds)return function _r(n,e){return jn(n,3).substring(0,e)}(f,e);const y=st(l,ot.MinusSign);return jn(f,e,y,r,i)}}function Yt(n,e,t=bt.Format,r=!1){return function(i,a){return function oi(n,e,t,r,i,a){switch(t){case kt.Months:return function ce(n,e,t){const r=(0,h.cg1)(n),a=Vn([r[h.wAp.MonthsFormat],r[h.wAp.MonthsStandalone]],e);return Vn(a,t)}(e,i,r)[n.getMonth()];case kt.Days:return function es(n,e,t){const r=(0,h.cg1)(n),a=Vn([r[h.wAp.DaysFormat],r[h.wAp.DaysStandalone]],e);return Vn(a,t)}(e,i,r)[n.getDay()];case kt.DayPeriods:const l=n.getHours(),f=n.getMinutes();if(a){const w=function Nn(n){const e=(0,h.cg1)(n);return An(e),(e[h.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?dt(r):[dt(r[0]),dt(r[1])])}(e),T=function nr(n,e,t){const r=(0,h.cg1)(n);An(r);const a=Vn([r[h.wAp.ExtraData][0],r[h.wAp.ExtraData][1]],e)||[];return Vn(a,t)||[]}(e,i,r),x=w.findIndex(F=>{if(Array.isArray(F)){const[H,ee]=F,ve=l>=H.hours&&f>=H.minutes,Te=l<ee.hours||l===ee.hours&&f<ee.minutes;if(H.hours<ee.hours){if(ve&&Te)return!0}else if(ve||Te)return!0}else if(F.hours===l&&F.minutes===f)return!0;return!1});if(-1!==x)return T[x]}return function si(n,e,t){const r=(0,h.cg1)(n),a=Vn([r[h.wAp.DayPeriodsFormat],r[h.wAp.DayPeriodsStandalone]],e);return Vn(a,t)}(e,i,r)[l<12?0:1];case kt.Eras:return function fe(n,e){return Vn((0,h.cg1)(n)[h.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,a,n,e,t,r)}}function Vt(n){return function(e,t,r){const i=-1*r,a=st(t,ot.MinusSign),l=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case qt.Short:return(i>=0?"+":"")+jn(l,2,a)+jn(Math.abs(i%60),2,a);case qt.ShortGMT:return"GMT"+(i>=0?"+":"")+jn(l,1,a);case qt.Long:return"GMT"+(i>=0?"+":"")+jn(l,2,a)+":"+jn(Math.abs(i%60),2,a);case qt.Extended:return 0===r?"Z":(i>=0?"+":"")+jn(l,2,a)+":"+jn(Math.abs(i%60),2,a);default:throw new Error(`Unknown zone width "${n}"`)}}}const qn=0,Pn=4;function Zn(n){return Mr(n.getFullYear(),n.getMonth(),n.getDate()+(Pn-n.getDay()))}function Kr(n,e=!1){return function(t,r){let i;if(e){const a=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,l=t.getDate();i=1+Math.floor((l+a)/7)}else{const a=Zn(t),l=function Rr(n){const e=Mr(n,qn,1).getDay();return Mr(n,0,1+(e<=Pn?Pn:Pn+7)-e)}(a.getFullYear()),f=a.getTime()-l.getTime();i=1+Math.round(f/6048e5)}return jn(i,n,st(r,ot.MinusSign))}}function Lr(n,e=!1){return function(t,r){return jn(Zn(t).getFullYear(),n,st(r,ot.MinusSign),e)}}const Yr={};function j(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function De(n){return n instanceof Date&&!isNaN(n.valueOf())}const Er=/\s+/,Ke=[];let jt=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this.initialClasses=Ke,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Er):Ke}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Er):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Er).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Ir{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Es=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ir(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,l),$n(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{$n(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function $n(n,e){n.context.$implicit=e.item}let Is=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new $t,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){xu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){xu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class $t{constructor(){this.$implicit=null,this.ngIf=null}}function xu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}const Mu=new h.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),Fa=new h.OlP("DATE_PIPE_DEFAULT_OPTIONS");let Br=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,a){if(null==t||""===t||t!=t)return null;try{return Wn(t,r??this.defaultOptions?.dateFormat??"mediumDate",a||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(l){throw function Ai(n,e){return new h.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.soG,16),h.Y36(Mu,24),h.Y36(Fa,24))},n.\u0275pipe=h.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),Wo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const qo="server";function Zo(n){return n===qo}let Ru=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new _f((0,h.LFG)(le),window)}),n})();class _f{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ll(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Hs(this.window.history)||Hs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Hs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Md extends ue{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ju extends Md{static makeCurrent(){!function re(n){$||($=n)}(new ju)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ga(){return ta=ta||document.querySelector("base"),ta?ta.getAttribute("href"):null}();return null==t?null:function jg(n){Ts=Ts||document.createElement("a"),Ts.setAttribute("href",n);const e=Ts.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ta=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function co(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Ts,ta=null;const If=new h.OlP("TRANSITION_ID"),Rd=[{provide:h.ip1,useFactory:function $u(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[If,le,h.zs3],multi:!0}];let ql=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const za=new h.OlP("EventManagerPlugins");let Hu=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(za),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class na{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Nd=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let a=i.get(t)??0;return a+=r,a>0?i.set(t,a):i.delete(t),a}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),qs=(()=>{class n extends Nd{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(a=>a.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const a=this.styleRef.get(r);a?a.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Eo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ra=/%COMP%/g,Za=new h.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Gu(n,e){return e.flat(100).map(t=>t.replace(ra,n))}function Yl(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ui=(()=>{class n{constructor(t,r,i,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=a,this.rendererByCompId=new Map,this.defaultRenderer=new Pd(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof zu?i.applyToHost(t):i instanceof Zs&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const l=this.eventManager,f=this.sharedStylesHost,y=this.removeStylesOnCompDestory;switch(r.encapsulation){case h.ifc.Emulated:a=new zu(l,f,r,this.appId,y);break;case h.ifc.ShadowDom:return new Qn(l,f,t,r);default:a=new Zs(l,f,r,y)}a.onDestroy=()=>i.delete(r.id),i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Hu),h.LFG(qs),h.LFG(h.AFp),h.LFG(Za))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Pd{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Eo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Od(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Od(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Eo[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Eo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Yl(r)):this.eventManager.addEventListener(e,t,Yl(r))}}function Od(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Qn extends Pd{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Gu(i.id,i.styles);for(const l of a){const f=document.createElement("style");f.textContent=l,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Zs extends Pd{constructor(e,t,r,i,a=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Gu(a,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class zu extends Zs{constructor(e,t,r,i,a){const l=i+"-"+r.id;super(e,t,r,a,l),this.contentAttr=function Cf(n){return"_ngcontent-%COMP%".replace(ra,n)}(l),this.hostAttr=function Kl(n){return"_nghost-%COMP%".replace(ra,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let kd=(()=>{class n extends na{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Ka=["alt","control","meta","shift"],Fd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ur=(()=>{class n extends na{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),l="code."),Ka.forEach(w=>{const T=r.indexOf(w);T>-1&&(r.splice(T,1),l+=w+".")}),l+=a,0!=r.length||0===a.length)return null;const y={};return y.domEventName=i,y.fullKey=l,y}static matchEventFullKeyCode(t,r){let i=Fd[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ka.forEach(l=>{l!==i&&(0,Wu[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const bf=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function oa(){ju.makeCurrent()},multi:!0},{provide:le,useFactory:function Xl(){return(0,h.RDi)(document),document},deps:[]}]),Co=new h.OlP(""),Ya=[{provide:h.rWj,useClass:class Ss{addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const f=function(y){l=l||y,a--,0==a&&r(l)};i.forEach(function(y){y.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],Do=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Jl(){return new h.qLn},deps:[]},{provide:za,useClass:kd,multi:!0,deps:[le,h.R0b,h.Lbi]},{provide:za,useClass:ur,multi:!0,deps:[le]},{provide:ui,useClass:ui,deps:[Hu,qs,h.AFp,Za]},{provide:h.FYo,useExisting:ui},{provide:Nd,useExisting:qs},{provide:qs,useClass:qs,deps:[le]},{provide:Hu,useClass:Hu,deps:[za,h.R0b]},{provide:class vf{},useClass:ql,deps:[]},[]];let aa=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:If,useExisting:h.AFp},Rd]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Co,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...Do,...Ya],imports:[Wo,h.hGG]}),n})(),Tf=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function bo(){return new Tf((0,h.LFG)(le))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var gn=U(8996),$i=U(7669);function at(...n){const e=(0,$i.yG)(n);return(0,gn.D)(n,e)}var Hi=U(7579);class rr extends Hi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Ja=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var li=U(9751);const{isArray:uc}=Array,{getPrototypeOf:$d,prototype:Ri,keys:Js}=Object;function lc(n){if(1===n.length){const e=n[0];if(uc(e))return{args:e,keys:null};if(function So(n){return n&&"object"==typeof n&&$d(n)===Ri}(e)){const t=Js(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var la=U(4671),gt=U(4004);const{isArray:cc}=Array;function Ni(n){return(0,gt.U)(e=>function Hd(n,e){return cc(e)?n(...e):n(e)}(n,e))}function Ju(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var $r=U(5403),Xa=U(9672);function dc(...n){const e=(0,$i.yG)(n),t=(0,$i.jO)(n),{args:r,keys:i}=lc(n);if(0===r.length)return(0,gn.D)([],e);const a=new li.y(function Ao(n,e,t=la.y){return r=>{eu(e,()=>{const{length:i}=n,a=new Array(i);let l=i,f=i;for(let y=0;y<i;y++)eu(e,()=>{const w=(0,gn.D)(n[y],e);let T=!1;w.subscribe((0,$r.x)(r,x=>{a[y]=x,T||(T=!0,f--),f||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>Ju(i,l):la.y));return t?a.pipe(Ni(t)):a}function eu(n,e,t){n?(0,Xa.f)(t,n,e):e()}var tu=U(8189);function Xu(...n){return function xf(){return(0,tu.J)(1)}()((0,gn.D)(n,(0,$i.yG)(n)))}var nu=U(8421);function Gd(n){return new li.y(e=>{(0,nu.Xf)(n()).subscribe(e)})}var hc=U(9635),fc=U(576);function ru(n,e){const t=(0,fc.m)(n)?n:()=>n,r=i=>i.error(t());return new li.y(e?i=>e.schedule(r,0,i):r)}var _i=U(515),pc=U(727),Xr=U(4482);function iu(){return(0,Xr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,$r.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Mf extends li.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Xr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new pc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,$r.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=pc.w0.EMPTY)}return e}refCount(){return iu()(this)}}function Jn(n,e){return(0,Xr.e)((t,r)=>{let i=null,a=0,l=!1;const f=()=>l&&!i&&r.complete();t.subscribe((0,$r.x)(r,y=>{i?.unsubscribe();let w=0;const T=a++;(0,nu.Xf)(n(y,T)).subscribe(i=(0,$r.x)(r,x=>r.next(e?e(y,x,T,w++):x),()=>{i=null,f()}))},()=>{l=!0,f()}))})}function xo(n){return n<=0?()=>_i.E:(0,Xr.e)((e,t)=>{let r=0;e.subscribe((0,$r.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ca(...n){const e=(0,$i.yG)(n);return(0,Xr.e)((t,r)=>{(e?Xu(n,t,e):Xu(n,t)).subscribe(r)})}function Pi(n,e){return(0,Xr.e)((t,r)=>{let i=0;t.subscribe((0,$r.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Xn=U(5577);function su(n){return(0,Xr.e)((e,t)=>{let r=!1;e.subscribe((0,$r.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function el(n=da){return(0,Xr.e)((e,t)=>{let r=!1;e.subscribe((0,$r.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function da(){return new Ja}function Gi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Pi((i,a)=>n(i,a,r)):la.y,xo(1),t?su(e):el(()=>new Ja))}function Xs(n,e){return(0,fc.m)(e)?(0,Xn.z)(n,e,1):(0,Xn.z)(n,1)}var Dr=U(8505);function eo(n){return(0,Xr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,$r.x)(t,void 0,void 0,l=>{a=(0,nu.Xf)(n(l,eo(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function tl(n,e){return(0,Xr.e)(function n_(n,e,t,r,i){return(a,l)=>{let f=t,y=e,w=0;a.subscribe((0,$r.x)(l,T=>{const x=w++;y=f?n(y,T,x):(f=!0,T),r&&l.next(y)},i&&(()=>{f&&l.next(y),l.complete()})))}}(n,e,arguments.length>=2,!0))}function nl(n){return n<=0?()=>_i.E:(0,Xr.e)((e,t)=>{let r=[];e.subscribe((0,$r.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ha(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Pi((i,a)=>n(i,a,r)):la.y,nl(1),t?su(e):el(()=>new Ja))}function ou(n){return(0,Xr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Tt="primary",ci=Symbol("RouteTitle");class Rf{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Oi(n){return new Rf(n)}function Nf(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],f=n[a];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function zi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Wd(n[i],e[i]))return!1;return!0}function Wd(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function qd(n){return Array.prototype.concat.apply([],n)}function Zd(n){return n.length>0?n[n.length-1]:null}function D(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function S(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,gn.D)(Promise.resolve(n)):at(n)}const V=!1,q={exact:function ze(n,e,t){if(!br(n.segments,e.segments)||!kr(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ze(n.children[r],e.children[r],t))return!1;return!0},subset:Nt},J={exact:function We(n,e){return zi(n,e)},subset:function lt(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Wd(n[t],e[t]))},ignored:()=>!0};function se(n,e,t){return q[t.paths](n.root,e.root,t.matrixParams)&&J[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Nt(n,e,t){return Pt(n,e,e.segments,t)}function Pt(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!br(i,t)||e.hasChildren()||!kr(i,t,r))}if(n.segments.length===t.length){if(!br(n.segments,t)||!kr(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Nt(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(br(n.segments,i)&&kr(n.segments,i,r)&&n.children[Tt])&&Pt(n.children[Tt],e,a,r)}}function kr(n,e,t){return e.every((r,i)=>J[t](n[i].parameters,r.parameters))}class Dn{constructor(e=new Ht([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Oi(this.queryParams)),this._queryParamMap}toString(){return Kd.serialize(this)}}class Ht{constructor(e,t){this.segments=e,this.children=t,this.parent=null,D(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rl(this)}}class os{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Oi(this.parameters)),this._parameterMap}toString(){return $g(this)}}function br(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let us=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new Pf},providedIn:"root"}),n})();class Pf{parse(e){const t=new M(e);return new Dn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${il(e.root,!0)}`,r=function Hg(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${lu(t)}=${lu(i)}`).join("&"):`${lu(t)}=${lu(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Of(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Kd=new Pf;function rl(n){return n.segments.map(e=>$g(e)).join("/")}function il(n,e){if(!n.hasChildren())return rl(n);if(e){const t=n.children[Tt]?il(n.children[Tt],!1):"",r=[];return D(n.children,(i,a)=>{a!==Tt&&r.push(`${a}:${il(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function as(n,e){let t=[];return D(n.children,(r,i)=>{i===Tt&&(t=t.concat(e(r,i)))}),D(n.children,(r,i)=>{i!==Tt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Tt?[il(n.children[Tt],!1)]:[`${i}:${il(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Tt]?`${rl(n)}/${t[0]}`:`${rl(n)}/(${t.join("//")})`}}function uu(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function lu(n){return uu(n).replace(/%3B/gi,";")}function fa(n){return uu(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sl(n){return decodeURIComponent(n)}function kf(n){return sl(n.replace(/\+/g,"%20"))}function $g(n){return`${fa(n.path)}${function Ff(n){return Object.keys(n).map(e=>`;${fa(e)}=${fa(n[e])}`).join("")}(n.parameters)}`}const r_=/^[^\/()?;=#]+/;function Lf(n){const e=n.match(r_);return e?e[0]:""}const v=/^[^=?&#]+/,m=/^[^&#]+/;class M{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ht([],{}):new Ht([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Tt]=new Ht(e,t)),r}parseSegment(){const e=Lf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,V);return this.capture(e),new os(sl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Lf(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Lf(this.remaining);i&&(r=i,this.capture(r))}e[sl(t)]=sl(r)}parseQueryParam(e){const t=function p(n){const e=n.match(v);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function I(n){const e=n.match(m);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=kf(t),a=kf(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Lf(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new h.vHH(4010,V);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Tt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Tt]:new Ht([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,V)}}function P(n){return n.segments.length>0?new Ht([],{[Tt]:n}):n}function Y(n){const e={};for(const r of Object.keys(n.children)){const a=Y(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function de(n){if(1===n.numberOfChildren&&n.children[Tt]){const e=n.children[Tt];return new Ht(n.segments.concat(e.segments),e.children)}return n}(new Ht(n.segments,e))}function Be(n){return n instanceof Dn}const Ze=!1;function Ro(n,e,t,r,i){if(0===t.length)return As(e.root,e.root,e.root,r,i);const a=function yc(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Yd(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return D(a.outlets,(y,w)=>{f[w]="string"==typeof y?y.split("/"):y}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((f,y)=>{0==y&&"."===f||(0==y&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new Yd(t,e,r)}(t);return a.toRoot()?As(e.root,e.root,new Ht([],{}),r,i):function l(y){const w=function Jd(n,e,t,r){if(n.isAbsolute)return new ga(e.root,!0,0);if(-1===r)return new ga(t,t===e.root,0);return function ol(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new h.vHH(4005,Ze&&"Invalid number of '../'");i=r.segments.length}return new ga(r,!1,i-a)}(t,r+(pa(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,y),T=w.processChildren?ma(w.segmentGroup,w.index,a.commands):al(w.segmentGroup,w.index,a.commands);return As(e.root,w.segmentGroup,T,r,i)}(n.snapshot?._lastPathIndex)}function pa(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function mc(n){return"object"==typeof n&&null!=n&&n.outlets}function As(n,e,t,r,i){let l,a={};r&&D(r,(y,w)=>{a[w]=Array.isArray(y)?y.map(T=>`${T}`):`${y}`}),l=n===e?t:Vf(n,e,t);const f=P(Y(l));return new Dn(f,a,i)}function Vf(n,e,t){const r={};return D(n.children,(i,a)=>{r[a]=i===e?t:Vf(i,e,t)}),new Ht(n.segments,r)}class Yd{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&pa(r[0]))throw new h.vHH(4003,Ze&&"Root segment cannot have matrix parameters");const i=r.find(mc);if(i&&i!==Zd(r))throw new h.vHH(4004,Ze&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ga{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function al(n,e,t){if(n||(n=new Ht([],{})),0===n.segments.length&&n.hasChildren())return ma(n,e,t);const r=function i_(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],f=t[r];if(mc(f))break;const y=`${f}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&w&&"object"==typeof w&&void 0===w.outlets){if(!s_(y,w,l))return a;r+=2}else{if(!s_(y,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Ht(n.segments.slice(0,r.pathIndex),{});return a.children[Tt]=new Ht(n.segments.slice(r.pathIndex),n.children),ma(a,0,i)}return r.match&&0===i.length?new Ht(n.segments,{}):r.match&&!n.hasChildren()?Uf(n,e,t):r.match?ma(n,0,i):Uf(n,e,t)}function ma(n,e,t){if(0===t.length)return new Ht(n.segments,{});{const r=function Xd(n){return mc(n[0])?n[0].outlets:{[Tt]:n}}(t),i={};if(!r[Tt]&&n.children[Tt]&&1===n.numberOfChildren&&0===n.children[Tt].segments.length){const a=ma(n.children[Tt],e,t);return new Ht(n.segments,a.children)}return D(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=al(n.children[l],e,a))}),D(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Ht(n.segments,i)}}function Uf(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(mc(a)){const y=Bf(a.outlets);return new Ht(r,y)}if(0===i&&pa(t[0])){r.push(new os(n.segments[e].path,$0(t[0]))),i++;continue}const l=mc(a)?a.outlets[Tt]:`${a}`,f=i<t.length-1?t[i+1]:null;l&&f&&pa(f)?(r.push(new os(l,$0(f))),i+=2):(r.push(new os(l,{})),i++)}return new Ht(r,{})}function Bf(n){const e={};return D(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Uf(new Ht([],{}),0,t))}),e}function $0(n){const e={};return D(n,(t,r)=>e[r]=`${t}`),e}function s_(n,e,t){return n==t.path&&zi(e,t.parameters)}const jf="imperative";class ya{constructor(e,t){this.id=e,this.url=t}}class o_ extends ya{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ul extends ya{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class $f extends ya{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _c extends ya{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Hf extends ya{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class eh extends ya{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kb extends ya{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fb extends ya{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class mN extends ya{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lb extends ya{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class a_{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Vb{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class H0{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gg{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class u_{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class G0{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class l_{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Ub=(()=>{class n{createUrlTree(t,r,i,a,l,f){return Ro(t||r.root,i,a,l,f)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),jb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(e){return Ub.\u0275fac(e)},providedIn:"root"}),n})();class q0{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=c_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=c_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=_a(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return _a(e,this._root).map(t=>t.value)}}function c_(n,e){if(n===e.value)return e;for(const t of e.children){const r=c_(n,t);if(r)return r}return null}function _a(n,e){if(n===e.value)return[e];for(const t of e.children){const r=_a(n,t);if(r.length)return r.unshift(e),r}return[]}class xs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function th(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class $b extends q0{constructor(e,t){super(e),this.snapshot=t,d_(this,e)}toString(){return this.snapshot.toString()}}function Hb(n,e){const t=function yN(n,e){const l=new zg([],{},{},"",{},Tt,e,null,n.root,-1,{});return new K0("",new xs(l,[]))}(n,e),r=new rr([new os("",{})]),i=new rr({}),a=new rr({}),l=new rr({}),f=new rr(""),y=new vc(r,i,l,f,a,Tt,e,t.root);return y.snapshot=t.root,new $b(new xs(y,[]),t)}class vc{constructor(e,t,r,i,a,l,f,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.title=this.data?.pipe((0,gt.U)(w=>w[ci]))??at(void 0),this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,gt.U)(e=>Oi(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,gt.U)(e=>Oi(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Gb(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Z0(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class zg{get title(){return this.data?.[ci]}constructor(e,t,r,i,a,l,f,y,w,T,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.routeConfig=y,this._urlSegment=w,this._lastPathIndex=T,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Oi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Oi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class K0 extends q0{constructor(e,t){super(t),this.url=e,d_(this,t)}toString(){return Y0(this._root)}}function d_(n,e){e.value._routerState=n,e.children.forEach(t=>d_(n,t))}function Y0(n){const e=n.children.length>0?` { ${n.children.map(Y0).join(", ")} } `:"";return`${n.value}${e}`}function Gf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,zi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),zi(e.params,t.params)||n.params.next(t.params),function zd(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!zi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),zi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function No(n,e){const t=zi(n.params,e.params)&&function au(n,e){return br(n,e)&&n.every((t,r)=>zi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||No(n.parent,e.parent))}function nh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Q0(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return nh(n,r,i);return nh(n,r)})}(n,e,t);return new xs(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>nh(n,f)),l}}const r=function J0(n){return new vc(new rr(n.url),new rr(n.params),new rr(n.queryParams),new rr(n.fragment),new rr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>nh(n,a));return new xs(r,i)}}const X0="ngNavigationCancelingError";function zb(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Be(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Wb(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Wb(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[X0]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Wg(n){return qg(n)&&Be(n.url)}function qg(n){return n&&n[X0]}class _N{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Zg,this.attachRef=null}}let Zg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new _N,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Wf=!1;let h_=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Tt,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.parentContexts=(0,h.f3M)(Zg),this.location=(0,h.f3M)(h.s_b),this.changeDetector=(0,h.f3M)(h.sBO),this.environmentInjector=(0,h.f3M)(h.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,Wf);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,Wf);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,Wf);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,Wf);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,y=new qb(t,f,i.injector);if(r&&function Zb(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(l);this.activated=i.createComponent(w,i.length,y)}else this.activated=i.createComponent(l,{index:i.length,injector:y,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.TTD]}),n})();class qb{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===vc?this.route:e===Zg?this.childContexts:this.parent.get(e,t)}}let f_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[h_],encapsulation:2}),n})();function p_(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Kg(n){const e=n.children&&n.children.map(Kg),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Tt&&(t.component=f_),t}function to(n){return n.outlet||Tt}function nE(n,e){const t=n.filter(r=>to(r)===e);return t.push(...n.filter(r=>to(r)!==e)),t}function qf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class rE{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Gf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=th(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),D(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=th(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=th(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=th(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new G0(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Gg(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Gf(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),Gf(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=qf(i.snapshot),y=f?.get(h._Vd)??null;l.attachRef=null,l.route=i,l.resolver=y,l.injector=f,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Qb{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class y_{constructor(e,t){this.component=e,this.route=t}}function Zf(n,e,t){const r=n._root;return rh(r,e?e._root:null,t,[r.value])}function wc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function rh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=th(e);return n.children.forEach(l=>{(function iE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const y=function EN(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!br(n.url,e.url);case"pathParamsOrQueryParamsChange":return!br(n.url,e.url)||!zi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!No(n,e)||!zi(n.queryParams,e.queryParams);default:return!No(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new Qb(r)):(a.data=l.data,a._resolvedData=l._resolvedData),rh(n,e,a.component?f?f.children:null:t,r,i),y&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new y_(f.outlet.component,l))}else l&&Kf(e,f,i),i.canActivateChecks.push(new Qb(r)),rh(n,null,a.component?f?f.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),D(a,(l,f)=>Kf(l,t.getContext(f),i)),i}function Kf(n,e,t){const r=th(n),i=n.value;D(r,(a,l)=>{Kf(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new y_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function ih(n){return"function"==typeof n}function cu(n){return n instanceof Ja||"EmptyError"===n?.name}const Yg=Symbol("INITIAL_VALUE");function ll(){return Jn(n=>dc(n.map(e=>e.pipe(xo(1),ca(Yg)))).pipe((0,gt.U)(e=>{for(const t of e)if(!0!==t){if(t===Yg)return Yg;if(!1===t||t instanceof Dn)return t}return!0}),Pi(e=>e!==Yg),xo(1)))}function D_(n){return(0,hc.z)((0,Dr.b)(e=>{if(Be(e))throw zb(0,e)}),(0,gt.U)(e=>!0===e))}const b_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function uE(n,e,t,r,i){const a=T_(n,e,t);return a.matched?function sh(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?at(i.map(l=>{const f=wc(l,n);return S(function E_(n){return n&&ih(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(ll(),D_()):at(!0)}(r=p_(e,r),e,t).pipe((0,gt.U)(l=>!0===l?a:{...b_})):at(a)}function T_(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...b_}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Nf)(t,n,e);if(!i)return{...b_};const a={};D(i.posParams,(f,y)=>{a[y]=f.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function oh(n,e,t,r){if(t.length>0&&function iT(n,e,t){return t.some(r=>S_(n,e,r)&&to(r)!==Tt)}(n,t,r)){const a=new Ht(e,function lE(n,e,t,r){const i={};i[Tt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&to(a)!==Tt){const l=new Ht([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[to(a)]=l}return i}(n,e,r,new Ht(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function cE(n,e,t){return t.some(r=>S_(n,e,r))}(n,t,r)){const a=new Ht(n.segments,function rT(n,e,t,r,i){const a={};for(const l of r)if(S_(n,t,l)&&!i[to(l)]){const f=new Ht([],{});f._sourceSegment=n,f._segmentIndexShift=e.length,a[to(l)]=f}return{...i,...a}}(n,e,t,r,n.children));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const i=new Ht(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function S_(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function dE(n,e,t,r){return!!(to(n)===r||r!==Tt&&S_(e,t,n))&&("**"===n.path||T_(e,n,t).matched)}function ah(n,e,t){return 0===e.length&&!n.children[t]}const Xg=!1;class du{constructor(e){this.segmentGroup=e||null}}class uh{constructor(e){this.urlTree=e}}function Yf(n){return ru(new du(n))}function A_(n){return ru(new uh(n))}class hE{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=oh(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ht(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Tt).pipe((0,gt.U)(a=>this.createUrlTree(Y(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(eo(a=>{if(a instanceof uh)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof du?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Tt).pipe((0,gt.U)(i=>this.createUrlTree(Y(i),e.queryParams,e.fragment))).pipe(eo(i=>{throw i instanceof du?this.noMatchError(i):i}))}noMatchError(e){return new h.vHH(4002,Xg)}createUrlTree(e,t,r){const i=P(e);return new Dn(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,gt.U)(a=>new Ht([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,gn.D)(i).pipe(Xs(a=>{const l=r.children[a],f=nE(t,a);return this.expandSegmentGroup(e,f,l,a).pipe((0,gt.U)(y=>({segment:y,outlet:a})))}),tl((a,l)=>(a[l.outlet]=l.segment,a),{}),ha())}expandSegment(e,t,r,i,a,l){return(0,gn.D)(r).pipe(Xs(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,l).pipe(eo(w=>{if(w instanceof du)return at(null);throw w}))),Gi(f=>!!f),eo((f,y)=>{if(cu(f))return ah(t,i,a)?at(new Ht([],{})):Yf(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,l,f){return dE(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):Yf(t):Yf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?A_(a):this.lineralizeSegments(r,a).pipe((0,Xn.z)(l=>{const f=new Ht(l,{});return this.expandSegment(e,f,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:f,consumedSegments:y,remainingSegments:w,positionalParamSegments:T}=T_(t,i,a);if(!f)return Yf(t);const x=this.applyRedirectCommands(y,i.redirectTo,T);return i.redirectTo.startsWith("/")?A_(x):this.lineralizeSegments(i,x).pipe((0,Xn.z)(F=>this.expandSegment(e,t,r,F.concat(w),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=p_(r,e),r.loadChildren?(r._loadedRoutes?at({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,gt.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new Ht(i,{})))):at(new Ht(i,{}))):uE(t,r,i,e).pipe(Jn(({matched:l,consumedSegments:f,remainingSegments:y})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Xn.z)(T=>{const x=T.injector??e,F=T.routes,{segmentGroup:H,slicedSegments:ee}=oh(t,f,y,F),ve=new Ht(H.segments,H.children);if(0===ee.length&&ve.hasChildren())return this.expandChildren(x,F,ve).pipe((0,gt.U)(vt=>new Ht(f,vt)));if(0===F.length&&0===ee.length)return at(new Ht(f,{}));const Te=to(r)===a;return this.expandSegment(x,ve,F,ee,Te?Tt:a,!0).pipe((0,gt.U)(It=>new Ht(f.concat(It.segments),It.children)))})):Yf(t)))}getChildConfig(e,t,r){return t.children?at({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?at({routes:t._loadedRoutes,injector:t._loadedInjector}):function nT(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?at(!0):at(i.map(l=>{const f=wc(l,n);return S(function v_(n){return n&&ih(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(ll(),D_())}(e,t,r).pipe((0,Xn.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Dr.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function oT(n){return ru(Wb(Xg,3))}())):at({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return at(r);if(i.numberOfChildren>1||!i.children[Tt])return e.redirectTo,ru(new h.vHH(4e3,Xg));i=i.children[Tt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Dn(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return D(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return D(t.children,(f,y)=>{l[y]=this.createSegmentGroup(e,f,r,i)}),new Ht(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new h.vHH(4001,Xg);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class x_{}class Qf{constructor(e,t,r,i,a,l,f){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.urlSerializer=f}recognize(){const e=oh(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Tt).pipe((0,gt.U)(t=>{if(null===t)return null;const r=new zg([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Tt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new xs(r,t),a=new K0(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=Gb(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,gn.D)(Object.keys(r.children)).pipe(Xs(i=>{const a=r.children[i],l=nE(t,i);return this.processSegmentGroup(e,l,a,i)}),tl((i,a)=>i&&a?(i.push(...a),i):null),function Mo(n,e=!1){return(0,Xr.e)((t,r)=>{let i=0;t.subscribe((0,$r.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),su(null),ha(),(0,gt.U)(i=>{if(null===i)return null;const a=pE(i);return function lT(n){n.sort((e,t)=>e.value.outlet===Tt?-1:t.value.outlet===Tt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,gn.D)(t).pipe(Xs(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),Gi(l=>!!l),eo(l=>{if(cu(l))return ah(r,i,a)?at([]):at(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!dE(t,r,i,a))return at(null);let l;if("**"===t.path){const f=i.length>0?Zd(i).parameters:{},y=mE(r)+i.length;l=at({snapshot:new zg(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,va(t),to(t),t.component??t._loadedComponent??null,t,gE(r),y,yE(t)),consumedSegments:[],remainingSegments:[]})}else l=uE(r,t,i,e).pipe((0,gt.U)(({matched:f,consumedSegments:y,remainingSegments:w,parameters:T})=>{if(!f)return null;const x=mE(r)+y.length;return{snapshot:new zg(y,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,va(t),to(t),t.component??t._loadedComponent??null,t,gE(r),x,yE(t)),consumedSegments:y,remainingSegments:w}}));return l.pipe(Jn(f=>{if(null===f)return at(null);const{snapshot:y,consumedSegments:w,remainingSegments:T}=f;e=t._injector??e;const x=t._loadedInjector??e,F=function cT(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:H,slicedSegments:ee}=oh(r,w,T,F.filter(Te=>void 0===Te.redirectTo));if(0===ee.length&&H.hasChildren())return this.processChildren(x,F,H).pipe((0,gt.U)(Te=>null===Te?null:[new xs(y,Te)]));if(0===F.length&&0===ee.length)return at([new xs(y,[])]);const ve=to(t)===a;return this.processSegment(x,F,H,ee,ve?Tt:a).pipe((0,gt.U)(Te=>null===Te?null:[new xs(y,Te)]))}))}}function dT(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function pE(n){const e=[],t=new Set;for(const r of n){if(!dT(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=pE(r.children);e.push(new xs(r.value,i))}return e.filter(r=>!t.has(r))}function gE(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function mE(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function va(n){return n.data||{}}function yE(n){return n.resolve||{}}function R_(n){return"string"==typeof n.title||null===n.title}function N_(n){return Jn(e=>{const t=n(e);return t?(0,gn.D)(t).pipe((0,gt.U)(()=>e)):at(e)})}const lh=new h.OlP("ROUTES");let O_=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,h.f3M)(h.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return at(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=S(t.loadComponent()).pipe((0,gt.U)(wE),(0,Dr.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),ou(()=>{this.componentLoaders.delete(t)})),i=new Mf(r,()=>new Hi.x).pipe(iu());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return at({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,gt.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let y,w,T=!1;Array.isArray(f)?w=f:(y=f.create(t).injector,w=qd(y.get(lh,[],h.XFs.Self|h.XFs.Optional)));return{routes:w.map(Kg),injector:y}}),ou(()=>{this.childrenLoaders.delete(r)})),l=new Mf(a,()=>new Hi.x).pipe(iu());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return S(t()).pipe((0,gt.U)(wE),(0,Xn.z)(r=>r instanceof h.YKP||Array.isArray(r)?at(r):(0,gn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function wE(n){return function Po(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let tm=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Hi.x,this.configLoader=(0,h.f3M)(O_),this.environmentInjector=(0,h.f3M)(h.lqb),this.urlSerializer=(0,h.f3M)(us),this.rootContexts=(0,h.f3M)(Zg),this.navigationId=0,this.afterPreactivation=()=>at(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Vb(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new a_(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new rr({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:jf,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Pi(r=>0!==r.id),(0,gt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Jn(r=>{let i=!1,a=!1;return at(r).pipe((0,Dr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Jn(l=>{const f=t.browserUrlTree.toString(),y=!t.navigated||l.extractedUrl.toString()!==f||f!==t.currentUrlTree.toString();if(!y&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const T="";return this.events.next(new _c(l.id,t.serializeUrl(r.rawUrl),T,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),_i.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return EE(l.source)&&(t.browserUrlTree=l.extractedUrl),at(l).pipe(Jn(T=>{const x=this.transitions?.getValue();return this.events.next(new o_(T.id,this.urlSerializer.serialize(T.extractedUrl),T.source,T.restoredState)),x!==this.transitions?.getValue()?_i.E:Promise.resolve(T)}),function fE(n,e,t,r){return Jn(i=>function aT(n,e,t,r,i){return new hE(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,gt.U)(a=>({...i,urlAfterRedirects:a}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,Dr.b)(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},r.urlAfterRedirects=T.urlAfterRedirects}),function fT(n,e,t,r,i){return(0,Xn.z)(a=>function M_(n,e,t,r,i,a,l="emptyOnly"){return new Qf(n,e,t,r,i,l,a).recognize().pipe(Jn(f=>null===f?function uT(n){return new li.y(e=>e.error(n))}(new x_):at(f)))}(n,e,t,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i).pipe((0,gt.U)(l=>({...a,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Dr.b)(T=>{if(r.targetSnapshot=T.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!T.extras.skipLocationChange){const F=t.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);t.setBrowserUrl(F,T)}t.browserUrlTree=T.urlAfterRedirects}const x=new eh(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(x)}));if(y&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:T,extractedUrl:x,source:F,restoredState:H,extras:ee}=l,ve=new o_(T,this.urlSerializer.serialize(x),F,H);this.events.next(ve);const Te=Hb(x,this.rootComponentType).snapshot;return at(r={...l,targetSnapshot:Te,urlAfterRedirects:x,extras:{...ee,skipLocationChange:!1,replaceUrl:!1}})}{const T="";return this.events.next(new _c(l.id,t.serializeUrl(r.extractedUrl),T,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),_i.E}}),(0,Dr.b)(l=>{const f=new kb(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),(0,gt.U)(l=>r={...l,guards:Zf(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function Qg(n,e){return(0,Xn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?at({...t,guardsResult:!0}):function eT(n,e,t,r){return(0,gn.D)(n).pipe((0,Xn.z)(i=>function tT(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?at(a.map(f=>{const y=qf(e)??i,w=wc(f,y);return S(function Jb(n){return n&&ih(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):y.runInContext(()=>w(n,e,t,r))).pipe(Gi())})).pipe(ll()):at(!0)}(i.component,i.route,t,e,r)),Gi(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Xn.z)(f=>f&&function sE(n){return"boolean"==typeof n}(f)?function I_(n,e,t,r){return(0,gn.D)(e).pipe(Xs(i=>Xu(function Ec(n,e){return null!==n&&e&&e(new H0(n)),at(!0)}(i.route.parent,r),function Jg(n,e){return null!==n&&e&&e(new u_(n)),at(!0)}(i.route,r),function C_(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function __(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Gd(()=>at(l.guards.map(y=>{const w=qf(l.node)??t,T=wc(y,w);return S(function w_(n){return n&&ih(n.canActivateChild)}(T)?T.canActivateChild(r,n):w.runInContext(()=>T(r,n))).pipe(Gi())})).pipe(ll())));return at(a).pipe(ll())}(n,i.path,t),function aE(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return at(!0);const i=r.map(a=>Gd(()=>{const l=qf(e)??t,f=wc(a,l);return S(function IN(n){return n&&ih(n.canActivate)}(f)?f.canActivate(e,n):l.runInContext(()=>f(e,n))).pipe(Gi())}));return at(i).pipe(ll())}(n,i.route,t))),Gi(i=>!0!==i,!0))}(r,a,n,e):at(f)),(0,gt.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,l=>this.events.next(l)),(0,Dr.b)(l=>{if(r.guardsResult=l.guardsResult,Be(l.guardsResult))throw zb(0,l.guardsResult);const f=new Fb(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(f)}),Pi(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),N_(l=>{if(l.guards.canActivateChecks.length)return at(l).pipe((0,Dr.b)(f=>{const y=new mN(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(y)}),Jn(f=>{let y=!1;return at(f).pipe(function CN(n,e){return(0,Xn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return at(t);let a=0;return(0,gn.D)(i).pipe(Xs(l=>function DN(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!R_(i)&&(a[ci]=i.title),function _E(n,e,t,r){const i=function bN(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return at({});const a={};return(0,gn.D)(i).pipe((0,Xn.z)(l=>function vE(n,e,t,r){const i=qf(e)??r,a=wc(n,i);return S(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(Gi(),(0,Dr.b)(f=>{a[l]=f}))),nl(1),function gc(n){return(0,gt.U)(()=>n)}(a),eo(l=>cu(l)?_i.E:ru(l)))}(a,n,e,r).pipe((0,gt.U)(l=>(n._resolvedData=l,n.data=Gb(n,t).resolve,i&&R_(i)&&(n.data[ci]=i.title),null)))}(l.route,r,n,e)),(0,Dr.b)(()=>a++),nl(1),(0,Xn.z)(l=>a===i.length?at(t):_i.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Dr.b)({next:()=>y=!0,complete:()=>{y||(t.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,Dr.b)(f=>{const y=new Lb(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(y)}))}),N_(l=>{const f=y=>{const w=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,Dr.b)(T=>{y.component=T}),(0,gt.U)(()=>{})));for(const T of y.children)w.push(...f(T));return w};return dc(f(l.targetSnapshot.root)).pipe(su(),xo(1))}),N_(()=>this.afterPreactivation()),(0,gt.U)(l=>{const f=function zf(n,e,t){const r=nh(n,e._root,t?t._root:void 0);return new $b(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:f}}),(0,Dr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,gt.U)(r=>(new rE(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),xo(1),(0,Dr.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new ul(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),ou(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),eo(l=>{if(a=!0,qg(l)){Wg(l)||(t.navigated=!0,t.restoreHistory(r,!0));const f=new $f(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(f),Wg(l)){const y=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),w={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||EE(r.source)};t.scheduleNavigation(y,jf,null,w,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const f=new Hf(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(f);try{r.resolve(t.errorHandler(l))}catch(y){r.reject(y)}}return _i.E}))}))}cancelNavigationTransition(t,r,i){const a=new $f(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function EE(n){return n!==jf}let IE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Tt);return r}getResolvedTitleForRoute(t){return t.data[ci]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(pT)},providedIn:"root"}),n})(),pT=(()=>{class n extends IE{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Tf))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),CE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(mT)},providedIn:"root"}),n})();class gT{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let mT=(()=>{class n extends gT{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Bt=new h.OlP("",{providedIn:"root",factory:()=>({})});let DE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(bE)},providedIn:"root"}),n})(),bE=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _T(n){throw n}function vT(n,e,t){return e.parse("/")}const TE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},wT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ls=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.f3M)(h.c2e),this.isNgZoneEnabled=!1,this.options=(0,h.f3M)(Bt,{optional:!0})||{},this.errorHandler=this.options.errorHandler||_T,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||vT,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.f3M)(DE),this.routeReuseStrategy=(0,h.f3M)(CE),this.urlCreationStrategy=(0,h.f3M)(jb),this.titleStrategy=(0,h.f3M)(IE),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=qd((0,h.f3M)(lh,{optional:!0})??[]),this.navigationTransitions=(0,h.f3M)(tm),this.urlSerializer=(0,h.f3M)(us),this.location=(0,h.f3M)(je),this.isNgZoneEnabled=(0,h.f3M)(h.R0b)instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Dn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Hb(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),jf,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const y={...i};delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(a.state=y)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,l,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Kg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:f,preserveFragment:y}=r,w=y?this.currentUrlTree.fragment:l;let T=null;switch(f){case"merge":T={...this.currentUrlTree.queryParams,...a};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=a||null}return null!==T&&(T=this.removeEmptyProps(T)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,T,w??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Be(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,jf,null,r)}navigate(t,r={skipLocationChange:!1}){return function ET(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new h.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...TE}:!1===r?{...wT}:r,Be(t))return se(this.currentUrlTree,t,i);const a=this.parseUrl(t);return se(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let f,y,w,T;return l?(f=l.resolve,y=l.reject,w=l.promise):w=new Promise((x,F)=>{f=x,y=F}),T="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:T,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:f,reject:y,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(x=>Promise.reject(x))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-(this.browserPageId??this.currentPageId);0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ep=(()=>{class n{constructor(t,r,i,a,l,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.locationStrategy=f,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Hi.x;const y=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===y||"area"===y,this.isAnchorElement?this.subscription=t.events.subscribe(w=>{w instanceof ul&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,h.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ls),h.Y36(vc),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(rt))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&h.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&h.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})();class k_{}let F_=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Pi(t=>t instanceof ul),Xs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,h.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,f=a._loadedInjector??l;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(l,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,gn.D)(i).pipe((0,tu.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):at(null);const a=i.pipe((0,Xn.z)(l=>null===l?at(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,gn.D)([a,l]).pipe((0,tu.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ls),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(k_),h.LFG(O_))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tp=new h.OlP("");let AE=(()=>{class n{constructor(t,r,i,a,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof o_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ul&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof l_&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new l_(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();var no=(()=>((no=no||{})[no.COMPLETE=0]="COMPLETE",no[no.FAILED=1]="FAILED",no[no.REDIRECTING=2]="REDIRECTING",no))();const np=!1;function Ic(n,e){return{\u0275kind:n,\u0275providers:e}}const V_=new h.OlP("",{providedIn:"root",factory:()=>!1});function rp(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(ls),i=n.get(xE);1===n.get(rm)&&r.initialNavigation(),n.get(ME,null,h.XFs.Optional)?.setUpPreloading(),n.get(tp,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const xE=new h.OlP(np?"bootstrap done indicator":"",{factory:()=>new Hi.x}),rm=new h.OlP(np?"initial navigation":"",{providedIn:"root",factory:()=>1});function bT(){let n=[];return n=np?[{provide:h.Xts,multi:!0,useFactory:()=>{const e=(0,h.f3M)(ls);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function z0(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Ic(1,n)}const ME=new h.OlP(np?"router preloader":"");function TT(n){return Ic(0,[{provide:ME,useExisting:F_},{provide:k_,useExisting:n}])}const hh=!1,xT=new h.OlP(hh?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),U_=[je,{provide:us,useClass:Pf},ls,Zg,{provide:vc,useFactory:function L_(n){return n.routerState.root},deps:[ls]},O_,hh?{provide:V_,useValue:!0}:[]];function MT(){return new h.PXZ("Router",ls)}let RT=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[U_,hh&&r?.enableTracing?bT().\u0275providers:[],{provide:lh,multi:!0,useValue:t},{provide:xT,useFactory:PE,deps:[[ls,new h.FiY,new h.tp0]]},{provide:Bt,useValue:r||{}},r?.useHash?{provide:rt,useClass:ke}:{provide:rt,useClass:Ne},{provide:tp,useFactory:()=>{const n=(0,h.f3M)(Ru),e=(0,h.f3M)(h.R0b),t=(0,h.f3M)(Bt),r=(0,h.f3M)(tm),i=(0,h.f3M)(us);return t.scrollOffset&&n.setOffset(t.scrollOffset),new AE(i,r,n,e,t)}},r?.preloadingStrategy?TT(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:MT},r?.initialNavigation?PT(r):[],[{provide:OE,useFactory:rp},{provide:h.tb,multi:!0,useExisting:OE}]]}}static forChild(t){return{ngModule:n,providers:[{provide:lh,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(xT,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[f_]}),n})();function PE(n){if(hh&&n)throw new h.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function PT(n){return["disabled"===n.initialNavigation?Ic(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(ls);return()=>{e.setUpLocationChangeListener()}}},{provide:rm,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ic(2,[{provide:rm,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(we,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(ls),a=e.get(xE);(function AN(n,e){n.events.pipe(Pi(t=>t instanceof ul||t instanceof $f||t instanceof Hf||t instanceof _c),(0,gt.U)(t=>t instanceof ul||t instanceof _c?no.COMPLETE:t instanceof $f&&(0===t.code||1===t.code)?no.REDIRECTING:no.FAILED),Pi(t=>t!==no.REDIRECTING),xo(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(tm).afterPreactivation=()=>(r(!0),a.closed?at(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const OE=new h.OlP(hh?"Router Initializer":"");var sm=U(3942),X=(U(1389),U(2090)),cs=U(6881),Oo=U(1877),Cc=U(4859),Ie=U(5861);const am="@firebase/database";let sp="";class kT{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,X.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,X.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class kE{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,X.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const FE=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new kT(e)}}catch{}return new kE},cl=FE("localStorage"),um=FE("sessionStorage"),ph=new Oo.Yd("@firebase/database"),LE=function(){let n=1;return function(){return n++}}(),ds=function(n){const e=(0,X.dS)(n),t=new X.gQ;t.update(e);const r=t.digest();return X.US.encodeByteArray(r)},op=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=op.apply(null,r):e+="object"==typeof r?(0,X.Wl)(r):r,e+=" "}return e};let Dc=null,FT=!0;const ei=function(...n){if(!0===FT&&(FT=!1,null===Dc&&!0===um.get("logging_enabled")&&function(n,e){(0,X.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ph.logLevel=Oo.in.VERBOSE,Dc=ph.log.bind(ph),e&&um.set("logging_enabled",!0)):"function"==typeof n?Dc=n:(Dc=null,um.remove("logging_enabled"))}(!0)),Dc){const e=op.apply(null,n);Dc(e)}},ap=function(n){return function(...e){ei(n,...e)}},j_=function(...n){const e="FIREBASE INTERNAL ERROR: "+op(...n);ph.error(e)},wa=function(...n){const e=`FIREBASE FATAL ERROR: ${op(...n)}`;throw ph.error(e),new Error(e)},vi=function(...n){const e="FIREBASE WARNING: "+op(...n);ph.warn(e)},cm=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},dl="[MIN_NAME]",hu="[MAX_NAME]",bc=function(n,e){if(n===e)return 0;if(n===dl||e===hu)return-1;if(e===dl||n===hu)return 1;{const t=BE(n),r=BE(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},VT=function(n,e){return n===e?0:n<e?-1:1},up=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,X.Wl)(e))},ro=function(n){if("object"!=typeof n||null===n)return(0,X.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,X.Wl)(e[r]),t+=":",t+=ro(n[e[r]]);return t+="}",t},dm=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function hi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const VE=function(n){(0,X.hu)(!cm(n),"Invalid JSON number");const r=1023;let i,a,l,f,y;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,l=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const w=[];for(y=52;y;y-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(y=11;y;y-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const T=w.join("");let x="";for(y=0;y<64;y+=8){let F=parseInt(T.substr(y,8),2).toString(16);1===F.length&&(F="0"+F),x+=F}return x.toLowerCase()},jT=new RegExp("^-?(0*)\\d{1,10}$"),BE=function(n){if(jT.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},fu=function(n){try{n()}catch(e){setTimeout(()=>{throw vi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},hm=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},hl=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class NN{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){vi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class G_{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ei("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vi(e)}}let fm=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Ea=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,jE="websocket",Z_="long_polling";class gm{constructor(e,t,r,i,a=!1,l="",f=!1,y=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=y,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=cl.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&cl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function $E(n,e,t){let r;if((0,X.hu)("string"==typeof e,"typeof type must == string"),(0,X.hu)("object"==typeof t,"typeof params must == object"),e===jE)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Z_)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function HT(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return hi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class hp{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,X.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,X.p$)(this.counters_)}}const K_={},HE={};function Y_(n){const e=n.toString();return K_[e]||(K_[e]=new hp),K_[e]}class zT{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&fu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class fl{constructor(e,t,r,i,a,l,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ap(e),this.stats_=Y_(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),$E(t,Z_,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new zT(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,X.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new YE((...a)=>{const[l,f,y,w,T]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=f,this.password=y;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Ea.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){fl.forceAllow_=!0}static forceDisallow(){fl.forceDisallow_=!0}static isAvailable(){return!((0,X.Yr)()||!fl.forceAllow_&&(fl.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,X.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,X.h$)(t),i=dm(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,X.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,X.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class YE{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,X.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=LE(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=YE.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(f){ei("frame writing exception"),f.stack&&ei(f.stack),ei(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ei("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,X.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ei("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Sc=null;typeof MozWebSocket<"u"?Sc=MozWebSocket:typeof WebSocket<"u"&&(Sc=WebSocket);let gh=(()=>{class n{constructor(t,r,i,a,l,f,y){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ap(this.connId),this.stats_=Y_(r),this.connURL=n.connectionURL_(r,f,y,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const f={v:"5"};return!(0,X.Yr)()&&typeof location<"u"&&location.hostname&&Ea.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),l&&(f.p=l),$E(t,jE,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,cl.set("previous_websocket_failure",!0);try{let i;if((0,X.Yr)()){i={headers:{"User-Agent":`Firebase/5/${sp}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,f=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new Sc(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Sc&&!n.forceDisallow_}static previouslyFailed(){return cl.isInMemoryStorage||!0===cl.get("previous_websocket_failure")}markConnectionHealthy(){cl.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,X.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,X.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,X.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=dm(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),JE=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[fl,gh]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=gh&&gh.isAvailable();let i=r&&!gh.previouslyFailed();if(t.webSocketOnly&&(r||vi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[gh];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Nc{constructor(e,t,r,i,a,l,f,y,w,T){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=f,this.onDisconnect_=y,this.onKill_=w,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ap("c:"+this.id+":"),this.transportManager_=new JE(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=hl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=up("t",e),r=up("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=up("t",e),r=up("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=up("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?j_("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):j_("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&vi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),hl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(cl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Pc{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Oc{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,X.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,X.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class pu extends Oc{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,X.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new pu}getInitialEvent(e){return(0,X.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const tv=32,nv=768;class bn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function _n(){return new bn("")}function sn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function gu(n){return n.pieces_.length-n.pieceNum_}function Rn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new bn(n.pieces_,e)}function _m(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function pp(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function eI(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new bn(e,0)}function er(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof bn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new bn(t,0)}function un(n){return n.pieceNum_>=n.pieces_.length}function ki(n,e){const t=sn(n),r=sn(e);if(null===t)return e;if(t===r)return ki(Rn(n),Rn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function gp(n,e){if(gu(n)!==gu(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function io(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(gu(n)>gu(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class vm{constructor(e,t){this.errorPrefix_=t,this.parts_=pp(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,X.ug)(this.parts_[r]);tI(this)}}function tI(n){if(n.byteLength_>nv)throw new Error(n.errorPrefix_+"has a key path longer than "+nv+" bytes ("+n.byteLength_+").");if(n.parts_.length>tv)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+tv+") or object contains a cycle "+mu(n))}function mu(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class mp extends Oc{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new mp}getInitialEvent(e){return(0,X.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const yh=1e3;let _p,kc=(()=>{class n extends Pc{constructor(t,r,i,a,l,f,y,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=y,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=ap("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=yh,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,X.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");mp.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&pu.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,X.Wl)(l)),(0,X.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new X.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const y=f.d;"ok"===f.s?r.resolve(y):r.reject(y)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+l),this.listens.has(f)||this.listens.set(f,new Map),(0,X.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,X.hu)(!this.listens.get(f).has(l),"listen() called twice for same path/queryId.");const y={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(l,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,y=>{const w=y.d,T=y.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",y),"ok"!==T&&this.removeListen_(i,a),t.onComplete&&t.onComplete(T,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,X.r3)(t,"w")){const i=(0,X.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();vi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,X.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,X.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,f=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,X.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const f={p:r,d:i};void 0!==l&&(f.h=l),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,X.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):j_("Unrecognized action received from server: "+(0,X.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,X.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=yh,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=yh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=yh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ie.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let y=!1,w=null;const T=function(){w?w.close():(y=!0,a())};t.realtime_={close:T,sendRequest:function(H){(0,X.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(H)}};const F=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[H,ee]=yield Promise.all([t.authTokenProvider_.getToken(F),t.appCheckTokenProvider_.getToken(F)]);y?ei("getToken() completed but was canceled"):(ei("getToken() completed. Creating connection."),t.authToken_=H&&H.accessToken,t.appCheckToken_=ee&&ee.token,w=new Nc(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ve=>{vi(ve+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(H){t.log_("Failed to get token: "+H),y||(t.repoInfo_.nodeAdmin&&vi(H),T())}}})()}interrupt(t){ei("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ei("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,X.xb)(this.interruptReasons_)&&(this.reconnectDelay_=yh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>ro(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new bn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){ei("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ei("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,X.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+sp.replace(/\./g,"-")]=1,(0,X.uI)()?t["framework.cordova"]=1:(0,X.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=pu.getInstance().currentlyOnline();return(0,X.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class ln{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ln(e,t)}}class yp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new ln(dl,e),i=new ln(dl,t);return 0!==this.compare(r,i)}minPost(){return ln.MIN}}class av extends yp{static get __EMPTY_NODE(){return _p}static set __EMPTY_NODE(e){_p=e}compare(e,t){return bc(e.name,t.name)}isDefinedOn(e){throw(0,X.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ln.MIN}maxPost(){return new ln(hu,_p)}makePost(e,t){return(0,X.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new ln(e,_p)}toString(){return".key"}}const Ca=new av;class Im{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Dm,ko=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Fi.EMPTY_NODE,this.right=l??Fi.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Fi.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Fi.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Fi{constructor(e,t=Fi.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Fi(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ko.BLACK,null,null))}remove(e){return new Fi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ko.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Im(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Im(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Im(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Im(this.root_,null,this.comparator_,!0,e)}}function sI(n,e){return bc(n.name,e.name)}function Cm(n,e){return bc(n,e)}Fi.EMPTY_NODE=new class uv{copy(e,t,r,i,a){return this}insert(e,t,r){return new ko(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const lv=function(n){return"number"==typeof n?"number:"+VE(n):"string:"+n},cv=function(n){if(n.isLeafNode()){const e=n.val();(0,X.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,X.r3)(e,".sv"),"Priority must be a string or number.")}else(0,X.hu)(n===Dm||n.isEmpty(),"priority of unexpected type.");(0,X.hu)(n===Dm||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let dv,vp,yu,Fc=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,X.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),cv(this.priorityNode_)}static set __childrenNodeConstructor(t){dv=t}static get __childrenNodeConstructor(){return dv}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return un(t)?this:".priority"===sn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=sn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,X.hu)(".priority"!==i||1===gu(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Rn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+lv(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?VE(this.value_):this.value_,this.lazyHash_=ds(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,X.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,X.hu)(a>=0,"Unknown leaf type: "+r),(0,X.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const wn=new class hv extends yp{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?bc(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ln.MIN}maxPost(){return new ln(hu,new Fc("[PRIORITY-POST]",yu))}makePost(e,t){const r=vp(e);return new ln(t,new Fc("[PRIORITY-POST]",r))}toString(){return".priority"}},fv=Math.log(2);class rS{constructor(e){this.count=parseInt(Math.log(e+1)/fv,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const _h=function(n,e,t,r){n.sort(e);const i=function(y,w){const T=w-y;let x,F;if(0===T)return null;if(1===T)return x=n[y],F=t?t(x):x,new ko(F,x.node,ko.BLACK,null,null);{const H=parseInt(T/2,10)+y,ee=i(y,H),ve=i(H+1,w);return x=n[H],F=t?t(x):x,new ko(F,x.node,ko.BLACK,ee,ve)}},f=function(y){let w=null,T=null,x=n.length;const F=function(ee,ve){const Te=x-ee,mt=x;x-=ee;const It=i(Te+1,mt),vt=n[Te],Ft=t?t(vt):vt;H(new ko(Ft,vt.node,ve,null,It))},H=function(ee){w?(w.left=ee,w=ee):(T=ee,w=ee)};for(let ee=0;ee<y.count;++ee){const ve=y.nextBitIsOne(),Te=Math.pow(2,y.count-(ee+1));ve?F(Te,ko.BLACK):(F(Te,ko.BLACK),F(Te,ko.RED))}return T}(new rS(n.length));return new Fi(r||e,f)};let aI;const wp={};class _u{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,X.hu)(wp&&wn,"ChildrenNode.ts has not been loaded"),aI=aI||new _u({".priority":wp},{".priority":wn}),aI}get(e){const t=(0,X.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Fi?t:null}hasIndex(e){return(0,X.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,X.hu)(e!==Ca,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(ln.Wrap);let f,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();f=i?_h(r,e.getCompare()):wp;const y=e.toString(),w=Object.assign({},this.indexSet_);w[y]=e;const T=Object.assign({},this.indexes_);return T[y]=f,new _u(T,w)}addToIndexes(e,t){const r=(0,X.UI)(this.indexes_,(i,a)=>{const l=(0,X.DV)(this.indexSet_,a);if((0,X.hu)(l,"Missing index implementation for "+a),i===wp){if(l.isDefinedOn(e.node)){const f=[],y=t.getIterator(ln.Wrap);let w=y.getNext();for(;w;)w.name!==e.name&&f.push(w),w=y.getNext();return f.push(e),_h(f,l.getCompare())}return wp}{const f=t.get(e.name);let y=i;return f&&(y=y.remove(new ln(e.name,f))),y.insert(e,e.node)}});return new _u(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,X.UI)(this.indexes_,i=>{if(i===wp)return i;{const a=t.get(e.name);return a?i.remove(new ln(e.name,a)):i}});return new _u(r,this.indexSet_)}}let Ep,Jt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&cv(this.priorityNode_),this.children_.isEmpty()&&(0,X.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ep||(Ep=new n(new Fi(Cm),null,_u.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ep}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Ep:r}}getChild(t){const r=sn(t);return null===r?this:this.getImmediateChild(r).getChild(Rn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,X.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new ln(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?Ep:this.priorityNode_;return new n(a,f,l)}}updateChild(t,r){const i=sn(t);if(null===i)return r;{(0,X.hu)(".priority"!==sn(t)||1===gu(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Rn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(wn,(f,y)=>{r[f]=y.val(t),i++,l&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):l=!1}),!t&&l&&a<2*i){const f=[];for(const y in r)f[y]=r[y];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+lv(this.getPriority().val())+":"),this.forEachChild(wn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":ds(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new ln(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new ln(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new ln(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,ln.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,ln.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===cr?-1:0}withIndex(t){if(t===Ca||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ca||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(wn),a=r.getIterator(wn);let l=i.getNext(),f=a.getNext();for(;l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=i.getNext(),f=a.getNext()}return null===l&&null===f}return!1}return!1}}resolveIndex_(t){return t===Ca?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const cr=new class iS extends Jt{constructor(){super(new Fi(Cm),Jt.EMPTY_NODE,_u.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Jt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(ln,{MIN:{value:new ln(dl,Jt.EMPTY_NODE)},MAX:{value:new ln(hu,cr)}}),av.__EMPTY_NODE=Jt.EMPTY_NODE,Fc.__childrenNodeConstructor=Jt,function oI(n){Dm=n}(cr),function nS(n){yu=n}(cr);const uI=!0;function dr(n,e=null){if(null===n)return Jt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,X.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Fc(n,dr(e));if(n instanceof Array||!uI){let t=Jt.EMPTY_NODE;return hi(n,(r,i)=>{if((0,X.r3)(n,r)&&"."!==r.substring(0,1)){const a=dr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(dr(e))}{const t=[];let r=!1;if(hi(n,(l,f)=>{if("."!==l.substring(0,1)){const y=dr(f);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new ln(l,y)))}}),0===t.length)return Jt.EMPTY_NODE;const a=_h(t,sI,l=>l.name,Cm);if(r){const l=_h(t,wn.getCompare());return new Jt(a,dr(e),new _u({".priority":l},{".priority":wn}))}return new Jt(a,dr(e),_u.Default)}}!function tS(n){vp=n}(dr);class pv extends yp{constructor(e){super(),this.indexPath_=e,(0,X.hu)(!un(e)&&".priority"!==sn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?bc(e.name,t.name):a}makePost(e,t){const r=dr(e),i=Jt.EMPTY_NODE.updateChild(this.indexPath_,r);return new ln(t,i)}maxPost(){const e=Jt.EMPTY_NODE.updateChild(this.indexPath_,cr);return new ln(hu,e)}toString(){return pp(this.indexPath_,0).join("/")}}const gv=new class lI extends yp{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?bc(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ln.MIN}maxPost(){return ln.MAX}makePost(e,t){const r=dr(e);return new ln(t,r)}toString(){return".value"}};function Ip(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class dI{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=wn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,X.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,X.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:dl}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,X.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,X.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:hu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,X.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===wn}copy(){const e=new dI;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function vv(n){const e={};if(n.isDefault())return e;let t;if(n.index_===wn?t="$priority":n.index_===gv?t="$value":n.index_===Ca?t="$key":((0,X.hu)(n.index_ instanceof pv,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,X.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,X.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,X.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,X.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,X.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function wv(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==wn&&(e.i=n.index_.toString()),e}class Tm extends Pc{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ap("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,X.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=Tm.getListenId_(e,r),f={};this.listens_[l]=f;const y=vv(e._queryParams);this.restRequest_(a+".json",y,(w,T)=>{let x=T;if(404===w&&(x=null,w=null),null===w&&this.onDataUpdate_(a,x,!1,r),(0,X.DV)(this.listens_,l)===f){let F;F=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(F,null)}})}unlisten(e,t){const r=Tm.getListenId_(e,t);delete this.listens_[r]}get(e){const t=vv(e._queryParams),r=e._path.toString(),i=new X.BH;return this.restRequest_(r+".json",t,(a,l)=>{let f=l;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,X.xO)(t);this.log_("Sending REST request for "+l);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+l+" received. status:",f.status,"response:",f.responseText);let y=null;if(f.status>=200&&f.status<300){try{y=(0,X.cI)(f.responseText)}catch{vi("Failed to parse JSON response for "+l+": "+f.responseText)}r(null,y)}else 401!==f.status&&404!==f.status&&vi("Got unsuccessful REST response for "+l+" Status: "+f.status),r(f.status);r=null}},f.open("GET",l,!0),f.send()})}}class aS{constructor(){this.rootNode_=Jt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Sm(){return{value:null,children:new Map}}function vh(n,e,t){if(un(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=sn(e);n.children.has(r)||n.children.set(r,Sm()),vh(n.children.get(r),e=Rn(e),t)}}function Vc(n,e,t){null!==n.value?t(e,n.value):function uS(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Vc(i,new bn(e.toString()+"/"+r),t)})}class fI{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&hi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class mI{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new fI(e);const r=1e4+2e4*Math.random();hl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;hi(e,(i,a)=>{a>0&&(0,X.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),hl(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Wi=(()=>{return(n=Wi||(Wi={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Wi;var n})();function xm(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class wh{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Wi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(un(this.path)){if(null!=this.affectedTree.value)return(0,X.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new bn(e));return new wh(_n(),t,this.revert)}}return(0,X.hu)(sn(this.path)===e,"operationForChild called for unrelated child."),new wh(Rn(this.path),this.affectedTree,this.revert)}}class ml{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Wi.OVERWRITE}operationForChild(e){return un(this.path)?new ml(this.source,_n(),this.snap.getImmediateChild(e)):new ml(this.source,Rn(this.path),this.snap)}}class Uc{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Wi.MERGE}operationForChild(e){if(un(this.path)){const t=this.children.subtree(new bn(e));return t.isEmpty()?null:t.value?new ml(this.source,_n(),t.value):new Uc(this.source,_n(),t)}return(0,X.hu)(sn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Uc(this.source,Rn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class vu{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(un(e))return this.isFullyInitialized()&&!this.filtered_;const t=sn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Eh(n,e,t,r,i,a){const l=r.filter(f=>f.type===t);l.sort((f,y)=>function wI(n,e,t){if(null==e.childName||null==t.childName)throw(0,X.g5)("Should only compare child_ events.");const r=new ln(e.childName,e.snapshotNode),i=new ln(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,y)),l.forEach(f=>{const y=function vI(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(w=>{w.respondsTo(f.type)&&e.push(w.createEvent(y,n.query_))})})}function Mm(n,e){return{eventCache:n,serverCache:e}}function bp(n,e,t,r){return Mm(new vu(e,t,r),n.serverCache)}function EI(n,e,t,r){return Mm(n.eventCache,new vu(e,t,r))}function Rm(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Bc(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Iv;class Hn{constructor(e,t=(()=>(Iv||(Iv=new Fi(VT)),Iv))()){this.value=e,this.children=t}static fromObject(e){let t=new Hn(null);return hi(e,(r,i)=>{t=t.set(new bn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:_n(),value:this.value};if(un(e))return null;{const r=sn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Rn(e),t);return null!=a?{path:er(new bn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(un(e))return this;{const t=sn(e),r=this.children.get(t);return null!==r?r.subtree(Rn(e)):new Hn(null)}}set(e,t){if(un(e))return new Hn(t,this.children);{const r=sn(e),a=(this.children.get(r)||new Hn(null)).set(Rn(e),t),l=this.children.insert(r,a);return new Hn(this.value,l)}}remove(e){if(un(e))return this.children.isEmpty()?new Hn(null):new Hn(null,this.children);{const t=sn(e),r=this.children.get(t);if(r){const i=r.remove(Rn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Hn(null):new Hn(this.value,a)}return this}}get(e){if(un(e))return this.value;{const t=sn(e),r=this.children.get(t);return r?r.get(Rn(e)):null}}setTree(e,t){if(un(e))return t;{const r=sn(e),a=(this.children.get(r)||new Hn(null)).setTree(Rn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Hn(this.value,l)}}fold(e){return this.fold_(_n(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(er(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,_n(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(un(e))return null;{const a=sn(e),l=this.children.get(a);return l?l.findOnPath_(Rn(e),er(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,_n(),t)}foreachOnPath_(e,t,r){if(un(e))return this;{this.value&&r(t,this.value);const i=sn(e),a=this.children.get(i);return a?a.foreachOnPath_(Rn(e),er(t,i),r):new Hn(null)}}foreach(e){this.foreach_(_n(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(er(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Lo{constructor(e){this.writeTree_=e}static empty(){return new Lo(new Hn(null))}}function Tp(n,e,t){if(un(e))return new Lo(new Hn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=ki(i,e);return a=a.updateChild(l,t),new Lo(n.writeTree_.set(i,a))}{const i=new Hn(t),a=n.writeTree_.setTree(e,i);return new Lo(a)}}}function Cv(n,e,t){let r=n;return hi(t,(i,a)=>{r=Tp(r,er(e,i),a)}),r}function II(n,e){if(un(e))return Lo.empty();{const t=n.writeTree_.setTree(e,new Hn(null));return new Lo(t)}}function Dv(n,e){return null!=jc(n,e)}function jc(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ki(t.path,e)):null}function CI(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(wn,(r,i)=>{e.push(new ln(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new ln(r,i.value))}),e}function yl(n,e){if(un(e))return n;{const t=jc(n,e);return new Lo(null!=t?new Hn(t):n.writeTree_.subtree(e))}}function bv(n){return n.writeTree_.isEmpty()}function Ih(n,e){return Tv(_n(),n.writeTree_,e)}function Tv(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,X.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=Tv(er(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(er(n,".priority"),r)),t}}function Sp(n,e){return NI(e,n)}function AI(n,e){if(n.snap)return io(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&io(er(n.path,t),e))return!0;return!1}function MI(n){return n.visible}function Sv(n,e,t){let r=Lo.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let f;if(a.snap)io(t,l)?(f=ki(t,l),r=Tp(r,f,a.snap)):io(l,t)&&(f=ki(l,t),r=Tp(r,_n(),a.snap.getChild(f)));else{if(!a.children)throw(0,X.g5)("WriteRecord should have .snap or .children");if(io(t,l))f=ki(t,l),r=Cv(r,f,a.children);else if(io(l,t))if(f=ki(l,t),un(f))r=Cv(r,_n(),a.children);else{const y=(0,X.DV)(a.children,sn(f));if(y){const w=y.getChild(Rn(f));r=Tp(r,_n(),w)}}}}}return r}function Av(n,e,t,r,i){if(r||i){const a=yl(n.visibleWrites,e);return!i&&bv(a)?t:i||null!=t||Dv(a,_n())?Ih(Sv(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(io(w.path,e)||io(e,w.path))},e),t||Jt.EMPTY_NODE):null}{const a=jc(n.visibleWrites,e);if(null!=a)return a;{const l=yl(n.visibleWrites,e);return bv(l)?t:null!=t||Dv(l,_n())?Ih(l,t||Jt.EMPTY_NODE):null}}}function Mv(n,e,t,r){return Av(n.writeTree,n.treePath,e,t,r)}function Nm(n,e){return function $c(n,e,t){let r=Jt.EMPTY_NODE;const i=jc(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(wn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=yl(n.visibleWrites,e);return t.forEachChild(wn,(l,f)=>{const y=Ih(yl(a,new bn(l)),f);r=r.updateImmediateChild(l,y)}),CI(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return CI(yl(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function Rv(n,e,t,r){return function dS(n,e,t,r,i){(0,X.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=er(e,t);if(Dv(n.visibleWrites,a))return null;{const l=yl(n.visibleWrites,a);return bv(l)?i.getChild(t):Ih(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Nv(n,e){return function Ch(n,e){return jc(n.visibleWrites,e)}(n.writeTree,er(n.treePath,e))}function Pv(n,e,t){return function hS(n,e,t,r){const i=er(e,t),a=jc(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Ih(yl(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function RI(n,e){return NI(er(n.treePath,e),n.writeTree)}function NI(n,e){return{treePath:n,writeTree:e}}class Dh{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,X.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,X.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,Ip(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,function Da(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,function Lc(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,X.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Ip(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Ap=new class fS{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class bh{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new vu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Pv(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Bc(this.viewCache_),a=function Mt(n,e,t,r,i,a){return function ON(n,e,t,r,i,a,l){let f;const y=yl(n.visibleWrites,e),w=jc(y,_n());if(null!=w)f=w;else{if(null==t)return[];f=Ih(y,t)}if(f=f.withIndex(l),f.isEmpty()||f.isLeafNode())return[];{const T=[],x=l.getCompare(),F=a?f.getReverseIteratorFrom(r,l):f.getIteratorFrom(r,l);let H=F.getNext();for(;H&&T.length<i;)0!==x(H,r)&&T.push(H),H=F.getNext();return T}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function kI(n,e,t,r,i,a){const l=e.eventCache;if(null!=Nv(r,t))return e;{let f,y;if(un(t))if((0,X.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Bc(e),x=Nm(r,w instanceof Jt?w:Jt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),x,a)}else{const w=Mv(r,Bc(e));f=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=sn(t);if(".priority"===w){(0,X.hu)(1===gu(t),"Can't have a priority with additional path components");const T=l.getNode();y=e.serverCache.getNode();const x=Rv(r,t,T,y);f=null!=x?n.filter.updatePriority(T,x):l.getNode()}else{const T=Rn(t);let x;if(l.isCompleteForChild(w)){y=e.serverCache.getNode();const F=Rv(r,t,l.getNode(),y);x=null!=F?l.getNode().getImmediateChild(w).updateChild(T,F):l.getNode().getImmediateChild(w)}else x=Pv(r,w,e.serverCache);f=null!=x?n.filter.updateChild(l.getNode(),w,x,T,i,a):l.getNode()}}return bp(e,f,l.isFullyInitialized()||un(t),n.filter.filtersNodes())}}function xp(n,e,t,r,i,a,l,f){const y=e.serverCache;let w;const T=l?n.filter:n.filter.getIndexedFilter();if(un(t))w=T.updateFullNode(y.getNode(),r,null);else if(T.filtersNodes()&&!y.isFiltered()){const H=y.getNode().updateChild(t,r);w=T.updateFullNode(y.getNode(),H,null)}else{const H=sn(t);if(!y.isCompleteForPath(t)&&gu(t)>1)return e;const ee=Rn(t),Te=y.getNode().getImmediateChild(H).updateChild(ee,r);w=".priority"===H?T.updatePriority(y.getNode(),Te):T.updateChild(y.getNode(),H,Te,ee,Ap,null)}const x=EI(e,w,y.isFullyInitialized()||un(t),T.filtersNodes());return kI(n,x,t,i,new bh(i,x,a),f)}function Pm(n,e,t,r,i,a,l){const f=e.eventCache;let y,w;const T=new bh(i,e,a);if(un(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,l),y=bp(e,w,!0,n.filter.filtersNodes());else{const x=sn(t);if(".priority"===x)w=n.filter.updatePriority(e.eventCache.getNode(),r),y=bp(e,w,f.isFullyInitialized(),f.isFiltered());else{const F=Rn(t),H=f.getNode().getImmediateChild(x);let ee;if(un(F))ee=r;else{const ve=T.getCompleteChild(x);ee=null!=ve?".priority"===_m(F)&&ve.getChild(eI(F)).isEmpty()?ve:ve.updateChild(F,r):Jt.EMPTY_NODE}y=H.equals(ee)?e:bp(e,n.filter.updateChild(f.getNode(),x,ee,F,T,l),f.isFullyInitialized(),n.filter.filtersNodes())}}return y}function Ov(n,e){return n.eventCache.isCompleteForChild(e)}function LI(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function kv(n,e,t,r,i,a,l,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,y=e;w=un(t)?r:new Hn(null).setTree(t,r);const T=e.serverCache.getNode();return w.children.inorderTraversal((x,F)=>{if(T.hasChild(x)){const ee=LI(0,e.serverCache.getNode().getImmediateChild(x),F);y=xp(n,y,new bn(x),ee,i,a,l,f)}}),w.children.inorderTraversal((x,F)=>{const H=!e.serverCache.isCompleteForChild(x)&&null===F.value;if(!T.hasChild(x)&&!H){const ve=LI(0,e.serverCache.getNode().getImmediateChild(x),F);y=xp(n,y,new bn(x),ve,i,a,l,f)}}),y}function VI(n,e){const t=Bc(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!un(e)&&!t.getImmediateChild(sn(e)).isEmpty())?t.getChild(e):null}function Th(n,e,t,r){e.type===Wi.MERGE&&null!==e.source.queryId&&((0,X.hu)(Bc(n.viewCache_),"We should always have a full cache before handling merges"),(0,X.hu)(Rm(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function PI(n,e,t,r,i){const a=new Dh;let l,f;if(t.type===Wi.OVERWRITE){const w=t;w.source.fromUser?l=Pm(n,e,w.path,w.snap,r,i,a):((0,X.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||e.serverCache.isFiltered()&&!un(w.path),l=xp(n,e,w.path,w.snap,r,i,f,a))}else if(t.type===Wi.MERGE){const w=t;w.source.fromUser?l=function FI(n,e,t,r,i,a,l){let f=e;return r.foreach((y,w)=>{const T=er(t,y);Ov(e,sn(T))&&(f=Pm(n,f,T,w,i,a,l))}),r.foreach((y,w)=>{const T=er(t,y);Ov(e,sn(T))||(f=Pm(n,f,T,w,i,a,l))}),f}(n,e,w.path,w.children,r,i,a):((0,X.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||e.serverCache.isFiltered(),l=kv(n,e,w.path,w.children,r,i,f,a))}else if(t.type===Wi.ACK_USER_WRITE){const w=t;l=w.revert?function gS(n,e,t,r,i,a){let l;if(null!=Nv(r,t))return e;{const f=new bh(r,e,i),y=e.eventCache.getNode();let w;if(un(t)||".priority"===sn(t)){let T;if(e.serverCache.isFullyInitialized())T=Mv(r,Bc(e));else{const x=e.serverCache.getNode();(0,X.hu)(x instanceof Jt,"serverChildren would be complete if leaf node"),T=Nm(r,x)}w=n.filter.updateFullNode(y,T,a)}else{const T=sn(t);let x=Pv(r,T,e.serverCache);null==x&&e.serverCache.isCompleteForChild(T)&&(x=y.getImmediateChild(T)),w=null!=x?n.filter.updateChild(y,T,x,Rn(t),f,a):e.eventCache.getNode().hasChild(T)?n.filter.updateChild(y,T,Jt.EMPTY_NODE,Rn(t),f,a):y,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Mv(r,Bc(e)),l.isLeafNode()&&(w=n.filter.updateFullNode(w,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=Nv(r,_n()),bp(e,w,l,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function pS(n,e,t,r,i,a,l){if(null!=Nv(i,t))return e;const f=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if(un(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return xp(n,e,t,y.getNode().getChild(t),i,a,f,l);if(un(t)){let w=new Hn(null);return y.getNode().forEachChild(Ca,(T,x)=>{w=w.set(new bn(T),x)}),kv(n,e,t,w,i,a,f,l)}return e}{let w=new Hn(null);return r.foreach((T,x)=>{const F=er(t,T);y.isCompleteForPath(F)&&(w=w.set(T,y.getNode().getChild(F)))}),kv(n,e,t,w,i,a,f,l)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==Wi.LISTEN_COMPLETE)throw(0,X.g5)("Unknown operation type: "+t.type);l=function Mp(n,e,t,r,i){const a=e.serverCache;return kI(n,EI(e,a.getNode(),a.isFullyInitialized()||un(t),a.isFiltered()),t,r,Ap,i)}(n,e,t.path,r,a)}const y=a.getChanges();return function OI(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Rm(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(function mv(n){return{type:"value",snapshotNode:n}}(Rm(e)))}}(e,l,y),{viewCache:l,changes:y}}(n.processor_,i,e,t,r);return function kN(n,e){(0,X.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,X.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,X.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,function jI(n,e,t,r){return function _I(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function sS(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),Eh(n,i,"child_removed",e,r,t),Eh(n,i,"child_added",e,r,t),Eh(n,i,"child_moved",a,r,t),Eh(n,i,"child_changed",e,r,t),Eh(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,a.changes,a.viewCache.eventCache.getNode(),null)}let km,Fm;function Lv(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,X.hu)(null!=a,"SyncTree gave us an op for an invalid query."),Th(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(Th(l,e,t,r));return a}}function Hc(n,e){let t=null;for(const r of n.views.values())t=t||VI(r,e);return t}class qI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Hn(null),this.pendingWriteTree_=function xv(){return{visibleWrites:Lo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Uv(n,e,t,r,i){return function DI(n,e,t,r,i){(0,X.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Tp(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Ah(n,new ml({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function _l(n,e,t=!1){const r=function TI(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function SI(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,X.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const f=n.allWrites[l];f.visible&&(l>=t&&AI(f,r.path)?i=!1:io(r.path,f.path)&&(a=!0)),l--}return!!i&&(a?(function xI(n){n.visibleWrites=Sv(n.allWrites,MI,_n()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=II(n.visibleWrites,r.path):hi(r.children,y=>{n.visibleWrites=II(n.visibleWrites,er(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let a=new Hn(null);return null!=r.snap?a=a.set(_n(),!0):hi(r.children,l=>{a=a.set(new bn(l),!0)}),Ah(n,new wh(r.path,a,t))}return[]}function Lm(n,e,t){return Ah(n,new ml({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Bm(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,f)=>{const w=Hc(f,ki(l,e));if(w)return w});return Av(i,e,a,t,!0)}function Ah(n,e){return Bv(e,n.syncPointTree_,null,Sp(n.pendingWriteTree_,_n()))}function Bv(n,e,t,r){if(un(n.path))return YI(n,e,t,r);{const i=e.get(_n());null==t&&null!=i&&(t=Hc(i,_n()));let a=[];const l=sn(n.path),f=n.operationForChild(l),y=e.children.get(l);if(y&&f){const w=t?t.getImmediateChild(l):null,T=RI(r,l);a=a.concat(Bv(f,y,w,T))}return i&&(a=a.concat(Lv(i,n,r,t))),a}}function YI(n,e,t,r){const i=e.get(_n());null==t&&null!=i&&(t=Hc(i,_n()));let a=[];return e.children.inorderTraversal((l,f)=>{const y=t?t.getImmediateChild(l):null,w=RI(r,l),T=n.operationForChild(l);T&&(a=a.concat(YI(T,f,y,w)))}),i&&(a=a.concat(Lv(i,n,r,t))),a}function $m(n,e){return n.tagToQueryMap.get(e)}function jv(n){const e=n.indexOf("$");return(0,X.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new bn(n.substr(0,e))}}function $v(n,e,t){const r=n.syncPointTree_.get(e);return(0,X.hu)(r,"Missing sync point for query tag that we're tracking"),Lv(r,t,Sp(n.pendingWriteTree_,e),null)}class Hv{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Hv(t)}node(){return this.node_}}class Gv{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=er(this.path_,e);return new Gv(this.syncTree_,t)}node(){return Bm(this.syncTree_,this.path_)}}const RS=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},JI=function(n,e,t){return n&&"object"==typeof n?((0,X.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?NS(n[".sv"],e,t):"object"==typeof n[".sv"]?PS(n[".sv"],e):void(0,X.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},NS=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,X.hu)(!1,"Unexpected server value: "+n)},PS=function(n,e,t){n.hasOwnProperty("increment")||(0,X.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,X.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,X.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},XI=function(n,e,t,r){return Gm(e,new Gv(t,n),r)},Hm=function(n,e,t){return Gm(n,new Hv(e),t)};function Gm(n,e,t){const r=n.getPriority().val(),i=JI(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,f=JI(l.getValue(),e,t);return f!==l.getValue()||i!==l.getPriority().val()?new Fc(f,dr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new Fc(i))),l.forEachChild(wn,(f,y)=>{const w=Gm(y,e.getImmediateChild(f),t);w!==y&&(a=a.updateImmediateChild(f,w))}),a}}class zv{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function zm(n,e){let t=e instanceof bn?e:new bn(e),r=n,i=sn(t);for(;null!==i;){const a=(0,X.DV)(r.node.children,i)||{children:{},childCount:0};r=new zv(i,r,a),t=Rn(t),i=sn(t)}return r}function vl(n){return n.node.value}function Wv(n,e){n.node.value=e,qv(n)}function eC(n){return n.node.childCount>0}function xh(n,e){hi(n.node.children,(t,r)=>{e(new zv(t,n,r))})}function Wm(n,e,t,r){t&&!r&&e(n),xh(n,i=>{Wm(i,e,!0,r)}),t&&r&&e(n)}function Wc(n){return new bn(null===n.parent?n.name:Wc(n.parent)+"/"+n.name)}function qv(n){null!==n.parent&&function kS(n,e,t){const r=function OS(n){return void 0===vl(n)&&!eC(n)}(t),i=(0,X.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,qv(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,qv(n))}(n.parent,n.name,n)}const Zv=/[\[\].#$\/\u0000-\u001F\u007F]/,FS=/[\[\].#$\u0000-\u001F\u007F]/,qm=10485760,Eu=function(n){return"string"==typeof n&&0!==n.length&&!Zv.test(n)},qc=function(n,e,t){const r=t instanceof bn?new vm(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+mu(r));if("function"==typeof e)throw new Error(n+"contains a function "+mu(r)+" with contents = "+e.toString());if(cm(e))throw new Error(n+"contains "+e.toString()+" "+mu(r));if("string"==typeof e&&e.length>qm/3&&(0,X.ug)(e)>qm)throw new Error(n+"contains a string greater than "+qm+" utf8 bytes "+mu(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(hi(e,(l,f)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!Eu(l)))throw new Error(n+" contains an invalid key ("+l+") "+mu(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function wm(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,X.ug)(e),tI(n)})(r,l),qc(n,f,r),function iv(n){const e=n.parts_.pop();n.byteLength_-=(0,X.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+mu(r)+" in addition to actual children.")}},Qv=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Eu(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!FS.test(n)}(n)}(t))throw new Error((0,X.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class rC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Rs(n,e,t){(function Ym(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!gp(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function sC(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(oC(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>io(r,e)||io(e,r))}function oC(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Dc&&ei("event: "+t.toString()),fu(r)}}}const US="repo_interrupt",aC=25;class BS{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Sm(),this.transactionQueueTree_=new zv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function $S(n){const t=n.infoData_.getNode(new bn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Fp(n){return RS({timestamp:$S(n)})}function uC(n,e,t,r,i){n.dataUpdateCount++;const a=new bn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const y=(0,X.UI)(t,w=>dr(w));l=function SS(n,e,t,r){const i=$m(n,r);if(i){const a=jv(i),l=a.path,f=a.queryId,y=ki(l,e),w=Hn.fromObject(t);return $v(n,l,new Uc(xm(f),y,w))}return[]}(n.serverSyncTree_,a,y,i)}else{const y=dr(t);l=function Sh(n,e,t,r){const i=$m(n,r);if(null!=i){const a=jv(i),l=a.path,f=a.queryId,y=ki(l,e);return $v(n,l,new ml(xm(f),y,t))}return[]}(n.serverSyncTree_,a,y,i)}else if(r){const y=(0,X.UI)(t,w=>dr(w));l=function bS(n,e,t){const r=Hn.fromObject(t);return Ah(n,new Uc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,y)}else{const y=dr(t);l=Lm(n.serverSyncTree_,a,y)}let f=a;l.length>0&&(f=Rh(n,a)),Rs(n.eventQueue_,f,l)}function lC(n,e){Qm(n,"connected",e),!1===e&&function zS(n){Zc(n,"onDisconnectEvents");const e=Fp(n),t=Sm();Vc(n.onDisconnect_,_n(),(i,a)=>{const l=XI(i,a,n.serverSyncTree_,e);vh(t,i,l)});let r=[];Vc(t,_n(),(i,a)=>{r=r.concat(Lm(n.serverSyncTree_,i,a));const l=function ew(n,e){const t=Wc(Nh(n,e)),r=zm(n.transactionQueueTree_,e);return function tC(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Vp(n,i)}),Vp(n,r),Wm(r,i=>{Vp(n,i)}),t}(n,i);Rh(n,l)}),n.onDisconnect_=Sm(),Rs(n.eventQueue_,_n(),r)}(n)}function Qm(n,e,t){const r=new bn("/.info/"+e),i=dr(t);n.infoData_.updateSnapshot(r,i);const a=Lm(n.infoSyncTree_,r,i);Rs(n.eventQueue_,r,a)}function Jm(n){return n.nextWriteId_++}function Zc(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ei(t,...e)}function ey(n,e,t){return Bm(n.serverSyncTree_,e,t)||Jt.EMPTY_NODE}function ty(n,e=n.transactionQueueTree_){if(e||Ns(n,e),vl(e)){const t=gC(n,e);(0,X.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function qS(n,e,t){const r=t.map(w=>w.currentWriteId),i=ey(n,e,r);let a=i;const l=i.hash();for(let w=0;w<t.length;w++){const T=t[w];(0,X.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const x=ki(e,T.path);a=a.updateChild(x,T.currentOutputSnapshotRaw)}const f=a.val(!0),y=e;n.server_.put(y.toString(),f,w=>{Zc(n,"transaction put response",{path:y.toString(),status:w});let T=[];if("ok"===w){const x=[];for(let F=0;F<t.length;F++)t[F].status=2,T=T.concat(_l(n.serverSyncTree_,t[F].currentWriteId)),t[F].onComplete&&x.push(()=>t[F].onComplete(null,!0,t[F].currentOutputSnapshotResolved)),t[F].unwatcher();Ns(n,zm(n.transactionQueueTree_,e)),ty(n,n.transactionQueueTree_),Rs(n.eventQueue_,e,T);for(let F=0;F<x.length;F++)fu(x[F])}else{if("datastale"===w)for(let x=0;x<t.length;x++)t[x].status=3===t[x].status?4:0;else{vi("transaction at "+y.toString()+" failed: "+w);for(let x=0;x<t.length;x++)t[x].status=4,t[x].abortReason=w}Rh(n,e)}},l)}(n,Wc(e),t)}else eC(e)&&xh(e,t=>{ty(n,t)})}function Rh(n,e){const t=Nh(n,e),r=Wc(t);return function ZS(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const y=e[f],w=ki(t,y.path);let x,T=!1;if((0,X.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)T=!0,x=y.abortReason,i=i.concat(_l(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=aC)T=!0,x="maxretry",i=i.concat(_l(n.serverSyncTree_,y.currentWriteId,!0));else{const F=ey(n,y.path,l);y.currentInputSnapshot=F;const H=e[f].update(F.val());if(void 0!==H){qc("transaction failed: Data returned ",H,y.path);let ee=dr(H);"object"==typeof H&&null!=H&&(0,X.r3)(H,".priority")||(ee=ee.updatePriority(F.getPriority()));const Te=y.currentWriteId,mt=Fp(n),It=Hm(ee,F,mt);y.currentOutputSnapshotRaw=ee,y.currentOutputSnapshotResolved=It,y.currentWriteId=Jm(n),l.splice(l.indexOf(Te),1),i=i.concat(Uv(n.serverSyncTree_,y.path,It,y.currentWriteId,y.applyLocally)),i=i.concat(_l(n.serverSyncTree_,Te,!0))}else T=!0,x="nodata",i=i.concat(_l(n.serverSyncTree_,y.currentWriteId,!0))}Rs(n.eventQueue_,t,i),i=[],T&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===x?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(x),!1,null)))}Ns(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)fu(r[f]);ty(n,n.transactionQueueTree_)}(n,gC(n,t),r),r}function Nh(n,e){let t,r=n.transactionQueueTree_;for(t=sn(e);null!==t&&void 0===vl(r);)r=zm(r,t),t=sn(e=Rn(e));return r}function gC(n,e){const t=[];return ny(n,e,t),t.sort((r,i)=>r.order-i.order),t}function ny(n,e,t){const r=vl(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);xh(e,i=>{ny(n,i,t)})}function Ns(n,e){const t=vl(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Wv(e,t.length>0?t:void 0)}xh(e,r=>{Ns(n,r)})}function Vp(n,e){const t=vl(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,X.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,X.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(_l(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Wv(e,void 0):t.length=a+1,Rs(n.eventQueue_,Wc(e),i);for(let l=0;l<r.length;l++)fu(r[l])}}const tw=function(n,e){const t=YS(n),r=t.namespace;return"firebase.com"===t.domain&&wa(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&wa("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&vi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new gm(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new bn(t.pathString)}},YS=function(n){let e="",t="",r="",i="",a="",l=!0,f="https",y=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(f=n.substring(0,w-1),n=n.substring(w+2));let T=n.indexOf("/");-1===T&&(T=n.length);let x=n.indexOf("?");-1===x&&(x=n.length),e=n.substring(0,Math.min(T,x)),T<x&&(i=function Up(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(T,x)));const F=function KS(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):vi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,x)));w=e.indexOf(":"),w>=0?(l="https"===f||"wss"===f,y=parseInt(e.substring(w+1),10)):w=e.length;const H=e.slice(0,w);if("localhost"===H.toLowerCase())t="localhost";else if(H.split(".").length<=2)t=H;else{const ee=e.indexOf(".");r=e.substring(0,ee).toLowerCase(),t=e.substring(ee+1),a=r}"ns"in F&&(a=F.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:l,scheme:f,pathString:i,namespace:a}};class qi{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return un(this._path)?null:_m(this._path)}get ref(){return new oo(this._repo,this._path)}get _queryIdentifier(){const e=wv(this._queryParams),t=ro(e);return"{}"===t?"default":t}get _queryObject(){return wv(this._queryParams)}isEqual(e){if(!((e=(0,X.m9)(e))instanceof qi))return!1;const t=this._repo===e._repo,r=gp(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function XE(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class oo extends qi{constructor(e,t){super(e,t,new dI,!1)}get parent(){const e=eI(this._path);return null===e?null:new oo(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function HI(n){(0,X.hu)(!km,"__referenceConstructor has already been defined"),km=n})(oo),function CS(n){(0,X.hu)(!Fm,"__referenceConstructor has already been defined"),Fm=n}(oo);const bC="FIREBASE_DATABASE_EMULATOR_HOST",Wp={};let oA=!1;class TC{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function jS(n,e,t){if(n.stats_=Y_(n.repoInfo_),n.forceRestClient_||hm())n.server_=new Tm(n.repoInfo_,(r,i,a,l)=>{uC(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>lC(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,X.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new kc(n.repoInfo_,e,(r,i,a,l)=>{uC(n,r,i,a,l)},r=>{lC(n,r)},r=>{!function cC(n,e){hi(e,(t,r)=>{Qm(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function GT(n,e){const t=n.toString();return HE[t]||(HE[t]=e()),HE[t]}(n.repoInfo_,()=>new mI(n.stats_,n.server_)),n.infoData_=new aS,n.infoSyncTree_=new qI({startListening:(r,i,a,l)=>{let f=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(f=Lm(n.infoSyncTree_,r._path,y),setTimeout(()=>{l("ok")},0)),f},stopListening:()=>{}}),Qm(n,"connected",!1),n.serverSyncTree_=new qI({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(f,y)=>{const w=l(f,y);Rs(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new oo(this._repo,_n())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function uA(n,e){const t=Wp[e];(!t||t[n.key]!==n)&&wa(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function Xv(n){n.persistentConnection_&&n.persistentConnection_.interrupt(US)}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&wa("Cannot call "+e+" on a deleted database.")}}kc.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},kc.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function SC(n){(function OT(n){sp=n})(cs.SDK_VERSION),(0,cs._registerComponent)(new Cc.wA("database",(e,{instanceIdentifier:t})=>function YN(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||wa("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ei("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,w,l=tw(a,i),f=l.repoInfo;typeof process<"u"&&process.env&&(w=process.env[bC]),w?(y=!0,a=`http://${w}?ns=${f.namespace}`,l=tw(a,i),f=l.repoInfo):y=!l.repoInfo.secure;const T=i&&y?new fm(fm.OWNER):new G_(n.name,n.options,e);Qv("Invalid Firebase Database URL",l),un(l.path)||wa("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function lA(n,e,t,r){let i=Wp[e.name];i||(i={},Wp[e.name]=i);let a=i[n.toURLString()];return a&&wa("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new BS(n,oA,t,r),i[n.toURLString()]=a,a}(f,n,T,new NN(n.name,t));return new TC(x,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,cs.registerVersion)(am,"0.14.4",n),(0,cs.registerVersion)(am,"0.14.4","esm2017")}();var tt,tP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Sa={},xC=xC||{},Xt=tP||self;function uw(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function oy(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Lh="closure_uid_"+(1e9*Math.random()>>>0),rP=0;function MC(n,e,t){return n.call.apply(n.bind,arguments)}function ay(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function wi(n,e,t){return(wi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?MC:ay).apply(null,arguments)}function qp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ei(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function Aa(){this.s=this.s,this.o=this.o}Aa.prototype.s=!1,Aa.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function nP(n){Object.prototype.hasOwnProperty.call(n,Lh)&&n[Lh]||(n[Lh]=++rP)}(this)},Aa.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const NC=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function PC(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function vA(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(uw(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function Li(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Li.prototype.h=function(){this.defaultPrevented=!0};var wA=function(){if(!Xt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Xt.addEventListener("test",()=>{},e),Xt.removeEventListener("test",()=>{},e)}catch{}return n}();function El(n){return/^[\s\xa0]*$/.test(n)}function uy(){var n=Xt.navigator;return n&&(n=n.userAgent)?n:""}function Cu(n){return-1!=uy().indexOf(n)}function OC(n){return OC[" "](n),n}OC[" "]=function(){};var UC,n,EA=Cu("Opera"),Vh=Cu("Trident")||Cu("MSIE"),kC=Cu("Edge"),FC=kC||Vh,LC=Cu("Gecko")&&!(-1!=uy().toLowerCase().indexOf("webkit")&&!Cu("Edge"))&&!(Cu("Trident")||Cu("MSIE"))&&!Cu("Edge"),VC=-1!=uy().toLowerCase().indexOf("webkit")&&!Cu("Edge");function lw(){var n=Xt.document;return n?n.documentMode:void 0}e:{var Ps="",cw=(n=uy(),LC?/rv:([^\);]+)(\)|;)/.exec(n):kC?/Edge\/([\d\.]+)/.exec(n):Vh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):VC?/WebKit\/(\S+)/.exec(n):EA?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(cw&&(Ps=cw?cw[1]:""),Vh){var Zp=lw();if(null!=Zp&&Zp>parseFloat(Ps)){UC=String(Zp);break e}}UC=Ps}var ao=Xt.document&&Vh&&(lw()||parseInt(UC,10))||void 0;function Kp(n,e){if(Li.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(LC){e:{try{OC(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:hw[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Kp.$.h.call(this)}}Ei(Kp,Li);var hw={2:"touch",3:"pen",4:"mouse"};Kp.prototype.h=function(){Kp.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Yp="closure_listenable_"+(1e6*Math.random()|0),CA=0;function fw(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++CA,this.fa=this.ia=!1}function Qp(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function ly(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function pw(n){const e={};for(const t in n)e[t]=n[t];return e}const gw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function BC(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<gw.length;a++)t=gw[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Jp(n){this.src=n,this.g={},this.h=0}function mw(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=NC(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Qp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Xp(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}Jp.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Xp(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new fw(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var Bo="closure_lm_"+(1e6*Math.random()|0),xa={};function yw(n,e,t,r,i){if(r&&r.once)return $C(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)yw(n,e[a],t,r,i);return null}return t=GC(t),n&&n[Yp]?n.O(e,t,oy(r)?!!r.capture:!!r,i):cy(n,e,t,!1,r,i)}function cy(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=oy(i)?!!i.capture:!!i,f=vw(n);if(f||(n[Bo]=f=new Jp(n)),(t=f.add(e,t,r,l,a)).proxy)return t;if(r=function jC(){const e=TA;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)wA||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(HC(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function $C(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)$C(n,e[a],t,r,i);return null}return t=GC(t),n&&n[Yp]?n.P(e,t,oy(r)?!!r.capture:!!r,i):cy(n,e,t,!0,r,i)}function bA(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)bA(n,e[a],t,r,i);else r=oy(r)?!!r.capture:!!r,t=GC(t),n&&n[Yp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Xp(a=n.g[e],t,r,i))&&(Qp(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=vw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Xp(e,t,r,i)),(t=-1<n?e[n]:null)&&_w(t))}function _w(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Yp])mw(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(HC(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=vw(e))?(mw(t,n),0==t.h&&(t.src=null,e[Bo]=null)):Qp(n)}}}function HC(n){return n in xa?xa[n]:xa[n]="on"+n}function TA(n,e){if(n.fa)n=!0;else{e=new Kp(e,this);var t=n.listener,r=n.la||n.src;n.ia&&_w(n),n=t.call(r,e)}return n}function vw(n){return(n=n[Bo])instanceof Jp?n:null}var dy="__closure_events_fn_"+(1e9*Math.random()>>>0);function GC(n){return"function"==typeof n?n:(n[dy]||(n[dy]=function(e){return n.handleEvent(e)}),n[dy])}function ti(){Aa.call(this),this.i=new Jp(this),this.S=this,this.J=null}function Ii(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Li(e,n);else if(e instanceof Li)e.target=e.target||n;else{var i=e;BC(e=new Li(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=eg(l,r,!0,e)&&i}if(i=eg(l=e.g=n,r,!0,e)&&i,i=eg(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=eg(l=e.g=t[a],r,!1,e)&&i}function eg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.fa&&l.capture==t){var f=l.listener,y=l.la||l.src;l.ia&&mw(n.i,l),i=!1!==f.call(y,r)&&i}}return i&&!r.defaultPrevented}Ei(ti,Aa),ti.prototype[Yp]=!0,ti.prototype.removeEventListener=function(n,e,t,r){bA(this,n,e,t,r)},ti.prototype.N=function(){if(ti.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Qp(t[r]);delete n.g[e],n.h--}}this.J=null},ti.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ti.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var zC=Xt.JSON.stringify;function WC(){var n=Iw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Ew=new class ww{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new ZC,n=>n.reset());class ZC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function KC(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function hy(n){Xt.setTimeout(()=>{throw n},0)}let Il,Uh=!1,Iw=new class qC{constructor(){this.h=this.g=null}add(e,t){const r=Ew.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},YC=()=>{const n=Xt.Promise.resolve(void 0);Il=()=>{n.then(sP)}};var sP=()=>{for(var n;n=WC();){try{n.h.call(n.g)}catch(t){hy(t)}var e=Ew;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Uh=!1};function Cw(n,e){ti.call(this),this.h=n||1,this.g=e||Xt,this.j=wi(this.qb,this),this.l=Date.now()}function QC(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function fy(n,e,t){if("function"==typeof n)t&&(n=wi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=wi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Xt.setTimeout(n,e||0)}function JC(n){n.g=fy(()=>{n.g=null,n.i&&(n.i=!1,JC(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ei(Cw,ti),(tt=Cw.prototype).ga=!1,tt.T=null,tt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ii(this,"tick"),this.ga&&(QC(this),this.start()))}},tt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tt.N=function(){Cw.$.N.call(this),QC(this),delete this.g};class SA extends Aa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:JC(this)}N(){super.N(),this.g&&(Xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tg(n){Aa.call(this),this.h=n,this.g={}}Ei(tg,Aa);var AA=[];function xA(n,e,t,r){Array.isArray(t)||(t&&(AA[0]=t.toString()),t=AA);for(var i=0;i<t.length;i++){var a=yw(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function MA(n){ly(n.g,function(e,t){this.g.hasOwnProperty(t)&&_w(e)},n),n.g={}}function Dw(){this.g=!0}function Du(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function PA(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return zC(t)}catch{return e}}(n,t)+(r?" "+r:"")})}tg.prototype.N=function(){tg.$.N.call(this),MA(this)},tg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Dw.prototype.Ea=function(){this.g=!1},Dw.prototype.info=function(){};var Cl={},Dl=null;function ng(){return Dl=Dl||new ti}function py(n){Li.call(this,Cl.Ta,n)}function Kc(n){const e=ng();Ii(e,new py(e))}function XC(n,e){Li.call(this,Cl.STAT_EVENT,n),this.stat=e}function Ci(n){const e=ng();Ii(e,new XC(e,n))}function gy(n,e){Li.call(this,Cl.Ua,n),this.size=e}function bl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Xt.setTimeout(function(){n()},e)}Cl.Ta="serverreachability",Ei(py,Li),Cl.STAT_EVENT="statevent",Ei(XC,Li),Cl.Ua="timingevent",Ei(gy,Li);var bw={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},OA={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function eD(){}function Tw(){}eD.prototype.h=null;var xw,rg={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Sw(){Li.call(this,"d")}function Aw(){Li.call(this,"c")}function ig(){}function Bh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new tg(this),this.P=FA,this.V=new Cw(n=FC?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Mw}function Mw(){this.i=null,this.g="",this.h=!1}Ei(Sw,Li),Ei(Aw,Li),Ei(ig,eD),ig.prototype.g=function(){return new XMLHttpRequest},ig.prototype.i=function(){return{}},xw=new ig;var FA=45e3,Rw={},sg={};function og(n,e,t){n.L=1,n.v=s(Tl(e)),n.s=t,n.S=!0,LA(n,null)}function LA(n,e){n.G=Date.now(),ag(n),n.A=Tl(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),ne(t.i,"t",r),n.C=0,t=n.l.J,n.h=new Mw,n.g=AP(n.l,t?e:null,!n.s),0<n.O&&(n.M=new SA(wi(n.Pa,n,n.g),n.O)),xA(n.U,n.g,"readystatechange",n.nb),e=n.I?pw(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Kc(),function oP(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",f=a.split("&"),y=0;y<f.length;y++){var w=f[y].split("=");if(1<w.length){var T=w[0];w=w[1];var x=T.split("_");l=2<=x.length&&"type"==x[1]?l+(T+"=")+w+"&":l+(T+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Nw(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function my(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=VA(n,t),i==sg){4==e&&(n.o=4,Ci(14),r=!1),Du(n.j,n.m,null,"[Incomplete Response]");break}if(i==Rw){n.o=4,Ci(15),Du(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Du(n.j,n.m,i,null),Ow(n,i)}Nw(n)&&i!=sg&&i!=Rw&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ci(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),KA(e),e.M=!0,Ci(11))):(Du(n.j,n.m,t,"[Invalid Chunked Response]"),Yc(n),ug(n))}function VA(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?sg:(t=Number(e.substring(t,r)),isNaN(t)?Rw:(r+=1)+t>e.length?sg:(e=e.slice(r,r+t),n.C=r+t,e))}function ag(n){n.Y=Date.now()+n.P,UA(n,n.P)}function UA(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=bl(wi(n.lb,n),e)}function Pw(n){n.B&&(Xt.clearTimeout(n.B),n.B=null)}function ug(n){0==n.l.H||n.J||DP(n.l,n)}function Yc(n){Pw(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,QC(n.V),MA(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Ow(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Gn(t.i,n)))if(!n.K&&Gn(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;oD(t),iD(t)}ZA(t),Ci(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=bl(wi(t.ib,t),6e3));if(1>=zt(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else lg(t,11)}else if((n.K||t.g==n)&&oD(t),!El(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.V=w[0],w=w[1],2==t.H)if("c"==w[0]){t.K=w[1],t.pa=w[2];const T=w[3];null!=T&&(t.ra=T,t.l.info("VER="+t.ra));const x=w[4];null!=x&&(t.Ga=x,t.l.info("SVER="+t.Ga));const F=w[5];null!=F&&"number"==typeof F&&0<F&&(t.L=r=1.5*F,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const H=n.g;if(H){const ee=H.g?H.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ee){var a=r.i;a.g||-1==ee.indexOf("spdy")&&-1==ee.indexOf("quic")&&-1==ee.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(hr(a,a.h),a.h=null))}if(r.F){const ve=H.g?H.g.getResponseHeader("X-HTTP-Session-Id"):null;ve&&(r.Da=ve,ir(r.I,r.F,ve))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=SP(r,r.J?r.pa:null,r.Y),l.K){GA(r.i,l);var f=l,y=r.L;y&&f.setTimeout(y),f.B&&(Pw(f),ag(f)),r.g=l}else IP(r);0<t.j.length&&sD(t)}else"stop"!=w[0]&&"close"!=w[0]||lg(t,7);else 3==t.H&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?lg(t,7):qA(t):"noop"!=w[0]&&t.h&&t.h.Aa(w),t.A=0)}Kc()}catch{}}function BA(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(uw(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function uP(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(uw(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function aP(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(uw(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(tt=Bh.prototype).setTimeout=function(n){this.P=n},tt.nb=function(n){n=n.target;const e=this.M;e&&3==Sl(n)?e.l():this.Pa(n)},tt.Pa=function(n){try{if(n==this.g)e:{const T=Sl(this.g);var e=this.g.Ia();if(this.g.da(),!(3>T)&&(3!=T||FC||this.g&&(this.h.h||this.g.ja()||mP(this.g)))){this.J||4!=T||7==e||Kc(),Pw(this);var t=this.g.da();this.ca=t;t:if(Nw(this)){var r=mP(this.g);n="";var i=r.length,a=4==Sl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Yc(this),ug(this);var l="";break t}this.h.i=new Xt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function RA(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.W,T,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,y=this.g;if((f=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!El(f)){var w=f;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Ci(12),Yc(this),ug(this);break e}Du(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ow(this,t)}this.S?(my(this,T,l),FC&&this.i&&3==T&&(xA(this.U,this.V,"tick",this.mb),this.V.start())):(Du(this.j,this.m,l,null),Ow(this,l)),4==T&&Yc(this),this.i&&!this.J&&(4==T?DP(this.l,this):(this.i=!1,ag(this)))}else(function c2(n){const e={};n=(n.g&&2<=Sl(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(El(n[r]))continue;var t=KC(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function DA(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ci(12)):(this.o=0,Ci(13)),Yc(this),ug(this)}}}catch{}},tt.mb=function(){if(this.g){var n=Sl(this.g),e=this.g.ja();this.C<e.length&&(Pw(this),my(this,n,e),this.i&&4!=n&&ag(this))}},tt.cancel=function(){this.J=!0,Yc(this)},tt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function NA(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Kc(),Ci(17)),Yc(this),this.o=2,ug(this)):UA(this,this.Y-n)};var jA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jh(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof jh){this.h=n.h,kw(this,n.j),this.s=n.s,this.g=n.g,Fw(this,n.m),this.l=n.l;var e=n.i,t=new A;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),HA(this,t),this.o=n.o}else n&&(e=String(n).match(jA))?(this.h=!1,kw(this,e[1]||"",!0),this.s=o(e[2]||""),this.g=o(e[3]||"",!0),Fw(this,e[4]),this.l=o(e[5]||"",!0),HA(this,e[6]||"",!0),this.o=o(e[7]||"")):(this.h=!1,this.i=new A(null,this.h))}function Tl(n){return new jh(n)}function kw(n,e,t){n.j=t?o(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Fw(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function HA(n,e,t){e instanceof A?(n.i=e,function Ge(n,e){e&&!n.j&&(R(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(B(this,r),ne(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=u(e,C)),n.i=new A(e,n.h))}function ir(n,e,t){n.i.set(e,t)}function s(n){return ir(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function o(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function u(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,c),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function c(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}jh.prototype.toString=function(){var n=[],e=this.j;e&&n.push(u(e,d,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(u(e,d,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(u(t,"/"==t.charAt(0)?_:g,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",u(t,b)),n.join("")};var d=/[#\/\?@]/g,g=/[#\?:]/g,_=/[#\?]/g,C=/[#\?@]/g,b=/#/g;function A(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function R(n){n.g||(n.g=new Map,n.h=0,n.i&&function $A(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function B(n,e){R(n),e=Ee(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function K(n,e){return R(n),e=Ee(n,e),n.g.has(e)}function ne(n,e,t){B(n,e),0<t.length&&(n.i=null,n.g.set(Ee(n,e),PC(t)),n.h+=t.length)}function Ee(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ht(n){this.l=n||Ot,n=Xt.PerformanceNavigationTiming?0<(n=Xt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Xt.g&&Xt.g.Ka&&Xt.g.Ka()&&Xt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(tt=A.prototype).add=function(n,e){R(this),this.i=null,n=Ee(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},tt.forEach=function(n,e){R(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},tt.ta=function(){R(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},tt.Z=function(n){R(this);let e=[];if("string"==typeof n)K(this,n)&&(e=e.concat(this.g.get(Ee(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},tt.set=function(n,e){return R(this),this.i=null,K(this,n=Ee(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},tt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var Ot=10;function Oe(n){return!!n.h||!!n.g&&n.g.size>=n.j}function zt(n){return n.h?1:n.g?n.g.size:0}function Gn(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function hr(n,e){n.g?n.g.add(e):n.h=e}function GA(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function lP(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return PC(n.i)}ht.prototype.cancel=function(){if(this.i=lP(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var n2=class{stringify(n){return Xt.JSON.stringify(n,void 0)}parse(n){return Xt.JSON.parse(n,void 0)}};function r2(){this.g=new n2}function i2(n,e,t){const r=t||"";try{BA(n,function(i,a){let l=i;oy(i)&&(l=zC(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function tD(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Lw(n){this.l=n.fc||null,this.j=n.ob||!1}function nD(n,e){ti.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=zA,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ei(Lw,eD),Lw.prototype.g=function(){return new nD(this.l,this.j)},Lw.prototype.i=function(n){return function(){return n}}({}),Ei(nD,ti);var zA=0;function cP(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Vw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Uw(n)}function Uw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(tt=nD.prototype).open=function(n,e){if(this.readyState!=zA)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Uw(this)},tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Xt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vw(this)),this.readyState=zA},tt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Uw(this)),this.g&&(this.readyState=3,Uw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Xt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cP(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},tt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Vw(this):Uw(this),3==this.readyState&&cP(this)}},tt.Za=function(n){this.g&&(this.response=this.responseText=n,Vw(this))},tt.Ya=function(n){this.g&&(this.response=n,Vw(this))},tt.ka=function(){this.g&&Vw(this)},tt.setRequestHeader=function(n,e){this.v.append(n,e)},tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(nD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var o2=Xt.JSON.parse;function Hr(n){ti.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=dP,this.L=this.M=!1}Ei(Hr,ti);var dP="",a2=/^https?$/i,u2=["POST","PUT"];function hP(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,fP(n),rD(n)}function fP(n){n.F||(n.F=!0,Ii(n,"complete"),Ii(n,"error"))}function pP(n){if(n.h&&typeof xC<"u"&&(!n.C[1]||4!=Sl(n)||2!=n.da()))if(n.v&&4==Sl(n))fy(n.La,0,n);else if(Ii(n,"readystatechange"),4==Sl(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var i=String(n.I).match(jA)[1]||null;!i&&Xt.self&&Xt.self.location&&(i=Xt.self.location.protocol.slice(0,-1)),r=!a2.test(i?i.toLowerCase():"")}t=r}if(t)Ii(n,"complete"),Ii(n,"success");else{n.m=6;try{var a=2<Sl(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",fP(n)}}finally{rD(n)}}}function rD(n,e){if(n.g){gP(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Ii(n,"ready");try{t.onreadystatechange=r}catch{}}}function gP(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Xt.clearTimeout(n.A),n.A=null)}function Sl(n){return n.g?n.g.readyState:0}function mP(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case dP:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function yP(n){let e="";return ly(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function WA(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=yP(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ir(n,e,t))}function Bw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function _P(n){this.Ga=0,this.j=[],this.l=new Dw,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Bw("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Bw("baseRetryDelayMs",5e3,n),this.hb=Bw("retryDelaySeedMs",1e4,n),this.eb=Bw("forwardChannelMaxRetries",2,n),this.xa=Bw("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new ht(n&&n.concurrentRequestLimit),this.Ja=new r2,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function qA(n){if(vP(n),3==n.H){var e=n.W++,t=Tl(n.I);if(ir(t,"SID",n.K),ir(t,"RID",e),ir(t,"TYPE","terminate"),jw(n,t),(e=new Bh(n,n.l,e)).L=2,e.v=s(Tl(t)),t=!1,Xt.navigator&&Xt.navigator.sendBeacon)try{t=Xt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Xt.Image&&((new Image).src=e.v,t=!0),t||(e.g=AP(e.l,null),e.g.ha(e.v)),e.G=Date.now(),ag(e)}TP(n)}function iD(n){n.g&&(KA(n),n.g.cancel(),n.g=null)}function vP(n){iD(n),n.u&&(Xt.clearTimeout(n.u),n.u=null),oD(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Xt.clearTimeout(n.m),n.m=null)}function sD(n){if(!Oe(n.i)&&!n.m){n.m=!0;var e=n.Na;Il||YC(),Uh||(Il(),Uh=!0),Iw.add(e,n),n.C=0}}function wP(n,e){var t;t=e?e.m:n.W++;const r=Tl(n.I);ir(r,"SID",n.K),ir(r,"RID",t),ir(r,"AID",n.V),jw(n,r),n.o&&n.s&&WA(r,n.o,n.s),t=new Bh(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=EP(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),hr(n.i,t),og(t,r,e)}function jw(n,e){n.na&&ly(n.na,function(t,r){ir(e,r,t)}),n.h&&BA({},function(t,r){ir(e,r,t)})}function EP(n,e,t){t=Math.min(n.j.length,t);var r=n.h?wi(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].g,l.push("ofs="+a)):a=0:l.push("ofs="+a);let f=!0;for(let y=0;y<t;y++){let w=i[y].g;const T=i[y].map;if(w-=a,0>w)a=Math.max(0,i[y].g-100),f=!1;else try{i2(T,l,"req"+w+"_")}catch{r&&r(T)}}if(f){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function IP(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Il||YC(),Uh||(Il(),Uh=!0),Iw.add(e,n),n.A=0}}function ZA(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=bl(wi(n.Ma,n),bP(n,n.A)),n.A++,0))}function KA(n){null!=n.B&&(Xt.clearTimeout(n.B),n.B=null)}function CP(n){n.g=new Bh(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Tl(n.wa);ir(e,"RID","rpc"),ir(e,"SID",n.K),ir(e,"AID",n.V),ir(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&ir(e,"TO",n.qa),ir(e,"TYPE","xmlhttp"),jw(n,e),n.o&&n.s&&WA(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=s(Tl(e)),t.s=null,t.S=!0,LA(t,n)}function oD(n){null!=n.v&&(Xt.clearTimeout(n.v),n.v=null)}function DP(n,e){var t=null;if(n.g==e){oD(n),KA(n),n.g=null;var r=2}else{if(!Gn(n.i,e))return;t=e.F,GA(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Ii(r=ng(),new gy(r,t)),sD(n)}else IP(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function d2(n,e){return!(zt(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=bl(wi(n.Na,n,e),bP(n,n.C)),n.C++,0)))}(n,e)||2==r&&ZA(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:lg(n,5);break;case 4:lg(n,10);break;case 3:lg(n,6);break;default:lg(n,2)}}function bP(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function lg(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=wi(n.pb,n);t||(t=new jh("//www.google.com/images/cleardot.gif"),Xt.location&&"http"==Xt.location.protocol||kw(t,"https"),s(t)),function s2(n,e){const t=new Dw;if(Xt.Image){const r=new Image;r.onload=qp(tD,t,r,"TestLoadImage: loaded",!0,e),r.onerror=qp(tD,t,r,"TestLoadImage: error",!1,e),r.onabort=qp(tD,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=qp(tD,t,r,"TestLoadImage: timeout",!1,e),Xt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ci(2);n.H=0,n.h&&n.h.za(e),TP(n),vP(n)}function TP(n){if(n.H=0,n.ma=[],n.h){const e=lP(n.i);(0!=e.length||0!=n.j.length)&&(vA(n.ma,e),vA(n.ma,n.j),n.i.i.length=0,PC(n.j),n.j.length=0),n.h.ya()}}function SP(n,e,t){var r=t instanceof jh?Tl(t):new jh(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Fw(r,r.m);else{var i=Xt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new jh(null);r&&kw(a,r),e&&(a.g=e),i&&Fw(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&ir(r,t,e),ir(r,"VER",n.ra),jw(n,r),r}function AP(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Hr(t&&n.Ha&&!n.va?new Lw({ob:!0}):n.va)).Oa(n.J),e}function xP(){}function aD(){if(Vh&&!(10<=Number(ao)))throw Error("Environmental error: no available transport.")}function jo(n,e){ti.call(this),this.g=new _P(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!El(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!El(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new yy(this)}function MP(n){Sw.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function RP(){Aw.call(this),this.status=1}function yy(n){this.g=n}function bu(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function YA(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],l=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;l=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(l<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((a=(e=t+((l=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=a+((l=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function Fn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(tt=Hr.prototype).Oa=function(n){this.M=n},tt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():xw.g(),this.C=function kA(n){return n.h||(n.h=n.i())}(this.u?this.u:xw),this.g.onreadystatechange=wi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void hP(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Xt.FormData&&n instanceof Xt.FormData,!(0<=NC(u2,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{gP(this),0<this.B&&((this.L=function l2(n){return Vh&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wi(this.ua,this)):this.A=fy(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){hP(this,a)}},tt.ua=function(){typeof xC<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ii(this,"timeout"),this.abort(8))},tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ii(this,"complete"),Ii(this,"abort"),rD(this))},tt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),rD(this,!0)),Hr.$.N.call(this)},tt.La=function(){this.s||(this.G||this.v||this.l?pP(this):this.kb())},tt.kb=function(){pP(this)},tt.isActive=function(){return!!this.g},tt.da=function(){try{return 2<Sl(this)?this.g.status:-1}catch{return-1}},tt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},tt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),o2(e)}},tt.Ia=function(){return this.m},tt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(tt=_P.prototype).ra=8,tt.H=1,tt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Bh(this,this.l,n);let a=this.s;if(this.U&&(a?(a=pw(a),BC(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=EP(this,i,e),ir(t=Tl(this.I),"RID",n),ir(t,"CVER",22),this.F&&ir(t,"X-HTTP-Session-Id",this.F),jw(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(yP(a)))+"&"+e:this.o&&WA(t,this.o,a)),hr(this.i,i),this.bb&&ir(t,"TYPE","init"),this.P?(ir(t,"$req",e),ir(t,"SID","null"),i.aa=!0,og(i,t,null)):og(i,t,e),this.H=2}}else 3==this.H&&(n?wP(this,n):0==this.j.length||Oe(this.i)||wP(this))},tt.Ma=function(){if(this.u=null,CP(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=bl(wi(this.jb,this),n)}},tt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ci(10),iD(this),CP(this))},tt.ib=function(){null!=this.v&&(this.v=null,iD(this),ZA(this),Ci(19))},tt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ci(2)):(this.l.info("Failed to ping google.com"),Ci(1))},tt.isActive=function(){return!!this.h&&this.h.isActive(this)},(tt=xP.prototype).Ba=function(){},tt.Aa=function(){},tt.za=function(){},tt.ya=function(){},tt.isActive=function(){return!0},tt.Va=function(){},aD.prototype.g=function(n,e){return new jo(n,e)},Ei(jo,ti),jo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ci(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=SP(n,null,n.Y),sD(n)},jo.prototype.close=function(){qA(this.g)},jo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=zC(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&sD(e)},jo.prototype.N=function(){this.g.h=null,delete this.j,qA(this.g),delete this.g,jo.$.N.call(this)},Ei(MP,Sw),Ei(RP,Aw),Ei(yy,xP),yy.prototype.Ba=function(){Ii(this.g,"a")},yy.prototype.Aa=function(n){Ii(this.g,new MP(n))},yy.prototype.za=function(n){Ii(this.g,new RP)},yy.prototype.ya=function(){Ii(this.g,"b")},Ei(bu,function h2(){this.blockSize=-1}),bu.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},bu.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)YA(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){YA(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){YA(this,r),i=0;break}}this.h=i,this.i+=e},bu.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var f2={};function QA(n){return-128<=n&&128>n?function iP(n,e){var t=f2;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Fn([0|e],0>e?-1:0)}):new Fn([0|n],0>n?-1:0)}function Al(n){if(isNaN(n)||!isFinite(n))return _y;if(0>n)return Zi(Al(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=JA;return new Fn(e,0)}var JA=4294967296,_y=QA(0),XA=QA(1),PP=QA(16777216);function Qc(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Ma(n){return-1==n.h}function Zi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Fn(t,~n.h).add(XA)}function uD(n,e){return n.add(Zi(e))}function lD(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function $w(n,e){this.g=n,this.h=e}function cD(n,e){if(Qc(e))throw Error("division by zero");if(Qc(n))return new $w(_y,_y);if(Ma(n))return e=cD(Zi(n),e),new $w(Zi(e.g),Zi(e.h));if(Ma(e))return e=cD(n,Zi(e)),new $w(Zi(e.g),e.h);if(30<n.g.length){if(Ma(n)||Ma(e))throw Error("slowDivide_ only works with positive integers.");for(var t=XA,r=e;0>=r.X(n);)t=OP(t),r=OP(r);var i=vy(t,1),a=vy(r,1);for(r=vy(r,2),t=vy(t,2);!Qc(r);){var l=a.add(r);0>=l.X(n)&&(i=i.add(t),a=l),r=vy(r,1),t=vy(t,1)}return e=uD(n,i.R(e)),new $w(i,e)}for(i=_y;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(a=Al(t)).R(e);Ma(l)||0<l.X(n);)l=(a=Al(t-=r)).R(e);Qc(a)&&(a=XA),i=i.add(a),n=uD(n,l)}return new $w(i,n)}function OP(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Fn(t,n.h)}function vy(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new Fn(i,n.h)}(tt=Fn.prototype).ea=function(){if(Ma(this))return-Zi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:JA+r)*e,e*=JA}return n},tt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Qc(this))return"0";if(Ma(this))return"-"+Zi(this).toString(n);for(var e=Al(Math.pow(n,6)),t=this,r="";;){var i=cD(t,e).g,a=((0<(t=uD(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Qc(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},tt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},tt.X=function(n){return Ma(n=uD(this,n))?-1:Qc(n)?0:1},tt.abs=function(){return Ma(this)?Zi(this):this},tt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),l=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(a&=65535)}return new Fn(t,-2147483648&t[t.length-1]?-1:0)},tt.R=function(n){if(Qc(this)||Qc(n))return _y;if(Ma(this))return Ma(n)?Zi(this).R(Zi(n)):Zi(Zi(this).R(n));if(Ma(n))return Zi(this.R(Zi(n)));if(0>this.X(PP)&&0>n.X(PP))return Al(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,l=65535&this.D(r),f=n.D(i)>>>16,y=65535&n.D(i);t[2*r+2*i]+=l*y,lD(t,2*r+2*i),t[2*r+2*i+1]+=a*y,lD(t,2*r+2*i+1),t[2*r+2*i+1]+=l*f,lD(t,2*r+2*i+1),t[2*r+2*i+2]+=a*f,lD(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Fn(t,0)},tt.gb=function(n){return cD(this,n).h},tt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Fn(t,this.h&n.h)},tt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Fn(t,this.h|n.h)},tt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Fn(t,this.h^n.h)},aD.prototype.createWebChannel=aD.prototype.g,jo.prototype.send=jo.prototype.u,jo.prototype.open=jo.prototype.m,jo.prototype.close=jo.prototype.close,bw.NO_ERROR=0,bw.TIMEOUT=8,bw.HTTP_ERROR=6,OA.COMPLETE="complete",Tw.EventType=rg,rg.OPEN="a",rg.CLOSE="b",rg.ERROR="c",rg.MESSAGE="d",ti.prototype.listen=ti.prototype.O,Hr.prototype.listenOnce=Hr.prototype.P,Hr.prototype.getLastError=Hr.prototype.Sa,Hr.prototype.getLastErrorCode=Hr.prototype.Ia,Hr.prototype.getStatus=Hr.prototype.da,Hr.prototype.getResponseJson=Hr.prototype.Wa,Hr.prototype.getResponseText=Hr.prototype.ja,Hr.prototype.send=Hr.prototype.ha,Hr.prototype.setWithCredentials=Hr.prototype.Oa,bu.prototype.digest=bu.prototype.l,bu.prototype.reset=bu.prototype.reset,bu.prototype.update=bu.prototype.j,Fn.prototype.add=Fn.prototype.add,Fn.prototype.multiply=Fn.prototype.R,Fn.prototype.modulo=Fn.prototype.gb,Fn.prototype.compare=Fn.prototype.X,Fn.prototype.toNumber=Fn.prototype.ea,Fn.prototype.toString=Fn.prototype.toString,Fn.prototype.getBits=Fn.prototype.D,Fn.fromNumber=Al,Fn.fromString=function NP(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Zi(NP(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Al(Math.pow(e,8)),r=_y,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+a),e);8>a?(a=Al(Math.pow(e,a)),r=r.R(a).add(Al(l))):r=(r=r.R(t)).add(Al(l))}return r};var p2=Sa.createWebChannelTransport=function(){return new aD},g2=Sa.getStatEventTarget=function(){return ng()},ex=Sa.ErrorCode=bw,m2=Sa.EventType=OA,y2=Sa.Event=Cl,kP=Sa.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},_2=Sa.FetchXmlHttpFactory=Lw,dD=Sa.WebChannel=Tw,v2=Sa.XhrIo=Hr,w2=Sa.Md5=bu,wy=Sa.Integer=Fn;const FP="@firebase/firestore";class Vi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vi.UNAUTHENTICATED=new Vi(null),Vi.GOOGLE_CREDENTIALS=new Vi("google-credentials-uid"),Vi.FIRST_PARTY=new Vi("first-party-uid"),Vi.MOCK_USER=new Vi("mock-user");let Ey="9.23.0";const $h=new Oo.Yd("@firebase/firestore");function tx(){return $h.logLevel}function Ue(n,...e){if($h.logLevel<=Oo.in.DEBUG){const t=e.map(nx);$h.debug(`Firestore (${Ey}): ${n}`,...t)}}function ni(n,...e){if($h.logLevel<=Oo.in.ERROR){const t=e.map(nx);$h.error(`Firestore (${Ey}): ${n}`,...t)}}function Ra(n,...e){if($h.logLevel<=Oo.in.WARN){const t=e.map(nx);$h.warn(`Firestore (${Ey}): ${n}`,...t)}}function nx(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ct(n="Unexpected state"){const e=`FIRESTORE (${Ey}) INTERNAL ASSERTION FAILED: `+n;throw ni(e),new Error(e)}function Et(n,e){n||ct()}function et(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends X.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Di{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class LP{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class C2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Vi.UNAUTHENTICATED))}shutdown(){}}class D2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class b2{constructor(e){this.t=e,this.currentUser=Vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let l=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Di,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const w=l;e.enqueueRetryable((0,Ie.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},y=w=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(w=>y(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?y(w):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Di)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et("string"==typeof r.accessToken),new LP(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Et(null===e||"string"==typeof e),new Vi(e)}}class T2{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Vi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class S2{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new T2(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Vi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class VP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class A2{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.T;return this.T=a.token,Ue("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Et("string"==typeof t.token),this.T=t.token,new VP(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function x2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class UP{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=x2(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function en(n,e){return n<e?-1:n>e?1:0}function Iy(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function BP(n){return n+"\0"}class Ar{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ar.fromMillis(Date.now())}static fromDate(e){return Ar.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ar(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?en(this.nanoseconds,e.nanoseconds):en(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new Ar(0,0))}static max(){return new Dt(new Ar(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Hw{constructor(e,t,r){void 0===t?t=0:t>e.length&&ct(),void 0===r?r=e.length-t:r>e.length-t&&ct(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Hw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class En extends Hw{construct(e,t,r){return new En(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new En(t)}static emptyPath(){return new En([])}}const M2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gr extends Hw{construct(e,t,r){return new Gr(e,t,r)}static isValidIdentifier(e){return M2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Gr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Re(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Re(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Re(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new Re(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gr(t)}static emptyPath(){return new Gr([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(En.fromString(e))}static fromName(e){return new Qe(En.fromString(e).popFirst(5))}static empty(){return new Qe(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===En.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return En.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new En(e.slice()))}}class hD{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function rx(n){return n.fields.find(e=>2===e.kind)}function cg(n){return n.fields.filter(e=>2!==e.kind)}hD.UNKNOWN_ID=-1;class fD{constructor(e,t){this.fieldPath=e,this.kind=t}}class Gw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Gw(0,$o.min())}}function jP(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(1e9===r?new Ar(t+1,0):new Ar(t,r));return new $o(i,Qe.empty(),e)}function $P(n){return new $o(n.readTime,n.key,-1)}class $o{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new $o(Dt.min(),Qe.empty(),-1)}static max(){return new $o(Dt.max(),Qe.empty(),-1)}}function ix(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:en(n.largestBatchId,e.largestBatchId))}const HP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Hh(n){return sx.apply(this,arguments)}function sx(){return sx=(0,Ie.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==HP)throw n;Ue("LocalStore","Unexpectedly lost primary lease")}),sx.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let i=0,a=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++a,l&&a===i&&t()},y=>r(y))}),l=!0,a===i&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(i=>i?oe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,i)=>{const a=e.length,l=new Array(a);let f=0;for(let y=0;y<a;y++){const w=y;t(e[w]).next(T=>{l[w]=T,++f,f===a&&r(l)},T=>i(T))}})}static doWhile(e,t){return new oe((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class pD{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Di,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new zw(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=ox(r.target.error);this.v.reject(new zw(e,i))}}static open(e,t,r,i){try{return new pD(t,e.transaction(i,r))}catch(a){throw new zw(t,a)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new O2(t)}}class Tu{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Tu.S((0,X.z$)())&&ni("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ue("SimpleDb","Removing database:",e),dg(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,X.hl)())return!1;if(Tu.C())return!0;const e=(0,X.z$)(),t=Tu.S(e),r=0<t&&t<10,i=Tu.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Ie.Z)(function*(){return t.db||(Ue("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new zw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new Re(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Re(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new zw(e,f))},a.onupgradeneeded=l=>{Ue("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Ue("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ie.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.$(e);const y=pD.open(a.db,e,l?"readonly":"readwrite",r),w=i(y).next(T=>(y.P(),T)).catch(T=>(y.abort(T),oe.reject(T))).toPromise();return w.catch(()=>{}),yield y.R,w}catch(y){const w=y,T="FirebaseError"!==w.name&&f<3;if(Ue("SimpleDb","Transaction failed with error:",w.message,"Retrying:",T),a.close(),!T)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class P2{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return dg(this.L.delete())}}class zw extends Re{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Gh(n){return"IndexedDbTransactionError"===n.name}class O2{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ue("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),dg(r)}add(e){return Ue("SimpleDb","ADD",this.store.name,e,e),dg(this.store.add(e))}get(e){return dg(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ue("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ue("SimpleDb","DELETE",this.store.name,e),dg(this.store.delete(e))}count(){return Ue("SimpleDb","COUNT",this.store.name),dg(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(l,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new oe((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){Ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,l,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new oe((r,i)=>{t.onerror=a=>{const l=ox(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}W(e,t){const r=[];return new oe((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const y=new P2(f),w=t(f.primaryKey,f.value,y);if(w instanceof oe){const T=w.catch(x=>(y.done(),oe.reject(x)));r.push(T)}y.isDone?i():null===y.K?f.continue():f.continue(y.K)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function dg(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=ox(r.target.error);t(i)}})}let zP=!1;function ox(n){const e=Tu.S((0,X.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return zP||(zP=!0,setTimeout(()=>{throw r},0)),r}}return n}class k2{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ue("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ie.Z)(function*(){t.task=null;try{Ue("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Gh(r)?Ue("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Hh(r)}yield t.et(6e4)}))}}class F2{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Ie.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return oe.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ue("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(f=>{i-=f,r.add(l)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,a)).next(f=>(Ue("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=$P(a);ix(l,r)>0&&(r=l)}),new $o(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ho=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Ww(n){return null==n}function qw(n){return 0===n&&1/n==-1/0}function WP(n){return"number"==typeof n&&Number.isInteger(n)&&!qw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ps(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=qP(e)),e=L2(n.get(t),e);return qP(e)}function L2(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function qP(n){return n+"\x01\x01"}function xl(n){const e=n.length;if(Et(e>=2),2===e)return Et("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),En.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&ct(),n.charAt(l+1)){case"\x01":const f=n.substring(a,l);let y;0===i.length?y=f:(i+=f,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:ct()}a=l+2}return new En(r)}const ZP=["userId","batchId"];function gD(n,e){return[n,ps(e)]}function KP(n,e,t){return[n,ps(e),t]}const V2={},U2=["prefixPath","collectionGroup","readTime","documentId"],B2=["prefixPath","collectionGroup","documentId"],j2=["collectionGroup","readTime","prefixPath","documentId"],$2=["canonicalId","targetId"],H2=["targetId","path"],G2=["path","targetId"],z2=["collectionId","parent"],W2=["indexId","uid"],q2=["uid","sequenceNumber"],Z2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],K2=["indexId","uid","orderedDocumentKey"],Y2=["userId","collectionPath","documentId"],Q2=["userId","collectionPath","largestBatchId"],J2=["userId","collectionGroup","largestBatchId"],YP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],X2=[...YP,"documentOverlays"],QP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],JP=QP,eV=[...JP,"indexConfiguration","indexState","indexEntries"];class ax extends GP{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Ui(n,e){const t=et(n);return Tu.M(t.ht,e)}function XP(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zh(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class sr{constructor(e,t){this.comparator=e,this.root=t||Ki.EMPTY}insert(e,t){return new sr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ki.BLACK,null,null))}remove(e){return new sr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ki.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mD(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mD(this.root,e,this.comparator,!1)}getReverseIterator(){return new mD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mD(this.root,e,this.comparator,!0)}}class mD{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ki{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Ki.RED,this.left=i??Ki.EMPTY,this.right=a??Ki.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ki(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ki.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ki.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ki.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ki.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ct();const e=this.left.check();if(e!==this.right.check())throw ct();return e+(this.isRed()?0:1)}}Ki.EMPTY=null,Ki.RED=!0,Ki.BLACK=!1,Ki.EMPTY=new class{constructor(){this.size=0}get key(){throw ct()}get value(){throw ct()}get color(){throw ct()}get left(){throw ct()}get right(){throw ct()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ki(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fr{constructor(e){this.comparator=e,this.data=new sr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tO(this.data.getIterator())}getIteratorFrom(e){return new tO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof fr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new fr(this.comparator);return t.data=e,t}}class tO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Cy(n){return n.hasNext()?n.getNext():void 0}class uo{constructor(e){this.fields=e,e.sort(Gr.comparator)}static empty(){return new uo([])}unionWith(e){let t=new fr(Gr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new uo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Iy(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class nO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new nO("Invalid base64 string: "+i):i}}(e);return new bi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new bi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return en(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bi.EMPTY_BYTE_STRING=new bi("");const nV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wh(n){if(Et(!!n),"string"==typeof n){let e=0;const t=nV.exec(n);if(Et(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zr(n.seconds),nanos:zr(n.nanos)}}function zr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Jc(n){return"string"==typeof n?bi.fromBase64String(n):bi.fromUint8Array(n)}function yD(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function _D(n){const e=n.mapValue.fields.__previous_value__;return yD(e)?_D(e):e}function Zw(n){const e=Wh(n.mapValue.fields.__local_write_time__.timestampValue);return new Ar(e.seconds,e.nanos)}class rV{constructor(e,t,r,i,a,l,f,y,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.longPollingOptions=y,this.useFetchStreams=w}}class qh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qh&&e.projectId===this.projectId&&e.database===this.database}}const Zh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},vD={nullValue:"NULL_VALUE"};function Kh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?yD(n)?4:oO(n)?9007199254740991:10:ct()}function Ml(n,e){if(n===e)return!0;const t=Kh(n);if(t!==Kh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zw(n).isEqual(Zw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Wh(r.timestampValue),l=Wh(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Jc(n.bytesValue).isEqual(Jc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return zr(r.geoPointValue.latitude)===zr(i.geoPointValue.latitude)&&zr(r.geoPointValue.longitude)===zr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return zr(r.integerValue)===zr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=zr(r.doubleValue),l=zr(i.doubleValue);return a===l?qw(a)===qw(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Iy(n.arrayValue.values||[],e.arrayValue.values||[],Ml);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(XP(a)!==XP(l))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===l[f]||!Ml(a[f],l[f])))return!1;return!0}(n,e);default:return ct()}var i}function Kw(n,e){return void 0!==(n.values||[]).find(t=>Ml(t,e))}function Yh(n,e){if(n===e)return 0;const t=Kh(n),r=Kh(e);if(t!==r)return en(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return en(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=zr(i.integerValue||i.doubleValue),f=zr(a.integerValue||a.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return rO(n.timestampValue,e.timestampValue);case 4:return rO(Zw(n),Zw(e));case 5:return en(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Jc(i),f=Jc(a);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),f=a.split("/");for(let y=0;y<l.length&&y<f.length;y++){const w=en(l[y],f[y]);if(0!==w)return w}return en(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=en(zr(i.latitude),zr(a.latitude));return 0!==l?l:en(zr(i.longitude),zr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],f=a.values||[];for(let y=0;y<l.length&&y<f.length;++y){const w=Yh(l[y],f[y]);if(w)return w}return en(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Zh.mapValue&&a===Zh.mapValue)return 0;if(i===Zh.mapValue)return 1;if(a===Zh.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),y=a.fields||{},w=Object.keys(y);f.sort(),w.sort();for(let T=0;T<f.length&&T<w.length;++T){const x=en(f[T],w[T]);if(0!==x)return x;const F=Yh(l[f[T]],y[w[T]]);if(0!==F)return F}return en(f.length,w.length)}(n.mapValue,e.mapValue);default:throw ct()}}function rO(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return en(n,e);const t=Wh(n),r=Wh(e),i=en(t.seconds,r.seconds);return 0!==i?i:en(t.nanos,r.nanos)}function Dy(n){return ux(n)}function ux(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Wh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Jc(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=ux(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const f of i)l?l=!1:a+=",",a+=`${f}:${ux(r.fields[f])}`;return a+"}"}(n.mapValue):ct();var e}function hg(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function lx(n){return!!n&&"integerValue"in n}function Yw(n){return!!n&&"arrayValue"in n}function iO(n){return!!n&&"nullValue"in n}function sO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ED(n){return!!n&&"mapValue"in n}function Qw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return zh(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Qw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function oO(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function iV(n){return"nullValue"in n?vD:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?hg(qh.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ct()}function sV(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?hg(qh.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Zh:ct()}function aO(n,e){const t=Yh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function uO(n,e){const t=Yh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Yi{constructor(e){this.value=e}static empty(){return new Yi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ED(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qw(t)}setAll(e){let t=Gr.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=Qw(l):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());ED(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ml(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ED(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){zh(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Yi(Qw(this.value))}}function lO(n){const e=[];return zh(n.fields,(t,r)=>{const i=new Gr([t]);if(ED(r)){const a=lO(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new uo(e)}class pr{constructor(e,t,r,i,a,l,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new pr(e,0,Dt.min(),Dt.min(),Dt.min(),Yi.empty(),0)}static newFoundDocument(e,t,r,i){return new pr(e,1,t,Dt.min(),r,i,0)}static newNoDocument(e,t){return new pr(e,2,t,Dt.min(),Dt.min(),Yi.empty(),0)}static newUnknownDocument(e,t){return new pr(e,3,t,Dt.min(),Dt.min(),Yi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof pr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Qh{constructor(e,t){this.position=e,this.inclusive=t}}function cO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Qe.comparator(Qe.fromName(l.referenceValue),t.key):Yh(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function dO(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ml(n.position[t],e.position[t]))return!1;return!0}class by{constructor(e,t="asc"){this.field=e,this.dir=t}}function oV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class hO{}class mn extends hO{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new aV(e,t,r):"array-contains"===t?new cV(e,r):"in"===t?new _O(e,r):"not-in"===t?new dV(e,r):"array-contains-any"===t?new hV(e,r):new mn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new uV(e,r):new lV(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Yh(t,this.value)):null!==t&&Kh(this.value)===Kh(t)&&this.matchesComparison(Yh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ct()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ln extends hO{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Ln(e,t)}matches(e){return Ty(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Ty(n){return"and"===n.op}function cx(n){return"or"===n.op}function dx(n){return fO(n)&&Ty(n)}function fO(n){for(const e of n.filters)if(e instanceof Ln)return!1;return!0}function hx(n){if(n instanceof mn)return n.field.canonicalString()+n.op.toString()+Dy(n.value);if(dx(n))return n.filters.map(e=>hx(e)).join(",");{const e=n.filters.map(t=>hx(t)).join(",");return`${n.op}(${e})`}}function pO(n,e){return n instanceof mn?(t=n,(r=e)instanceof mn&&t.op===r.op&&t.field.isEqual(r.field)&&Ml(t.value,r.value)):n instanceof Ln?function(t,r){return r instanceof Ln&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&pO(a,r.filters[l]),!0)}(n,e):void ct();var t,r}function gO(n,e){const t=n.filters.concat(e);return Ln.create(t,n.op)}function mO(n){return n instanceof mn?`${(e=n).field.canonicalString()} ${e.op} ${Dy(e.value)}`:n instanceof Ln?function(e){return e.op.toString()+" {"+e.getFilters().map(mO).join(" ,")+"}"}(n):"Filter";var e}class aV extends mn{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class uV extends mn{constructor(e,t){super(e,"in",t),this.keys=yO(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class lV extends mn{constructor(e,t){super(e,"not-in",t),this.keys=yO(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function yO(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class cV extends mn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yw(t)&&Kw(t.arrayValue,this.value)}}class _O extends mn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Kw(this.value.arrayValue,t)}}class dV extends mn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Kw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Kw(this.value.arrayValue,t)}}class hV extends mn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Kw(this.value.arrayValue,r))}}class fV{constructor(e,t=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this.dt=null}}function fx(n,e=null,t=[],r=[],i=null,a=null,l=null){return new fV(n,e,t,r,i,a,l)}function fg(n){const e=et(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>hx(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Ww(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Dy(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Dy(r)).join(",")),e.dt=t}return e.dt}function Jw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!oV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!pO(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dO(n.startAt,e.startAt)&&dO(n.endAt,e.endAt)}function ID(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function CD(n,e){return n.filters.filter(t=>t instanceof mn&&t.field.isEqual(e))}function vO(n,e,t){let r=vD,i=!0;for(const a of CD(n,e)){let l=vD,f=!0;switch(a.op){case"<":case"<=":l=iV(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=vD}aO({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];aO({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function wO(n,e,t){let r=Zh,i=!0;for(const a of CD(n,e)){let l=Zh,f=!0;switch(a.op){case">=":case">":l=sV(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=Zh}uO({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];uO({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Xc{constructor(e,t=null,r=[],i=[],a=null,l="F",f=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=y,this.wt=null,this._t=null}}function EO(n,e,t,r,i,a,l,f){return new Xc(n,e,t,r,i,a,l,f)}function Sy(n){return new Xc(n)}function IO(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function px(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function DD(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function gx(n){return null!==n.collectionGroup}function pg(n){const e=et(n);if(null===e.wt){e.wt=[];const t=DD(e),r=px(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new by(t)),e.wt.push(new by(Gr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new by(Gr.keyField(),a))}}}return e.wt}function Os(n){const e=et(n);if(!e._t)if("F"===e.limitType)e._t=fx(e.path,e.collectionGroup,pg(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of pg(e))t.push(new by(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Qh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Qh(e.startAt.position,e.startAt.inclusive):null;e._t=fx(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function mx(n,e){e.getFirstInequalityField(),DD(n);const t=n.filters.concat([e]);return new Xc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function bD(n,e,t){return new Xc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xw(n,e){return Jw(Os(n),Os(e))&&n.limitType===e.limitType}function CO(n){return`${fg(Os(n))}|lt:${n.limitType}`}function yx(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>mO(r)).join(", ")}]`),Ww(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Dy(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Dy(r)).join(",")),`Target(${t})`}(Os(n))}; limitType=${n.limitType})`}function e0(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of pg(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const f=cO(i,a,l);return i.inclusive?f<=0:f<0}(t.startAt,pg(t),r)||t.endAt&&!function(i,a,l){const f=cO(i,a,l);return i.inclusive?f>=0:f>0}(t.endAt,pg(t),r)));var t,r}function DO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function bO(n){return(e,t)=>{let r=!1;for(const i of pg(n)){const a=pV(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function pV(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(i,a,l){const f=a.data.field(i),y=l.data.field(i);return null!==f&&null!==y?Yh(f,y):ct()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ct()}}class ed{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zh(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return eO(this.inner)}size(){return this.innerSize}}const gV=new sr(Qe.comparator);function lo(){return gV}const TO=new sr(Qe.comparator);function t0(...n){let e=TO;for(const t of n)e=e.insert(t.key,t);return e}function SO(n){let e=TO;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Rl(){return n0()}function AO(){return n0()}function n0(){return new ed(n=>n.toString(),(n,e)=>n.isEqual(e))}const mV=new sr(Qe.comparator),yV=new fr(Qe.comparator);function on(...n){let e=yV;for(const t of n)e=e.add(t);return e}const _V=new fr(en);function _x(){return _V}function xO(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qw(e)?"-0":e}}function MO(n){return{integerValue:""+n}}function RO(n,e){return WP(e)?MO(e):xO(n,e)}class TD{constructor(){this._=void 0}}function vV(n,e,t){return n instanceof Ay?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&yD(i)&&(i=_D(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof gg?PO(n,e):n instanceof mg?OO(n,e):function(r,i){const a=NO(r,i),l=kO(a)+kO(r.gt);return lx(a)&&lx(r.gt)?MO(l):xO(r.serializer,l)}(n,e)}function wV(n,e,t){return n instanceof gg?PO(n,e):n instanceof mg?OO(n,e):t}function NO(n,e){return n instanceof xy?lx(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ay extends TD{}class gg extends TD{constructor(e){super(),this.elements=e}}function PO(n,e){const t=FO(e);for(const r of n.elements)t.some(i=>Ml(i,r))||t.push(r);return{arrayValue:{values:t}}}class mg extends TD{constructor(e){super(),this.elements=e}}function OO(n,e){let t=FO(e);for(const r of n.elements)t=t.filter(i=>!Ml(i,r));return{arrayValue:{values:t}}}class xy extends TD{constructor(e,t){super(),this.serializer=e,this.gt=t}}function kO(n){return zr(n.integerValue||n.doubleValue)}function FO(n){return Yw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class r0{constructor(e,t){this.field=e,this.transform=t}}class IV{constructor(e,t){this.version=e,this.transformResults=t}}class xr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xr}static exists(e){return new xr(void 0,e)}static updateTime(e){return new xr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function SD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class AD{}function LO(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Ry(n.key,xr.none()):new My(n.key,n.data,xr.none());{const t=n.data,r=Yi.empty();let i=new fr(Gr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new td(n.key,r,new uo(i.toArray()),xr.none())}}function CV(n,e,t){n instanceof My?function(r,i,a){const l=r.value.clone(),f=BO(r.fieldTransforms,i,a.transformResults);l.setAll(f),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof td?function(r,i,a){if(!SD(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=BO(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(UO(r)),f.setAll(l),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function s0(n,e,t,r){return n instanceof My?function(i,a,l,f){if(!SD(i.precondition,a))return l;const y=i.value.clone(),w=jO(i.fieldTransforms,f,a);return y.setAll(w),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof td?function(i,a,l,f){if(!SD(i.precondition,a))return l;const y=jO(i.fieldTransforms,f,a),w=a.data;return w.setAll(UO(i)),w.setAll(y),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(l=t,SD(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function DV(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=NO(r.transform,i||null);null!=a&&(null===t&&(t=Yi.empty()),t.set(r.field,a))}return t||null}function VO(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Iy(t,r,(i,a)=>function EV(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof gg&&r instanceof gg||t instanceof mg&&r instanceof mg?Iy(t.elements,r.elements,Ml):t instanceof xy&&r instanceof xy?Ml(t.gt,r.gt):t instanceof Ay&&r instanceof Ay);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class My extends AD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class td extends AD{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function UO(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function BO(n,e,t){const r=new Map;Et(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,wV(l,f,t[i]))}return r}function jO(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,vV(a,l,e))}return r}class Ry extends AD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vx extends AD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class wx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&CV(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=s0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=s0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=AO();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=t.has(i.key)?null:f;const y=LO(l,f);null!==y&&r.set(i.key,y),l.isValidDocument()||l.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),on())}isEqual(e){return this.batchId===e.batchId&&Iy(this.mutations,e.mutations,(t,r)=>VO(t,r))&&Iy(this.baseMutations,e.baseMutations,(t,r)=>VO(t,r))}}class Ex{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Et(e.mutations.length===r.length);let i=mV;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new Ex(e,t,r,i)}}class Ix{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class TV{constructor(e,t){this.count=e,this.unchangedNames=t}}var pi,In;function $O(n){switch(n){default:return ct();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function HO(n){if(void 0===n)return ni("GRPC error has no .code"),he.UNKNOWN;switch(n){case pi.OK:return he.OK;case pi.CANCELLED:return he.CANCELLED;case pi.UNKNOWN:return he.UNKNOWN;case pi.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case pi.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case pi.INTERNAL:return he.INTERNAL;case pi.UNAVAILABLE:return he.UNAVAILABLE;case pi.UNAUTHENTICATED:return he.UNAUTHENTICATED;case pi.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case pi.NOT_FOUND:return he.NOT_FOUND;case pi.ALREADY_EXISTS:return he.ALREADY_EXISTS;case pi.PERMISSION_DENIED:return he.PERMISSION_DENIED;case pi.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case pi.ABORTED:return he.ABORTED;case pi.OUT_OF_RANGE:return he.OUT_OF_RANGE;case pi.UNIMPLEMENTED:return he.UNIMPLEMENTED;case pi.DATA_LOSS:return he.DATA_LOSS;default:return ct()}}(In=pi||(pi={}))[In.OK=0]="OK",In[In.CANCELLED=1]="CANCELLED",In[In.UNKNOWN=2]="UNKNOWN",In[In.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",In[In.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",In[In.NOT_FOUND=5]="NOT_FOUND",In[In.ALREADY_EXISTS=6]="ALREADY_EXISTS",In[In.PERMISSION_DENIED=7]="PERMISSION_DENIED",In[In.UNAUTHENTICATED=16]="UNAUTHENTICATED",In[In.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",In[In.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",In[In.ABORTED=10]="ABORTED",In[In.OUT_OF_RANGE=11]="OUT_OF_RANGE",In[In.UNIMPLEMENTED=12]="UNIMPLEMENTED",In[In.INTERNAL=13]="INTERNAL",In[In.UNAVAILABLE=14]="UNAVAILABLE",In[In.DATA_LOSS=15]="DATA_LOSS";class Cx{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return xD}static getOrCreateInstance(){return null===xD&&(xD=new Cx),xD}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let xD=null;function GO(){return new TextEncoder}const SV=new wy([4294967295,4294967295],0);function zO(n){const e=GO().encode(n),t=new w2;return t.update(e),new Uint8Array(t.digest())}function WO(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new wy([t,r],0),new wy([i,a],0)]}class Dx{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new o0(`Invalid padding: ${t}`);if(r<0)throw new o0(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new o0(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new o0(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=wy.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(wy.fromNumber(r)));return 1===i.compare(SV)&&(i=new wy([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=zO(e),[r,i]=WO(t);for(let a=0;a<this.hashCount;a++){const l=this.Et(r,i,a);if(!this.At(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new Dx(a,i,t);return r.forEach(f=>l.insert(f)),l}insert(e){if(0===this.It)return;const t=zO(e),[r,i]=WO(t);for(let a=0;a<this.hashCount;a++){const l=this.Et(r,i,a);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class o0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class a0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,u0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new a0(Dt.min(),i,new sr(en),lo(),on())}}class u0{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new u0(r,t,on(),on(),on())}}class MD{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class qO{constructor(e,t){this.targetId=e,this.Vt=t}}class ZO{constructor(e,t,r=bi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class KO{constructor(){this.St=0,this.Dt=QO(),this.Ct=bi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=on(),t=on(),r=on();return this.Dt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ct()}}),new u0(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=QO()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class AV{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=lo(),this.zt=YO(),this.Wt=new sr(en)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,a=this.se(r);if(a){const l=a.target;if(ID(l))if(0===i){const f=new Qe(l.path);this.Yt(r,f,pr.newNoDocument(f,Dt.min()))}else Et(1===i);else{const f=this.ie(r);if(f!==i){const y=this.re(e,f);0!==y&&(this.ee(r),this.Wt=this.Wt.insert(r,2===y?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Cx.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(w,T,x){var F,H,ee,ve,Te,mt;const It={localCacheCount:T,existenceFilterCount:x.count},vt=x.unchangedNames;return vt&&(It.bloomFilter={applied:0===w,hashCount:null!==(F=vt?.hashCount)&&void 0!==F?F:0,bitmapLength:null!==(ve=null===(ee=null===(H=vt?.bits)||void 0===H?void 0:H.bitmap)||void 0===ee?void 0:ee.length)&&void 0!==ve?ve:0,padding:null!==(mt=null===(Te=vt?.bits)||void 0===Te?void 0:Te.padding)&&void 0!==mt?mt:0}),It}(y,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:l=0},hashCount:f=0}=r;let y,w;try{y=Jc(a).toUint8Array()}catch(T){if(T instanceof nO)return Ra("Decoding the base64 bloom filter in existence filter failed ("+T.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw T}try{w=new Dx(y,l,f)}catch(T){return Ra(T instanceof o0?"BloomFilter error: ":"Applying bloom filter failed: ",T),1}return 0===w.It?1:i!==t-this.oe(e.targetId,w)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const l=this.Gt.ue(),f=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;t.vt(f)||(this.Yt(e,a,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((a,l)=>{const f=this.se(l);if(f){if(a.current&&ID(f.target)){const y=new Qe(f.target.path);null!==this.jt.get(y)||this.ae(l,y)||this.Yt(l,y,pr.newNoDocument(y,e))}a.Mt&&(t.set(l,a.Ot()),a.Ft())}});let r=on();this.zt.forEach((a,l)=>{let f=!0;l.forEachWhile(y=>{const w=this.se(y);return!w||"TargetPurposeLimboResolution"===w.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.jt.forEach((a,l)=>l.setReadTime(e));const i=new a0(e,t,this.Wt,this.jt,r);return this.jt=lo(),this.zt=YO(),this.Wt=new sr(en),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new KO,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new fr(en),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new KO),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function YO(){return new sr(Qe.comparator)}function QO(){return new sr(Qe.comparator)}const xV={asc:"ASCENDING",desc:"DESCENDING"},MV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RV={and:"AND",or:"OR"};class NV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function bx(n,e){return n.useProto3Json||Ww(e)?e:{value:e}}function Ny(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JO(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function PV(n,e){return Ny(n,e.toTimestamp())}function ri(n){return Et(!!n),Dt.fromTimestamp(function(e){const t=Wh(e);return new Ar(t.seconds,t.nanos)}(n))}function Tx(n,e){return(t=n,new En(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function XO(n){const e=En.fromString(n);return Et(u1(e)),e}function l0(n,e){return Tx(n.databaseId,e.path)}function Nl(n,e){const t=XO(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(t1(t))}function Sx(n,e){return Tx(n.databaseId,e)}function e1(n){const e=XO(n);return 4===e.length?En.emptyPath():t1(e)}function c0(n){return new En(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function t1(n){return Et(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function n1(n,e,t){return{name:l0(n,e),fields:t.value.mapValue.fields}}function r1(n,e,t){const r=Nl(n,e.name),i=ri(e.updateTime),a=e.createTime?ri(e.createTime):Dt.min(),l=new Yi({mapValue:{fields:e.fields}}),f=pr.newFoundDocument(r,i,a,l);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function d0(n,e){let t;if(e instanceof My)t={update:n1(n,e.key,e.value)};else if(e instanceof Ry)t={delete:l0(n,e.key)};else if(e instanceof td)t={update:n1(n,e.key,e.data),updateMask:jV(e.fieldMask)};else{if(!(e instanceof vx))return ct();t={verify:l0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Ay)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof gg)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof mg)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof xy)return{fieldPath:a.field.canonicalString(),increment:l.gt};throw ct()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:PV(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ct()),t;var i}function Ax(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?xr.updateTime(ri(i.updateTime)):void 0!==i.exists?xr.exists(i.exists):xr.none():xr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let f=null;"setToServerValue"in l?(Et("REQUEST_TIME"===l.setToServerValue),f=new Ay):"appendMissingElements"in l?f=new gg(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new mg(l.removeAllFromArray.values||[]):"increment"in l?f=new xy(a,l.increment):ct();const y=Gr.fromServerFormat(l.fieldPath);return new r0(y,f)}(n,i)):[];var i;if(e.update){const i=Nl(n,e.update.name),a=new Yi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new uo((e.updateMask.fieldPaths||[]).map(w=>Gr.fromServerFormat(w)));return new td(i,a,l,t,r)}return new My(i,a,t,r)}if(e.delete){const i=Nl(n,e.delete);return new Ry(i,t)}if(e.verify){const i=Nl(n,e.verify);return new vx(i,t)}return ct()}function i1(n,e){return{documents:[Sx(n,e.path)]}}function xx(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Sx(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Sx(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0!==y.length)return a1(Ln.create(y,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(y){if(0!==y.length)return y.map(w=>{return{field:Jh((T=w).field),direction:VV(T.dir)};var T})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=bx(n,e.limit);var f,y;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function s1(n){let e=e1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Et(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let a=[];t.where&&(a=function(T){const x=o1(T);return x instanceof Ln&&dx(x)?x.getFilters():[x]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(T=>{return new by(Py((x=T).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let f=null;t.limit&&(f=function(T){let x;return x="object"==typeof T?T.value:T,Ww(x)?null:x}(t.limit));let y=null;var T;t.startAt&&(y=new Qh((T=t.startAt).values||[],!!T.before));let w=null;return t.endAt&&(w=function(T){return new Qh(T.values||[],!T.before)}(t.endAt)),EO(e,i,l,a,f,"F",y,w)}function o1(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Py(e.unaryFilter.field);return mn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Py(e.unaryFilter.field);return mn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Py(e.unaryFilter.field);return mn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Py(e.unaryFilter.field);return mn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ct()}}(n):void 0!==n.fieldFilter?mn.create(Py((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ct()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Ln.create(e.compositeFilter.filters.map(t=>o1(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ct()}}(e.compositeFilter.op))}(n):ct();var e}function VV(n){return xV[n]}function UV(n){return MV[n]}function BV(n){return RV[n]}function Jh(n){return{fieldPath:n.canonicalString()}}function Py(n){return Gr.fromServerFormat(n.fieldPath)}function a1(n){return n instanceof mn?function(e){if("=="===e.op){if(sO(e.value))return{unaryFilter:{field:Jh(e.field),op:"IS_NAN"}};if(iO(e.value))return{unaryFilter:{field:Jh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(sO(e.value))return{unaryFilter:{field:Jh(e.field),op:"IS_NOT_NAN"}};if(iO(e.value))return{unaryFilter:{field:Jh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jh(e.field),op:UV(e.op),value:e.value}}}(n):n instanceof Ln?function(e){const t=e.getFilters().map(r=>a1(r));return 1===t.length?t[0]:{compositeFilter:{op:BV(e.op),filters:t}}}(n):ct()}function jV(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function u1(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class nd{constructor(e,t,r,i,a=Dt.min(),l=Dt.min(),f=bi.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f,this.expectedCount=y}withSequenceNumber(e){return new nd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new nd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new nd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new nd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class l1{constructor(e){this.fe=e}}function c1(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:RD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:l0(i=n.fe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Ny(i,a.version.toTimestamp()),createTime:Ny(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:yg(e.version)};else{if(!e.isUnknownDocument())return ct();r.unknownDocument={path:t.path.toArray(),version:yg(e.version)}}var i,a;return r}function RD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function yg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _g(n){const e=new Ar(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function vg(n,e){const t=(e.baseMutations||[]).map(a=>Ax(n.fe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>Ax(n.fe,a)),i=Ar.fromMillis(e.localWriteTimeMs);return new wx(e.batchId,i,t,r)}function h0(n){const e=_g(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?_g(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var i;return void 0!==n.query.documents?(Et(1===(i=n.query).documents.length),r=Os(Sy(e1(i.documents[0])))):r=Os(s1(n.query)),new nd(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,bi.fromBase64String(n.resumeToken))}function d1(n,e){const t=yg(e.snapshotVersion),r=yg(e.lastLimboFreeSnapshotVersion);let i;i=ID(e.target)?i1(n.fe,e.target):xx(n.fe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:fg(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Mx(n){const e=s1({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?bD(e,e.limit,"L"):e}function Rx(n,e){return new Ix(e.largestBatchId,Ax(n.fe,e.overlayMutation))}function h1(n,e){const t=e.path.lastSegment();return[n,ps(e.path.popLast()),t]}function f1(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:yg(r.readTime),documentKey:ps(r.documentKey.path),largestBatchId:r.largestBatchId}}class HV{getBundleMetadata(e,t){return p1(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:_g(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return p1(e).put({bundleId:(r=t).id,createTime:yg(ri(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return g1(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Mx(i.bundledQuery),readTime:_g(i.readTime)};var i})}saveNamedQuery(e,t){return g1(e).put({name:(r=t).name,readTime:yg(ri(r.readTime)),bundledQuery:r.bundledQuery});var r}}function p1(n){return Ui(n,"bundles")}function g1(n){return Ui(n,"namedQueries")}class ND{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new ND(e,t.uid||"")}getOverlay(e,t){return f0(e).get(h1(this.userId,t)).next(r=>r?Rx(this.serializer,r):null)}getOverlays(e,t){const r=Rl();return oe.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const f=new Ix(t,l);i.push(this.we(e,f))}),oe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(ps(l.getCollectionPath())));const a=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(f0(e).J("collectionPathOverlayIndex",f))}),oe.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Rl(),a=ps(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return f0(e).j("collectionPathOverlayIndex",l).next(f=>{for(const y of f){const w=Rx(this.serializer,y);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Rl();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return f0(e).X({index:"collectionGroupOverlayIndex",range:f},(y,w,T)=>{const x=Rx(this.serializer,w);a.size()<i||x.largestBatchId===l?(a.set(x.getKey(),x),l=x.largestBatchId):T.done()}).next(()=>a)}we(e,t){return f0(e).put(function(r,i,a){const[l,f,y]=h1(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:y,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:d0(r.fe,a.mutation)}}(this.serializer,this.userId,t))}}function f0(n){return Ui(n,"documentOverlays")}class wg{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(zr(e.integerValue));else if("doubleValue"in e){const r=zr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),qw(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Jc(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?oO(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ct()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Qe.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function GV(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function m1(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=GV(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}wg.Ve=new wg;class zV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=m1(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=m1(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class WV{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class qV{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class p0{constructor(){this.je=new zV,this.ze=new WV(this.je),this.We=new qV(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Eg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Eg(this.indexId,this.documentKey,this.arrayValue,r)}}function Xh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=y1(n.arrayValue,e.arrayValue),0!==t?t:(t=y1(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function y1(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class ZV{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){Et(e.collectionGroup===this.collectionId);const t=rx(e);if(void 0!==t&&!this.en(t))return!1;const r=cg(e);let i=new Set,a=0,l=0;for(;a<r.length&&this.en(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const f=r[a];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[l++],f))return!1}++a}for(;a<r.length;++a)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[a]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function _1(n){var e,t;if(Et(n instanceof mn||n instanceof Ln),n instanceof mn){if(n instanceof _O){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>mn.create(n.field,"==",a)))||[];return Ln.create(i,"or")}return n}const r=n.filters.map(i=>_1(i));return Ln.create(r,n.op)}function KV(n){if(0===n.getFilters().length)return[];const e=Ox(_1(n));return Et(v1(e)),Nx(e)||Px(e)?[e]:e.getFilters()}function Nx(n){return n instanceof mn}function Px(n){return n instanceof Ln&&dx(n)}function v1(n){return Nx(n)||Px(n)||function(e){if(e instanceof Ln&&cx(e)){for(const t of e.getFilters())if(!Nx(t)&&!Px(t))return!1;return!0}return!1}(n)}function Ox(n){if(Et(n instanceof mn||n instanceof Ln),n instanceof mn)return n;if(1===n.filters.length)return Ox(n.filters[0]);const e=n.filters.map(r=>Ox(r));let t=Ln.create(e,n.op);return t=PD(t),v1(t)?t:(Et(t instanceof Ln),Et(Ty(t)),Et(t.filters.length>1),t.filters.reduce((r,i)=>kx(r,i)))}function kx(n,e){let t;return Et(n instanceof mn||n instanceof Ln),Et(e instanceof mn||e instanceof Ln),t=n instanceof mn?e instanceof mn?Ln.create([n,e],"and"):w1(n,e):e instanceof mn?w1(e,n):function(r,i){if(Et(r.filters.length>0&&i.filters.length>0),Ty(r)&&Ty(i))return gO(r,i.getFilters());const a=cx(r)?r:i,l=cx(r)?i:r,f=a.filters.map(y=>kx(y,l));return Ln.create(f,"or")}(n,e),PD(t)}function w1(n,e){if(Ty(e))return gO(e,n.getFilters());{const t=e.filters.map(r=>kx(n,r));return Ln.create(t,"or")}}function PD(n){if(Et(n instanceof mn||n instanceof Ln),n instanceof mn)return n;const e=n.getFilters();if(1===e.length)return PD(e[0]);if(fO(n))return n;const t=e.map(i=>PD(i)),r=[];return t.forEach(i=>{i instanceof mn?r.push(i):i instanceof Ln&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Ln.create(r,n.op)}class YV{constructor(){this.rn=new Fx}addToCollectionParentIndex(e,t){return this.rn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve($o.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve($o.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class Fx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new fr(En.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new fr(En.comparator)).toArray()}}const OD=new Uint8Array(0);class QV{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Fx,this.un=new ed(r=>fg(r),(r,i)=>Jw(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const a={collectionId:r,parent:ps(i)};return E1(e).put(a)}return oe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[BP(t),""],!1,!0);return E1(e).j(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(xl(l.parent))}return r})}addFieldIndex(e,t){const r=kD(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=m0(e);return a.next(f=>{l.put(f1(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=kD(e),i=m0(e),a=g0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=g0(e);let i=!0;const a=new Map;return oe.forEach(this.cn(t),l=>this.an(e,l).next(f=>{i&&(i=!!f),a.set(l,f)})).next(()=>{if(i){let l=on();const f=[];return oe.forEach(a,(y,w)=>{var T;Ue("IndexedDbIndexManager",`Using index ${T=y,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(vt=>`${vt.fieldPath}:${vt.kind}`).join(",")}`} to execute ${fg(t)}`);const x=function(vt,Ft){const nn=rx(Ft);if(void 0===nn)return null;for(const vn of CD(vt,nn.fieldPath))switch(vn.op){case"array-contains-any":return vn.value.arrayValue.values||[];case"array-contains":return[vn.value]}return null}(w,y),F=function(vt,Ft){const nn=new Map;for(const vn of cg(Ft))for(const _s of CD(vt,vn.fieldPath))switch(_s.op){case"==":case"in":nn.set(vn.fieldPath.canonicalString(),_s.value);break;case"not-in":case"!=":return nn.set(vn.fieldPath.canonicalString(),_s.value),Array.from(nn.values())}return null}(w,y),H=function(vt,Ft){const nn=[];let vn=!0;for(const _s of cg(Ft)){const Pg=0===_s.kind?vO(vt,_s.fieldPath,vt.startAt):wO(vt,_s.fieldPath,vt.startAt);nn.push(Pg.value),vn&&(vn=Pg.inclusive)}return new Qh(nn,vn)}(w,y),ee=function(vt,Ft){const nn=[];let vn=!0;for(const _s of cg(Ft)){const Pg=0===_s.kind?wO(vt,_s.fieldPath,vt.endAt):vO(vt,_s.fieldPath,vt.endAt);nn.push(Pg.value),vn&&(vn=Pg.inclusive)}return new Qh(nn,vn)}(w,y),ve=this.hn(y,w,H),Te=this.hn(y,w,ee),mt=this.ln(y,w,F),It=this.fn(y.indexId,x,ve,H.inclusive,Te,ee.inclusive,mt);return oe.forEach(It,vt=>r.H(vt,t.limit).next(Ft=>{Ft.forEach(nn=>{const vn=Qe.fromSegments(nn.documentKey);l.has(vn)||(l=l.add(vn),f.push(vn))})}))}).next(()=>f)}return oe.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:KV(Ln.create(e.filters,"and")).map(r=>fx(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,a,l,f){const y=(null!=t?t.length:1)*Math.max(r.length,a.length),w=y/(null!=t?t.length:1),T=[];for(let x=0;x<y;++x){const F=t?this.dn(t[x/w]):OD,H=this.wn(e,F,r[x%w],i),ee=this._n(e,F,a[x%w],l),ve=f.map(Te=>this.wn(e,F,Te,!0));T.push(...this.createRange(H,ee,ve))}return T}wn(e,t,r,i){const a=new Eg(e,Qe.empty(),t,r);return i?a:a.Je()}_n(e,t,r,i){const a=new Eg(e,Qe.empty(),t,r);return i?a.Je():a}an(e,t){const r=new ZV(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const f of a)r.tn(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;const i=this.cn(t);return oe.forEach(i,a=>this.an(e,a).next(l=>{l?0!==r&&l.fields.length<function(f){let y=new fr(Gr.comparator),w=!1;for(const T of f.filters)for(const x of T.getFlattenedFilters())x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?w=!0:y=y.add(x.field));for(const T of f.orderBy)T.field.isKeyField()||(y=y.add(T.field));return y.size+(w?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new p0;for(const i of cg(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.He(i.kind);wg.Ve._e(a,l)}return r.Qe()}dn(e){const t=new p0;return wg.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new p0;return wg.Ve._e(hg(this.databaseId,t),r.He(function(i){const a=cg(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new p0);let a=0;for(const l of cg(e)){const f=r[a++];for(const y of i)if(this.yn(t,l.fieldPath)&&Yw(f))i=this.pn(i,l,f);else{const w=y.He(l.kind);wg.Ve._e(f,w)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const y=new p0;y.seed(f.Qe()),wg.Ve._e(l,y.He(t.kind)),a.push(y)}return a}yn(e,t){return!!e.filters.find(r=>r instanceof mn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=kD(e),i=m0(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const l=[];return oe.forEach(a,f=>i.get([f.indexId,this.uid]).next(y=>{l.push(function(w,T){const x=T?new Gw(T.sequenceNumber,new $o(_g(T.readTime),new Qe(xl(T.documentKey)),T.largestBatchId)):Gw.empty(),F=w.fields.map(([H,ee])=>new fD(Gr.fromServerFormat(H),ee));return new hD(w.indexId,w.collectionGroup,F,x)}(f,y))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:en(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=kD(e),a=m0(e);return this.Tn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>oe.forEach(f,y=>a.put(f1(y.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?oe.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),oe.forEach(f,y=>this.En(e,i,y).next(w=>{const T=this.An(a,y);return w.isEqual(T)?oe.resolve():this.vn(e,a,y,w,T)}))))})}Rn(e,t,r,i){return g0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return g0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=g0(e);let a=new fr(Xh);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,f)=>{a=a.add(new Eg(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}An(e,t){let r=new fr(Xh);const i=this.mn(t,e);if(null==i)return r;const a=rx(t);if(null!=a){const l=e.data.field(a.fieldPath);if(Yw(l))for(const f of l.arrayValue.values||[])r=r.add(new Eg(t.indexId,e.key,this.dn(f),i))}else r=r.add(new Eg(t.indexId,e.key,OD,i));return r}vn(e,t,r,i,a){Ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,y,w,T,x){const F=f.getIterator(),H=y.getIterator();let ee=Cy(F),ve=Cy(H);for(;ee||ve;){let Te=!1,mt=!1;if(ee&&ve){const It=w(ee,ve);It<0?mt=!0:It>0&&(Te=!0)}else null!=ee?mt=!0:Te=!0;Te?(T(ve),ve=Cy(H)):mt?(x(ee),ee=Cy(F)):(ee=Cy(F),ve=Cy(H))}}(i,a,Xh,f=>{l.push(this.Rn(e,t,r,f))},f=>{l.push(this.Pn(e,t,r,f))}),oe.waitFor(l)}Tn(e){let t=1;return m0(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>Xh(l,f)).filter((l,f,y)=>!f||0!==Xh(l,y[f-1]));const i=[];i.push(e);for(const l of r){const f=Xh(l,e),y=Xh(l,t);if(0===f)i[0]=e.Je();else if(f>0&&y<0)i.push(l),i.push(l.Je());else if(y>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.bn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,OD,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,OD,[]]))}return a}bn(e,t){return Xh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(I1)}getMinOffset(e,t){return oe.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||ct())).next(I1)}}function E1(n){return Ui(n,"collectionParents")}function g0(n){return Ui(n,"indexEntries")}function kD(n){return Ui(n,"indexConfiguration")}function m0(n){return Ui(n,"indexState")}function I1(n){Et(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;ix(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new $o(e.readTime,e.documentKey,t)}const C1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class gs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new gs(e,gs.DEFAULT_COLLECTION_PERCENTILE,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function D1(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let f=0;const y=r.X({range:l},(T,x,F)=>(f++,F.delete()));a.push(y.next(()=>{Et(1===f)}));const w=[];for(const T of t.mutations){const x=KP(e,T.key.path,t.batchId);a.push(i.delete(x)),w.push(T.key)}return oe.waitFor(a).next(()=>w)}function FD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ct();e=n.noDocument}return JSON.stringify(e).length}gs.DEFAULT_COLLECTION_PERCENTILE=10,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gs.DEFAULT=new gs(41943040,gs.DEFAULT_COLLECTION_PERCENTILE,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gs.DISABLED=new gs(-1,0,0);class LD{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){Et(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new LD(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ef(e).X({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Oy(e),l=ef(e);return l.add({}).next(f=>{Et("number"==typeof f);const y=new wx(f,t,r,i),w=function(F,H,ee){const ve=ee.baseMutations.map(mt=>d0(F.fe,mt)),Te=ee.mutations.map(mt=>d0(F.fe,mt));return{userId:H,batchId:ee.batchId,localWriteTimeMs:ee.localWriteTime.toMillis(),baseMutations:ve,mutations:Te}}(this.serializer,this.userId,y),T=[];let x=new fr((F,H)=>en(F.canonicalString(),H.canonicalString()));for(const F of i){const H=KP(this.userId,F.key.path,f);x=x.add(F.key.path.popLast()),T.push(l.put(w)),T.push(a.put(H,V2))}return x.forEach(F=>{T.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.Vn[f]=y.keys()}),oe.waitFor(T).next(()=>y)})}lookupMutationBatch(e,t){return ef(e).get(t).next(r=>r?(Et(r.userId===this.userId),vg(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?oe.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return ef(e).X({index:"userMutationsIndex",range:i},(l,f,y)=>{f.userId===this.userId&&(Et(f.batchId>=r),a=vg(this.serializer,f)),y.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ef(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ef(e).j("userMutationsIndex",t).next(r=>r.map(i=>vg(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=gD(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Oy(e).X({range:i},(l,f,y)=>{const[w,T,x]=l,F=xl(T);if(w===this.userId&&t.path.isEqual(F))return ef(e).get(x).next(H=>{if(!H)throw ct();Et(H.userId===this.userId),a.push(vg(this.serializer,H))});y.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new fr(en);const i=[];return t.forEach(a=>{const l=gD(this.userId,a.path),f=IDBKeyRange.lowerBound(l),y=Oy(e).X({range:f},(w,T,x)=>{const[F,H,ee]=w,ve=xl(H);F===this.userId&&a.path.isEqual(ve)?r=r.add(ee):x.done()});i.push(y)}),oe.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=gD(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new fr(en);return Oy(e).X({range:l},(y,w,T)=>{const[x,F,H]=y,ee=xl(F);x===this.userId&&r.isPrefixOf(ee)?ee.length===i&&(f=f.add(H)):T.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(ef(e).get(a).next(l=>{if(null===l)throw ct();Et(l.userId===this.userId),r.push(vg(this.serializer,l))}))}),oe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return D1(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),oe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Oy(e).X({range:r},(a,l,f)=>{if(a[0]===this.userId){const y=xl(a[1]);i.push(y)}else f.done()}).next(()=>{Et(0===i.length)})})}containsKey(e,t){return b1(e,this.userId,t)}xn(e){return T1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function b1(n,e,t){const r=gD(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return Oy(n).X({range:a,Y:!0},(f,y,w)=>{const[T,x,F]=f;T===e&&x===i&&(l=!0),w.done()}).next(()=>l)}function ef(n){return Ui(n,"mutations")}function Oy(n){return Ui(n,"documentMutations")}function T1(n){return Ui(n,"mutationQueues")}class Ig{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Ig(0)}static Mn(){return new Ig(-1)}}class JV{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Ig(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Dt.fromTimestamp(new Ar(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ky(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(Et(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return ky(e).X((l,f)=>{const y=h0(f);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,a.push(this.removeTargetData(e,y)))}).next(()=>oe.waitFor(a)).next(()=>i)}forEachTarget(e,t){return ky(e).X((r,i)=>{const a=h0(i);t(a)})}$n(e){return S1(e).get("targetGlobalKey").next(t=>(Et(null!==t),t))}On(e,t){return S1(e).put("targetGlobalKey",t)}Fn(e,t){return ky(e).put(d1(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=fg(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return ky(e).X({range:i,index:"queryTargetsIndex"},(l,f,y)=>{const w=h0(f);Jw(t,w.target)&&(a=w,y.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=tf(e);return t.forEach(l=>{const f=ps(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),oe.waitFor(i)}removeMatchingKeys(e,t,r){const i=tf(e);return oe.forEach(t,a=>{const l=ps(a.path);return oe.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=tf(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=tf(e);let a=on();return i.X({range:r,Y:!0},(l,f,y)=>{const w=xl(l[1]),T=new Qe(w);a=a.add(T)}).next(()=>a)}containsKey(e,t){const r=ps(t.path),i=IDBKeyRange.bound([r],[BP(r)],!1,!0);let a=0;return tf(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,f],y,w)=>{0!==l&&(a++,w.done())}).next(()=>a>0)}le(e,t){return ky(e).get(t).next(r=>r?h0(r):null)}}function ky(n){return Ui(n,"targets")}function S1(n){return Ui(n,"targetGlobal")}function tf(n){return Ui(n,"targetDocuments")}function A1([n,e],[t,r]){const i=en(n,t);return 0===i?en(e,r):i}class XV{constructor(e){this.Ln=e,this.buffer=new fr(A1),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();A1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class x1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ie.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Gh(r)?Ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Hh(r)}yield t.Qn(3e5)}))}}class eU{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(Ho.ct);const r=new XV(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(C1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),C1):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,a,l,f,y,w;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,l=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,f=Date.now(),this.removeTargets(e,r,t))).next(x=>(a=x,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(w=Date.now(),tx()<=Oo.in.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-T}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${a} targets in `+(y-f)+`ms\n\tRemoved ${x} documents in `+(w-y)+`ms\nTotal Duration: ${w-T}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:x})))}}class tU{constructor(e,t){this.db=e,this.garbageCollector=function M1(n,e){return new eU(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return VD(e,r)}removeReference(e,t,r){return VD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return VD(e,t)}Xn(e,t){return function(r,i){let a=!1;return T1(r).Z(l=>b1(r,l,i).next(f=>(f&&(a=!0),oe.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Yn(e,(l,f)=>{if(f<=t){const y=this.Xn(e,l).next(w=>{if(!w)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Dt.min()),tf(e).delete([0,ps(l.path)])))});i.push(y)}}).next(()=>oe.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return VD(e,t)}Yn(e,t){const r=tf(e);let i,a=Ho.ct;return r.X({index:"documentTargetsIndex"},([l,f],{path:y,sequenceNumber:w})=>{0===l?(a!==Ho.ct&&t(new Qe(xl(i)),a),a=w,i=y):a=Ho.ct}).next(()=>{a!==Ho.ct&&t(new Qe(xl(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function VD(n,e){return tf(n).put((r=n.currentSequenceNumber,{targetId:0,path:ps(e.path),sequenceNumber:r}));var r}class R1{constructor(){this.changes=new ed(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class nU{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Cg(e).put(r)}removeEntry(e,t,r){return Cg(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],RD(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=pr.newInvalidDocument(t);return Cg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(y0(t))},(i,a)=>{r=this.ts(t,a)}).next(()=>r)}es(e,t){let r={size:0,document:pr.newInvalidDocument(t)};return Cg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(y0(t))},(i,a)=>{r={document:this.ts(t,a),size:FD(a)}}).next(()=>r)}getEntries(e,t){let r=lo();return this.ns(e,t,(i,a)=>{const l=this.ts(i,a);r=r.insert(i,l)}).next(()=>r)}ss(e,t){let r=lo(),i=new sr(Qe.comparator);return this.ns(e,t,(a,l)=>{const f=this.ts(a,l);r=r.insert(a,f),i=i.insert(a,FD(l))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return oe.resolve();let i=new fr(k1);t.forEach(y=>i=i.add(y));const a=IDBKeyRange.bound(y0(i.first()),y0(i.last())),l=i.getIterator();let f=l.getNext();return Cg(e).X({index:"documentKeyIndex",range:a},(y,w,T)=>{const x=Qe.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;f&&k1(f,x)<0;)r(f,null),f=l.getNext();f&&f.isEqual(x)&&(r(f,w),f=l.hasNext()?l.getNext():null),f?T.G(y0(f)):T.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,l=[a.popLast().toArray(),a.lastSegment(),RD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Cg(e).j(IDBKeyRange.bound(l,f,!0)).next(y=>{let w=lo();for(const T of y){const x=this.ts(Qe.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);x.isFoundDocument()&&(e0(t,x)||i.has(x.key))&&(w=w.insert(x.key,x))}return w})}getAllFromCollectionGroup(e,t,r,i){let a=lo();const l=O1(t,r),f=O1(t,$o.max());return Cg(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(y,w,T)=>{const x=this.ts(Qe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(x.key,x),a.size===i&&T.done()}).next(()=>a)}newChangeBuffer(e){return new rU(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return P1(e).get("remoteDocumentGlobalKey").next(t=>(Et(!!t),t))}Zn(e,t){return P1(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function $V(n,e){let t;if(e.document)t=r1(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),i=_g(e.noDocument.readTime);t=pr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ct();{const r=Qe.fromSegments(e.unknownDocument.path),i=_g(e.unknownDocument.version);t=pr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Ar(r[0],r[1]);return Dt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return pr.newInvalidDocument(e)}}function N1(n){return new nU(n)}class rU extends R1{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new ed(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new fr((a,l)=>en(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const f=this.us.get(a);if(t.push(this.os.removeEntry(e,a,f.readTime)),l.isValidDocument()){const y=c1(this.os.serializer,l);i=i.add(a.path.popLast());const w=FD(y);r+=w-f.size,t.push(this.os.addEntry(e,a,y))}else if(r-=f.size,this.trackRemovals){const y=c1(this.os.serializer,l.convertToNoDocument(Dt.min()));t.push(this.os.addEntry(e,a,y))}}),i.forEach(a=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.os.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((a,l)=>{this.us.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function P1(n){return Ui(n,"remoteDocumentGlobal")}function Cg(n){return Ui(n,"remoteDocumentsV14")}function y0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function O1(n,e){const t=e.documentKey.path.toArray();return[n,RD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function k1(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=en(t[a],r[a]),i)return i;return i=en(t.length,r.length),i||(i=en(t[t.length-2],r[r.length-2]),i||en(t[t.length-1],r[r.length-1]))}class iU{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class F1{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&s0(r.mutation,i,uo.empty(),Ar.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,on()).next(()=>r))}getLocalViewOfDocuments(e,t,r=on()){const i=Rl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=t0();return a.forEach((f,y)=>{l=l.insert(f,y.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Rl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,on()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,f)=>{t.set(l,f)})})}computeViews(e,t,r,i){let a=lo();const l=n0(),f=n0();return t.forEach((y,w)=>{const T=r.get(w.key);i.has(w.key)&&(void 0===T||T.mutation instanceof td)?a=a.insert(w.key,w):void 0!==T?(l.set(w.key,T.mutation.getFieldMask()),s0(T.mutation,w,T.mutation.getFieldMask(),Ar.now())):l.set(w.key,uo.empty())}),this.recalculateAndSaveOverlays(e,a).next(y=>(y.forEach((w,T)=>l.set(w,T)),t.forEach((w,T)=>{var x;return f.set(w,new iU(T,null!==(x=l.get(w))&&void 0!==x?x:null))}),f))}recalculateAndSaveOverlays(e,t){const r=n0();let i=new sr((l,f)=>l-f),a=on();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const f of l)f.keys().forEach(y=>{const w=t.get(y);if(null===w)return;let T=r.get(y)||uo.empty();T=f.applyToLocalView(w,T),r.set(y,T);const x=(i.get(f.batchId)||on()).add(y);i=i.insert(f.batchId,x)})}).next(()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const y=f.getNext(),w=y.key,T=y.value,x=AO();T.forEach(F=>{if(!a.has(F)){const H=LO(t.get(F),r.get(F));null!==H&&x.set(F,H),a=a.add(F)}}),l.push(this.documentOverlayCache.saveOverlays(e,w,x))}return oe.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):gx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):oe.resolve(Rl());let f=-1,y=a;return l.next(w=>oe.forEach(w,(T,x)=>(f<x.largestBatchId&&(f=x.largestBatchId),a.get(T)?oe.resolve():this.remoteDocumentCache.getEntry(e,T).next(F=>{y=y.insert(T,F)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,y,w,on())).next(T=>({batchId:f,changes:SO(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qe(t)).next(r=>{let i=t0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=t0();return this.indexManager.getCollectionParents(e,i).next(l=>oe.forEach(l,f=>{const y=(w=t,T=f.child(i),new Xc(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,T;return this.getDocumentsMatchingCollectionQuery(e,y,r).next(w=>{w.forEach((T,x)=>{a=a.insert(T,x)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,y)=>{const w=y.getKey();null===a.get(w)&&(a=a.insert(w,pr.newInvalidDocument(w)))});let l=t0();return a.forEach((f,y)=>{const w=i.get(f);void 0!==w&&s0(w.mutation,y,uo.empty(),Ar.now()),e0(t,y)&&(l=l.insert(f,y))}),l})}}class sU{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return oe.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:ri(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:Mx(r.bundledQuery),readTime:ri(r.readTime)}),oe.resolve();var r}}class oU{constructor(){this.overlays=new sr(Qe.comparator),this.ls=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Rl();return oe.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.we(e,t,a)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=Rl(),a=t.length+1,l=new Qe(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const y=f.getNext().value,w=y.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&y.largestBatchId>r&&i.set(y.getKey(),y)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new sr((w,T)=>w-T);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let T=a.get(w.largestBatchId);null===T&&(T=Rl(),a=a.insert(w.largestBatchId,T)),T.set(w.getKey(),w)}}const f=Rl(),y=a.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((w,T)=>f.set(w,T)),!(f.size()>=i)););return oe.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Ix(t,r));let a=this.ls.get(t);void 0===a&&(a=on(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class Lx{constructor(){this.fs=new fr(Bi.ds),this.ws=new fr(Bi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Bi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Bi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Qe(new En([])),r=new Bi(t,e),i=new Bi(t,e+1),a=[];return this.ws.forEachInRange([r,i],l=>{this.ys(l),a.push(l.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Qe(new En([])),r=new Bi(t,e),i=new Bi(t,e+1);let a=on();return this.ws.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Bi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Bi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Qe.comparator(e.key,t.key)||en(e.As,t.As)}static _s(e,t){return en(e.As,t.As)||Qe.comparator(e.key,t.key)}}class aU{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new fr(Bi.ds)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.vs;this.vs++;const l=new wx(a,t,r,i);this.mutationQueue.push(l);for(const f of i)this.Rs=this.Rs.add(new Bi(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return oe.resolve(l)}lookupMutationBatch(e,t){return oe.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),a=i<0?0:i;return oe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Bi(t,0),i=new Bi(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],l=>{const f=this.Ps(l.As);a.push(f)}),oe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new fr(en);return t.forEach(i=>{const a=new Bi(i,0),l=new Bi(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,l],f=>{r=r.add(f.As)})}),oe.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Qe.isDocumentKey(a)||(a=a.child(""));const l=new Bi(new Qe(a),0);let f=new fr(en);return this.Rs.forEachWhile(y=>{const w=y.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(f=f.add(y.As)),!0)},l),oe.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Et(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return oe.forEach(t.mutations,i=>{const a=new Bi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Bi(t,0),i=this.Rs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return oe.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class uU{constructor(e){this.Ds=e,this.docs=new sr(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():pr.newInvalidDocument(t))}getEntries(e,t){let r=lo();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():pr.newInvalidDocument(i))}),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=lo();const l=t.path,f=new Qe(l.child("")),y=this.docs.getIteratorFrom(f);for(;y.hasNext();){const{key:w,value:{document:T}}=y.getNext();if(!l.isPrefixOf(w.path))break;w.path.length>l.length+1||ix($P(T),r)<=0||(i.has(T.key)||e0(t,T))&&(a=a.insert(T.key,T.mutableCopy()))}return oe.resolve(a)}getAllFromCollectionGroup(e,t,r,i){ct()}Cs(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new lU(this)}getSize(e){return oe.resolve(this.size)}}class lU extends R1{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class cU{constructor(e){this.persistence=e,this.xs=new ed(t=>fg(t),Jw),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Lx,this.targetCount=0,this.Ms=Ig.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),oe.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Ig(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Fn(t),oe.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.xs.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),oe.waitFor(a).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),oe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.ks.containsKey(t))}}class Vx{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ho(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new cU(this),this.indexManager=new YV,this.remoteDocumentCache=new uU(r=>this.referenceDelegate.Ls(r)),this.serializer=new l1(t),this.qs=new sU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oU,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new aU(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ue("MemoryPersistence","Starting transaction:",e);const i=new dU(this.Os.next());return this.referenceDelegate.Us(),r(i).next(a=>this.referenceDelegate.Ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gs(e,t){return oe.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class dU extends GP{constructor(e){super(),this.currentSequenceNumber=e}}class UD{constructor(e){this.persistence=e,this.Qs=new Lx,this.js=null}static zs(e){return new UD(e)}get Ws(){if(this.js)return this.js;throw ct()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ws,r=>{const i=Qe.fromPath(r);return this.Hs(e,i).next(a=>{a||t.removeEntry(i,Dt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return oe.or([()=>oe.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class hU{constructor(e){this.serializer=e}O(e,t,r,i){const a=new pD("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ZP,{unique:!0}),f.createObjectStore("documentMutations"),L1(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=oe.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),L1(e)),l=l.next(()=>function(f){const y=f.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,y){return y.store("mutations").j().next(w=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ZP,{unique:!0});const T=y.store("mutations"),x=w.map(F=>T.put(F));return oe.waitFor(x)})}(e,a))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Ys(a))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(a)))),r<7&&i>=7&&(l=l.next(()=>this.Zs(a))),r<8&&i>=8&&(l=l.next(()=>this.ti(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ei(a))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const y=f.createObjectStore("documentOverlays",{keyPath:Y2});y.createIndex("collectionPathOverlayIndex",Q2,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",J2,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const y=f.createObjectStore("remoteDocumentsV14",{keyPath:U2});y.createIndex("documentKeyIndex",B2),y.createIndex("collectionGroupIndex",j2)}(e)).next(()=>this.ni(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.si(e,a))),r<15&&i>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:W2}).createIndex("sequenceNumberIndex",q2,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:Z2}).createIndex("documentKeyIndex",K2,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=FD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>oe.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(f=>oe.forEach(f,y=>{Et(y.userId===a.userId);const w=vg(this.serializer,y);return D1(e,a.userId,w).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((l,f)=>{const y=new En(l),w=[0,ps(y)];a.push(t.get(w).next(T=>T?oe.resolve():t.put({targetId:0,path:ps(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>oe.waitFor(a))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:z2});const r=t.store("collectionParents"),i=new Fx,a=l=>{if(i.add(l)){const f=l.lastSegment(),y=l.popLast();return r.put({collectionId:f,parent:ps(y)})}};return t.store("remoteDocuments").X({Y:!0},(l,f)=>{const y=new En(l);return a(y.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,f,y],w)=>{const T=xl(f);return a(T.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const a=h0(i),l=d1(this.serializer,a);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,l)=>{const f=t.store("remoteDocumentsV14"),y=(w=l,w.document?new Qe(En.fromString(w.document.name).popFirst(5)):w.noDocument?Qe.fromSegments(w.noDocument.path):w.unknownDocument?Qe.fromSegments(w.unknownDocument.path):ct()).path.toArray();var w;const T={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(T))}).next(()=>oe.waitFor(i))}si(e,t){const r=t.store("mutations"),i=N1(this.serializer),a=new Vx(UD.zs,this.serializer.fe);return r.j().next(l=>{const f=new Map;return l.forEach(y=>{var w;let T=null!==(w=f.get(y.userId))&&void 0!==w?w:on();vg(this.serializer,y).keys().forEach(x=>T=T.add(x)),f.set(y.userId,T)}),oe.forEach(f,(y,w)=>{const T=new Vi(w),x=ND.de(this.serializer,T),F=a.getIndexManager(T),H=LD.de(T,this.serializer,F,a.referenceDelegate);return new F1(i,H,x,F).recalculateAndSaveOverlaysForDocumentKeys(new ax(t,Ho.ct),y).next()})})}}function L1(n){n.createObjectStore("targetDocuments",{keyPath:H2}).createIndex("documentTargetsIndex",G2,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$2,{unique:!0}),n.createObjectStore("targetGlobal")}const Ux="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Bx{constructor(e,t,r,i,a,l,f,y,w,T,x=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=a,this.window=l,this.document=f,this.ri=w,this.oi=T,this.ui=x,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=F=>Promise.resolve(),!Bx.D())throw new Re(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tU(this,i),this.di=t+"main",this.serializer=new l1(y),this.wi=new Tu(this.di,this.ui,new hU(this.serializer)),this.Bs=new JV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=N1(this.serializer),this.qs=new HV,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===T&&ni("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(he.FAILED_PRECONDITION,Ux);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Ho(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,Ie.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Ie.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ie.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Gh(e))return Ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return _0(e).get("owner").next(t=>oe.resolve(this.Ri(t)))}Pi(e){return jD(e).delete(this.clientId)}bi(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ui(r,"clientMetadata");return i.j().next(a=>{const l=e.Si(a,18e5),f=a.filter(y=>-1===l.indexOf(y));return oe.forEach(f,y=>i.delete(y.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?oe.resolve(!0):_0(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Re(he.FAILED_PRECONDITION,Ux);return!1}}return!(!this.networkEnabled||!this.inForeground)||jD(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new ax(t,Ho.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>jD(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return LD.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new QV(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return ND.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ue("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.ui)?eV:14===l?JP:13===l?QP:12===l?X2:11===l?YP:void ct();var l;let f;return this.wi.runTransaction(e,i,a,y=>(f=new ax(y,this.Os?this.Os.next():Ho.ct),"readwrite-primary"===t?this.Ti(f).next(w=>!!w||this.Ei(f)).next(w=>{if(!w)throw ni(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Re(he.FAILED_PRECONDITION,HP);return r(f)}).next(w=>this.vi(f).next(()=>w)):this.Oi(f).next(()=>r(f)))).then(y=>(f.raiseOnCommittedEvent(),y))}Oi(e){return _0(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(he.FAILED_PRECONDITION,Ux)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _0(e).put("owner",t)}static D(){return Tu.D()}Ai(e){const t=_0(e);return t.get("owner").next(r=>this.Ri(r)?(Ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(ni(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,X.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ni("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){ni("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function _0(n){return Ui(n,"owner")}function jD(n){return Ui(n,"clientMetadata")}function jx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class $x{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=on(),i=on();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new $x(e,t.fromCache,r,i)}}class V1{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(a=>a||this.Gi(e,t,i,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if(IO(t))return oe.resolve(null);let r=Os(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=bD(t,null,"F"),r=Os(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=on(...a);return this.Ui.getDocuments(e,l).next(f=>this.indexManager.getMinOffset(e,r).next(y=>{const w=this.ji(t,f);return this.zi(t,w,l,y.readTime)?this.Ki(e,bD(t,null,"F")):this.Wi(e,w,t,y)}))})))}Gi(e,t,r,i){return IO(t)||i.isEqual(Dt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const l=this.ji(t,a);return this.zi(t,l,r,i)?this.Qi(e,t):(tx()<=Oo.in.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yx(t)),this.Wi(e,l,t,jP(i,-1)))})}ji(e,t){let r=new fr(bO(e));return t.forEach((i,a)=>{e0(e,a)&&(r=r.add(a))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Qi(e,t){return tx()<=Oo.in.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",yx(t)),this.Ui.getDocumentsMatchingQuery(e,t,$o.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class fU{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new sr(en),this.Yi=new ed(a=>fg(a),Jw),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new F1(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function U1(n,e,t,r){return new fU(n,e,t,r)}function B1(n,e){return Hx.apply(this,arguments)}function Hx(){return Hx=(0,Ie.Z)(function*(n,e){const t=et(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],f=[];let y=on();for(const w of i){l.push(w.batchId);for(const T of w.mutations)y=y.add(T.key)}for(const w of a){f.push(w.batchId);for(const T of w.mutations)y=y.add(T.key)}return t.localDocuments.getDocuments(r,y).next(w=>({er:w,removedBatchIds:l,addedBatchIds:f}))})})}),Hx.apply(this,arguments)}function j1(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function $1(n,e,t){let r=on(),i=on();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=lo();return t.forEach((f,y)=>{const w=a.get(f);y.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(f)),y.isNoDocument()&&y.version.isEqual(Dt.min())?(e.removeEntry(f,y.readTime),l=l.insert(f,y)):!w.isValidDocument()||y.version.compareTo(w.version)>0||0===y.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(y),l=l.insert(f,y)):Ue("LocalStore","Ignoring outdated watch update for ",f,". Current version:",w.version," Watch version:",y.version)}),{nr:l,sr:i}})}function mU(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Fy(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(a=>a?(i=a,oe.resolve(i)):t.Bs.allocateTargetId(r).next(l=>(i=new nd(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Ly(n,e,t){return Gx.apply(this,arguments)}function Gx(){return Gx=(0,Ie.Z)(function*(n,e,t){const r=et(n),i=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Gh(l))throw l;Ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),Gx.apply(this,arguments)}function $D(n,e,t){const r=et(n);let i=Dt.min(),a=on();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,y,w){const T=et(f),x=T.Yi.get(w);return void 0!==x?oe.resolve(T.Ji.get(x)):T.Bs.getTargetData(y,w)}(r,l,Os(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,f.targetId).next(y=>{a=y})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?i:Dt.min(),t?a:on())).next(f=>(z1(r,DO(e),f),{documents:f,ir:a})))}function H1(n,e){const t=et(n),r=et(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.le(a,e).next(l=>l?l.target:null))}function G1(n,e){const t=et(n),r=t.Xi.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,jP(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(z1(t,e,i),i))}function z1(n,e,t){let r=n.Xi.get(e)||Dt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}function zx(){return zx=(0,Ie.Z)(function*(n,e,t,r){const i=et(n);let a=on(),l=lo();for(const w of t){const T=e.rr(w.metadata.name);w.document&&(a=a.add(T));const x=e.ur(w);x.setReadTime(e.cr(w.metadata.readTime)),l=l.insert(T,x)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),y=yield Fy(i,(w=r,Os(Sy(En.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>$1(w,f,l).next(T=>(f.apply(w),T)).next(T=>i.Bs.removeMatchingKeysForTargetId(w,y.targetId).next(()=>i.Bs.addMatchingKeys(w,a,y.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,T.nr,T.sr)).next(()=>T.nr)))}),zx.apply(this,arguments)}function _U(n,e){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,Ie.Z)(function*(n,e,t=on()){const r=yield Fy(n,Os(Mx(e.bundledQuery))),i=et(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=ri(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.qs.saveNamedQuery(a,e);const f=r.withResumeToken(bi.EMPTY_BYTE_STRING,l);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(a,f).next(()=>i.Bs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Bs.addMatchingKeys(a,t,r.targetId)).next(()=>i.qs.saveNamedQuery(a,e))})}),Wx.apply(this,arguments)}function W1(n,e){return`firestore_clients_${n}_${e}`}function q1(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function qx(n,e){return`firestore_targets_${n}_${e}`}class HD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Re(i.error.code,i.error.message))),l?new HD(e,t,i.state,a):(ni("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class v0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Re(r.error.code,r.error.message))),a?new v0(e,r.state,i):(ni("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class GD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=_x();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=WP(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new GD(e,a):(ni("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Zx{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Zx(t.clientId,t.onlineState):(ni("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Kx{constructor(){this.activeTargetIds=_x()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yx{constructor(e,t,r,i,a){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new sr(en),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=W1(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new Kx),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const a=e.getItem(W1(e.persistenceKey,i));if(a){const l=GD.ar(i,a);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(qx(this.persistenceKey,e));if(r){const i=v0.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(qx(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ue("SharedClientState","READ",e,t),t}setItem(e,t){Ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void ni("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ie.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(a){let l=Ho.ct;if(null!=a)try{const f=JSON.parse(a);Et("number"==typeof f),l=f}catch(f){ni("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==Ho.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Qr(a)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new HD(this.currentUser,e,t,r),a=q1(this.persistenceKey,this.currentUser,e);this.setItem(a,i.hr())}Cr(e){const t=q1(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=qx(this.persistenceKey,e),a=new v0(e,t,r);this.setItem(i,a.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return GD.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return HD.ar(new Vi(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return v0.ar(i,t)}br(e){return Zx.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),l=[],f=[];return a.forEach(y=>{i.has(y)||l.push(y)}),i.forEach(y=>{a.has(y)||f.push(y)}),this.syncEngine.Wr(l,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=_x();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Z1{constructor(){this.Hr=new Kx,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Kx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class vU{Yr(e){}shutdown(){}}class K1{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let zD=null;function Qx(){return null===zD?zD=268435456+Math.round(2147483648*Math.random()):zD++,"0x"+zD.toString(16)}const wU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class EU{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ms="WebChannelConnection";class IU extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,a){const l=Qx(),f=this.To(e,t);Ue("RestConnection",`Sending RPC '${e}' ${l}:`,f,r);const y={};return this.Eo(y,i,a),this.Ao(e,f,y,r).then(w=>(Ue("RestConnection",`Received RPC '${e}' ${l}: `,w),w),w=>{throw Ra("RestConnection",`RPC '${e}' ${l} failed with error: `,w,"url: ",f,"request:",r),w})}vo(e,t,r,i,a,l){return this.Io(e,t,r,i,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ey,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}To(e,t){return`${this.mo}/v1/${t}:${wU[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const a=Qx();return new Promise((l,f)=>{const y=new v2;y.setWithCredentials(!0),y.listenOnce(m2.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case ex.NO_ERROR:const T=y.getResponseJson();Ue(ms,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(T)),l(T);break;case ex.TIMEOUT:Ue(ms,`RPC '${e}' ${a} timed out`),f(new Re(he.DEADLINE_EXCEEDED,"Request time out"));break;case ex.HTTP_ERROR:const x=y.getStatus();if(Ue(ms,`RPC '${e}' ${a} failed with status:`,x,"response text:",y.getResponseText()),x>0){let F=y.getResponseJson();Array.isArray(F)&&(F=F[0]);const H=F?.error;if(H&&H.status&&H.message){const ee=function(ve){const Te=ve.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(Te)>=0?Te:he.UNKNOWN}(H.status);f(new Re(ee,H.message))}else f(new Re(he.UNKNOWN,"Server responded with status "+y.getStatus()))}else f(new Re(he.UNAVAILABLE,"Connection failed."));break;default:ct()}}finally{Ue(ms,`RPC '${e}' ${a} completed.`)}});const w=JSON.stringify(i);Ue(ms,`RPC '${e}' ${a} sending request:`,i),y.send(t,"POST",w,r,15)})}Ro(e,t,r){const i=Qx(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=p2(),f=g2(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;void 0!==w&&(y.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(y.xmlHttpFactory=new _2({})),this.Eo(y.initMessageHeaders,t,r),y.encodeInitMessageHeaders=!0;const T=a.join("");Ue(ms,`Creating RPC '${e}' stream ${i}: ${T}`,y);const x=l.createWebChannel(T,y);let F=!1,H=!1;const ee=new EU({ro:Te=>{H?Ue(ms,`Not sending because RPC '${e}' stream ${i} is closed:`,Te):(F||(Ue(ms,`Opening RPC '${e}' stream ${i} transport.`),x.open(),F=!0),Ue(ms,`RPC '${e}' stream ${i} sending:`,Te),x.send(Te))},oo:()=>x.close()}),ve=(Te,mt,It)=>{Te.listen(mt,vt=>{try{It(vt)}catch(Ft){setTimeout(()=>{throw Ft},0)}})};return ve(x,dD.EventType.OPEN,()=>{H||Ue(ms,`RPC '${e}' stream ${i} transport opened.`)}),ve(x,dD.EventType.CLOSE,()=>{H||(H=!0,Ue(ms,`RPC '${e}' stream ${i} transport closed`),ee.wo())}),ve(x,dD.EventType.ERROR,Te=>{H||(H=!0,Ra(ms,`RPC '${e}' stream ${i} transport errored:`,Te),ee.wo(new Re(he.UNAVAILABLE,"The operation could not be completed")))}),ve(x,dD.EventType.MESSAGE,Te=>{var mt;if(!H){const It=Te.data[0];Et(!!It);const Ft=It.error||(null===(mt=It[0])||void 0===mt?void 0:mt.error);if(Ft){Ue(ms,`RPC '${e}' stream ${i} received error:`,Ft);const nn=Ft.status;let vn=function(Pg){const JL=pi[Pg];if(void 0!==JL)return HO(JL)}(nn),_s=Ft.message;void 0===vn&&(vn=he.INTERNAL,_s="Unknown error status: "+nn+" with message "+Ft.message),H=!0,ee.wo(new Re(vn,_s)),x.close()}else Ue(ms,`RPC '${e}' stream ${i} received:`,It),ee._o(It)}}),ve(f,y2.STAT_EVENT,Te=>{Te.stat===kP.PROXY?Ue(ms,`RPC '${e}' stream ${i} detected buffering proxy`):Te.stat===kP.NOPROXY&&Ue(ms,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{ee.fo()},0),ee}}function Y1(){return typeof window<"u"?window:null}function WD(){return typeof document<"u"?document:null}function w0(n){return new NV(n,!0)}class Jx{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Q1{constructor(e,t,r,i,a,l,f,y){this.ii=e,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Jx(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ie.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ie.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,Ie.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(ni(t.toString()),ni("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Re(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,Ie.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CU extends Q1{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function kV(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:ct(),i=e.targetChange.targetIds||[],a=function(y,w){return y.useProto3Json?(Et(void 0===w||"string"==typeof w),bi.fromBase64String(w||"")):(Et(void 0===w||w instanceof Uint8Array),bi.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(y){const w=void 0===y.code?he.UNKNOWN:HO(y.code);return new Re(w,y.message||"")}(l);t=new ZO(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Nl(n,r.document.name),a=ri(r.document.updateTime),l=r.document.createTime?ri(r.document.createTime):Dt.min(),f=new Yi({mapValue:{fields:r.document.fields}}),y=pr.newFoundDocument(i,a,l,f);t=new MD(r.targetIds||[],r.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const r=e.documentDelete,i=Nl(n,r.document),a=r.readTime?ri(r.readTime):Dt.min(),l=pr.newNoDocument(i,a);t=new MD([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Nl(n,r.document);t=new MD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ct();{const r=e.filter,{count:i=0,unchangedNames:a}=r,l=new TV(i,a);t=new qO(r.targetId,l)}}var y;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Dt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Dt.min():a.readTime?ri(a.readTime):Dt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=c0(this.serializer),t.addTarget=function(i,a){let l;const f=a.target;if(l=ID(f)?{documents:i1(i,f)}:{query:xx(i,f)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=JO(i,a.resumeToken);const y=bx(i,a.expectedCount);null!==y&&(l.expectedCount=y)}else if(a.snapshotVersion.compareTo(Dt.min())>0){l.readTime=Ny(i,a.snapshotVersion.toTimestamp());const y=bx(i,a.expectedCount);null!==y&&(l.expectedCount=y)}return l}(this.serializer,e);const r=function LV(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ct()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=c0(this.serializer),t.removeTarget=e,this.Wo(t)}}class DU extends Q1{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function FV(n,e){return n&&n.length>0?(Et(void 0!==e),n.map(t=>function(r,i){let a=ri(r.updateTime?r.updateTime:i);return a.isEqual(Dt.min())&&(a=ri(i)),new IV(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ri(e.commitTime);return this.listener.cu(r,t)}return Et(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=c0(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>d0(this.serializer,r))};this.Wo(t)}}class bU extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Re(he.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Io(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(he.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.vo(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Re(he.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class SU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(ni(t),this.mu=!1):Ue("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class AU{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(f=>{r.enqueueAndForget((0,Ie.Z)(function*(){var y;nf(l)&&(Ue("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,Ie.Z)(function*(w){const T=et(w);T.vu.add(4),yield Vy(T),T.bu.set("Unknown"),T.vu.delete(4),yield E0(T)}),function(w){return y.apply(this,arguments)})(l))}))}),this.bu=new SU(r,i)}}function E0(n){return eM.apply(this,arguments)}function eM(){return eM=(0,Ie.Z)(function*(n){if(nf(n))for(const e of n.Ru)yield e(!0)}),eM.apply(this,arguments)}function Vy(n){return tM.apply(this,arguments)}function tM(){return tM=(0,Ie.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),tM.apply(this,arguments)}function qD(n,e){const t=et(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),iM(t)?rM(t):By(t).Ko()&&nM(t,e))}function I0(n,e){const t=et(n),r=By(t);t.Au.delete(e),r.Ko()&&J1(t,e),0===t.Au.size&&(r.Ko()?r.jo():nf(t)&&t.bu.set("Unknown"))}function nM(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}By(n).su(e)}function J1(n,e){n.Vu.qt(e),By(n).iu(e)}function rM(n){n.Vu=new AV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),By(n).start(),n.bu.gu()}function iM(n){return nf(n)&&!By(n).Uo()&&n.Au.size>0}function nf(n){return 0===et(n).vu.size}function X1(n){n.Vu=void 0}function xU(n){return sM.apply(this,arguments)}function sM(){return sM=(0,Ie.Z)(function*(n){n.Au.forEach((e,t)=>{nM(n,e)})}),sM.apply(this,arguments)}function MU(n,e){return oM.apply(this,arguments)}function oM(){return oM=(0,Ie.Z)(function*(n,e){X1(n),iM(n)?(n.bu.Iu(e),rM(n)):n.bu.set("Unknown")}),oM.apply(this,arguments)}function RU(n,e,t){return aM.apply(this,arguments)}function aM(){return aM=(0,Ie.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof ZO&&2===e.state&&e.cause)try{yield(r=(0,Ie.Z)(function*(i,a){const l=a.cause;for(const f of a.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ZD(n,r)}else if(e instanceof MD?n.Vu.Ht(e):e instanceof qO?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Dt.min()))try{const r=yield j1(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.Vu.ce(a);return l.targetChanges.forEach((f,y)=>{if(f.resumeToken.approximateByteSize()>0){const w=i.Au.get(y);w&&i.Au.set(y,w.withResumeToken(f.resumeToken,a))}}),l.targetMismatches.forEach((f,y)=>{const w=i.Au.get(f);if(!w)return;i.Au.set(f,w.withResumeToken(bi.EMPTY_BYTE_STRING,w.snapshotVersion)),J1(i,f);const T=new nd(w.target,f,y,w.sequenceNumber);nM(i,T)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ue("RemoteStore","Failed to raise snapshot:",r),yield ZD(n,r)}var r}),aM.apply(this,arguments)}function ZD(n,e,t){return uM.apply(this,arguments)}function uM(){return uM=(0,Ie.Z)(function*(n,e,t){if(!Gh(e))throw e;n.vu.add(1),yield Vy(n),n.bu.set("Offline"),t||(t=()=>j1(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){Ue("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield E0(n)}))}),uM.apply(this,arguments)}function ek(n,e){return e().catch(t=>ZD(n,t,e))}function Uy(n){return lM.apply(this,arguments)}function lM(){return lM=(0,Ie.Z)(function*(n){const e=et(n),t=rf(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;NU(e);)try{const i=yield mU(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,PU(e,i)}catch(i){yield ZD(e,i)}tk(e)&&nk(e)}),lM.apply(this,arguments)}function NU(n){return nf(n)&&n.Eu.length<10}function PU(n,e){n.Eu.push(e);const t=rf(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function tk(n){return nf(n)&&!rf(n).Uo()&&n.Eu.length>0}function nk(n){rf(n).start()}function OU(n){return cM.apply(this,arguments)}function cM(){return cM=(0,Ie.Z)(function*(n){rf(n).hu()}),cM.apply(this,arguments)}function kU(n){return dM.apply(this,arguments)}function dM(){return dM=(0,Ie.Z)(function*(n){const e=rf(n);for(const t of n.Eu)e.uu(t.mutations)}),dM.apply(this,arguments)}function FU(n,e,t){return hM.apply(this,arguments)}function hM(){return hM=(0,Ie.Z)(function*(n,e,t){const r=n.Eu.shift(),i=Ex.from(r,e,t);yield ek(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Uy(n)}),hM.apply(this,arguments)}function LU(n,e){return fM.apply(this,arguments)}function fM(){return fM=(0,Ie.Z)(function*(n,e){var t;e&&rf(n).ou&&(yield(t=(0,Ie.Z)(function*(r,i){if($O(a=i.code)&&a!==he.ABORTED){const l=r.Eu.shift();rf(r).Qo(),yield ek(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Uy(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),tk(n)&&nk(n)}),fM.apply(this,arguments)}function rk(n,e){return pM.apply(this,arguments)}function pM(){return pM=(0,Ie.Z)(function*(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const r=nf(t);t.vu.add(3),yield Vy(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield E0(t)}),pM.apply(this,arguments)}function gM(n,e){return mM.apply(this,arguments)}function mM(){return mM=(0,Ie.Z)(function*(n,e){const t=et(n);e?(t.vu.delete(2),yield E0(t)):e||(t.vu.add(2),yield Vy(t),t.bu.set("Unknown"))}),mM.apply(this,arguments)}function By(n){return n.Su||(n.Su=function(e,t,r){const i=et(e);return i.fu(),new CU(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:xU.bind(null,n),ao:MU.bind(null,n),nu:RU.bind(null,n)}),n.Ru.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.Su.Qo(),iM(n)?rM(n):n.bu.set("Unknown")):(yield n.Su.stop(),X1(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function rf(n){return n.Du||(n.Du=function(e,t,r){const i=et(e);return i.fu(),new DU(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:OU.bind(null,n),ao:LU.bind(null,n),au:kU.bind(null,n),cu:FU.bind(null,n)}),n.Ru.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.Du.Qo(),yield Uy(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ue("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class yM{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,f=new yM(e,t,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jy(n,e){if(ni("AsyncQueue",`${e}: ${n}`),Gh(n))return new Re(he.UNAVAILABLE,`${e}: ${n}`);throw n}class $y{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=t0(),this.sortedSet=new sr(this.comparator)}static emptySet(e){return new $y(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $y)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new $y;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ik{constructor(){this.Cu=new sr(Qe.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ct():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Hy{constructor(e,t,r,i,a,l,f,y,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=y,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new Hy(e,t,$y.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class VU{constructor(){this.Nu=void 0,this.listeners=[]}}class UU{constructor(){this.queries=new ed(e=>CO(e),Xw),this.onlineState="Unknown",this.ku=new Set}}function _M(n,e){return vM.apply(this,arguments)}function vM(){return vM=(0,Ie.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new VU),i)try{a.Nu=yield t.onListen(r)}catch(l){const f=jy(l,`Initialization of query '${yx(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&IM(t)}),vM.apply(this,arguments)}function wM(n,e){return EM.apply(this,arguments)}function EM(){return EM=(0,Ie.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),EM.apply(this,arguments)}function BU(n,e){const t=et(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.$u(i)&&(r=!0);l.Nu=i}}r&&IM(t)}function jU(n,e,t){const r=et(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function IM(n){n.ku.forEach(e=>{e.next()})}class CM{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Hy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Hy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class $U{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class sk{constructor(e){this.serializer=e}rr(e){return Nl(this.serializer,e)}ur(e){return e.metadata.exists?r1(this.serializer,e.document,!1):pr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return ri(e)}}class HU{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ok(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=En.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new sk(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.rr(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||on()).add(a);t.set(l,f)}}return t}complete(){var e=this;return(0,Ie.Z)(function*(){const t=yield function yU(n,e,t,r){return zx.apply(this,arguments)}(e.localStore,new sk(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield _U(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function ok(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class ak{constructor(e){this.key=e}}class uk{constructor(e){this.key=e}}class lk{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=on(),this.mutatedKeys=on(),this.tc=bO(e),this.ec=new $y(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new ik,i=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,x)=>{const F=i.get(T),H=e0(this.query,x)?x:null,ee=!!F&&this.mutatedKeys.has(F.key),ve=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let Te=!1;F&&H?F.data.isEqual(H.data)?ee!==ve&&(r.track({type:3,doc:H}),Te=!0):this.rc(F,H)||(r.track({type:2,doc:H}),Te=!0,(y&&this.tc(H,y)>0||w&&this.tc(H,w)<0)&&(f=!0)):!F&&H?(r.track({type:0,doc:H}),Te=!0):F&&!H&&(r.track({type:1,doc:F}),Te=!0,(y||w)&&(f=!0)),Te&&(H?(l=l.add(H),a=ve?a.add(T):a.delete(T)):(l=l.delete(T),a=a.delete(T)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const T="F"===this.query.limitType?l.last():l.first();l=l.delete(T.key),a=a.delete(T.key),r.track({type:1,doc:T})}return{ec:l,ic:r,zi:f,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((w,T)=>function(x,F){const H=ee=>{switch(ee){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct()}};return H(x)-H(F)}(w.type,T.type)||this.tc(w.doc,T.doc)),this.oc(r);const l=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,y=f!==this.Xu;return this.Xu=f,0!==a.length||y?{snapshot:new Hy(this.query,e.ec,i,a,e.mutatedKeys,0===f,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new ik,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=on(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new uk(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new ak(r))}),t}hc(e){this.Yu=e.ir,this.Zu=on();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Hy.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class GU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class zU{constructor(e){this.key=e,this.fc=!1}}class WU{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new ed(f=>CO(f),Xw),this._c=new Map,this.mc=new Set,this.gc=new sr(Qe.comparator),this.yc=new Map,this.Ic=new Lx,this.Tc={},this.Ec=new Map,this.Ac=Ig.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function qU(n,e){return DM.apply(this,arguments)}function DM(){return DM=(0,Ie.Z)(function*(n,e){const t=qM(n);let r,i;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const l=yield Fy(t.localStore,Os(e)),f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield bM(t,e,r,"current"===f,l.resumeToken),t.isPrimaryClient&&qD(t.remoteStore,l)}return i}),DM.apply(this,arguments)}function bM(n,e,t,r,i){return TM.apply(this,arguments)}function TM(){return TM=(0,Ie.Z)(function*(n,e,t,r,i){n.Rc=(x,F,H)=>{return(ee=(0,Ie.Z)(function*(ve,Te,mt,It){let vt=Te.view.sc(mt);vt.zi&&(vt=yield $D(ve.localStore,Te.query,!1).then(({documents:vn})=>Te.view.sc(vn,vt)));const Ft=It&&It.targetChanges.get(Te.targetId),nn=Te.view.applyChanges(vt,ve.isPrimaryClient,Ft);return FM(ve,Te.targetId,nn.cc),nn.snapshot}),function(ve,Te,mt,It){return ee.apply(this,arguments)})(n,x,F,H);var ee};const a=yield $D(n.localStore,e,!0),l=new lk(e,a.ir),f=l.sc(a.documents),y=u0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),w=l.applyChanges(f,n.isPrimaryClient,y);FM(n,t,w.cc);const T=new GU(e,t,l);return n.wc.set(e,T),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),w.snapshot}),TM.apply(this,arguments)}function ZU(n,e){return SM.apply(this,arguments)}function SM(){return SM=(0,Ie.Z)(function*(n,e){const t=et(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!Xw(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ly(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),I0(t.remoteStore,r.targetId),Gy(t,r.targetId)}).catch(Hh))):(Gy(t,r.targetId),yield Ly(t.localStore,r.targetId,!0))}),SM.apply(this,arguments)}function AM(){return AM=(0,Ie.Z)(function*(n,e,t){const r=ZM(n);try{const i=yield function(a,l){const f=et(a),y=Ar.now(),w=l.reduce((F,H)=>F.add(H.key),on());let T,x;return f.persistence.runTransaction("Locally write mutations","readwrite",F=>{let H=lo(),ee=on();return f.Zi.getEntries(F,w).next(ve=>{H=ve,H.forEach((Te,mt)=>{mt.isValidDocument()||(ee=ee.add(Te))})}).next(()=>f.localDocuments.getOverlayedDocuments(F,H)).next(ve=>{T=ve;const Te=[];for(const mt of l){const It=DV(mt,T.get(mt.key).overlayedDocument);null!=It&&Te.push(new td(mt.key,It,lO(It.value.mapValue),xr.exists(!0)))}return f.mutationQueue.addMutationBatch(F,y,Te,l)}).next(ve=>{x=ve;const Te=ve.applyToLocalDocumentSet(T,ee);return f.documentOverlayCache.saveOverlays(F,ve.batchId,Te)})}).then(()=>({batchId:x.batchId,changes:SO(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,f){let y=a.Tc[a.currentUser.toKey()];y||(y=new sr(en)),y=y.insert(l,f),a.Tc[a.currentUser.toKey()]=y}(r,i.batchId,t),yield rd(r,i.changes),yield Uy(r.remoteStore)}catch(i){const a=jy(i,"Failed to persist write");t.reject(a)}}),AM.apply(this,arguments)}function ck(n,e){return xM.apply(this,arguments)}function xM(){return xM=(0,Ie.Z)(function*(n,e){const t=et(n);try{const r=yield function gU(n,e){const t=et(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((T,x)=>{const F=i.get(x);if(!F)return;f.push(t.Bs.removeMatchingKeys(a,T.removedDocuments,x).next(()=>t.Bs.addMatchingKeys(a,T.addedDocuments,x)));let H=F.withSequenceNumber(a.currentSequenceNumber);var ee,ve,Te;null!==e.targetMismatches.get(x)?H=H.withResumeToken(bi.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):T.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(T.resumeToken,r)),i=i.insert(x,H),ve=H,Te=T,(0===(ee=F).resumeToken.approximateByteSize()||ve.snapshotVersion.toMicroseconds()-ee.snapshotVersion.toMicroseconds()>=3e8||Te.addedDocuments.size+Te.modifiedDocuments.size+Te.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(a,H))});let y=lo(),w=on();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,T))}),f.push($1(a,l,e.documentUpdates).next(T=>{y=T.nr,w=T.sr})),!r.isEqual(Dt.min())){const T=t.Bs.getLastRemoteSnapshotVersion(a).next(x=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(T)}return oe.waitFor(f).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,y,w)).next(()=>y)}).then(a=>(t.Ji=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.yc.get(a);l&&(Et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.fc=!0:i.modifiedDocuments.size>0?Et(l.fc):i.removedDocuments.size>0&&(Et(l.fc),l.fc=!1))}),yield rd(t,r,e)}catch(r){yield Hh(r)}}),xM.apply(this,arguments)}function dk(n,e,t){const r=et(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((a,l)=>{const f=l.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(a,l){const f=et(a);f.onlineState=l;let y=!1;f.queries.forEach((w,T)=>{for(const x of T.listeners)x.Mu(l)&&(y=!0)}),y&&IM(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function YU(n,e,t){return MM.apply(this,arguments)}function MM(){return MM=(0,Ie.Z)(function*(n,e,t){const r=et(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),a=i&&i.key;if(a){let l=new sr(Qe.comparator);l=l.insert(a,pr.newNoDocument(a,Dt.min()));const f=on().add(a),y=new a0(Dt.min(),new Map,new sr(en),l,f);yield ck(r,y),r.gc=r.gc.remove(a),r.yc.delete(e),LM(r)}else yield Ly(r.localStore,e,!1).then(()=>Gy(r,e,t)).catch(Hh)}),MM.apply(this,arguments)}function QU(n,e){return RM.apply(this,arguments)}function RM(){return RM=(0,Ie.Z)(function*(n,e){const t=et(n),r=e.batch.batchId;try{const i=yield function pU(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,f,y,w){const T=y.batch,x=T.keys();let F=oe.resolve();return x.forEach(H=>{F=F.next(()=>w.getEntry(f,H)).next(ee=>{const ve=y.docVersions.get(H);Et(null!==ve),ee.version.compareTo(ve)<0&&(T.applyToRemoteDocument(ee,y),ee.isValidDocument()&&(ee.setReadTime(y.commitVersion),w.addEntry(ee)))})}),F.next(()=>l.mutationQueue.removeMutationBatch(f,T))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=on();for(let y=0;y<l.mutationResults.length;++y)l.mutationResults[y].transformResults.length>0&&(f=f.add(l.batch.mutations[y].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);kM(t,r,null),OM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield rd(t,i)}catch(i){yield Hh(i)}}),RM.apply(this,arguments)}function JU(n,e,t){return NM.apply(this,arguments)}function NM(){return NM=(0,Ie.Z)(function*(n,e,t){const r=et(n);try{const i=yield function(a,l){const f=et(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let w;return f.mutationQueue.lookupMutationBatch(y,l).next(T=>(Et(null!==T),w=T.keys(),f.mutationQueue.removeMutationBatch(y,T))).next(()=>f.mutationQueue.performConsistencyCheck(y)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(y,w,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w)).next(()=>f.localDocuments.getDocuments(y,w))})}(r.localStore,e);kM(r,e,t),OM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield rd(r,i)}catch(i){yield Hh(i)}}),NM.apply(this,arguments)}function PM(){return PM=(0,Ie.Z)(function*(n,e){const t=et(n);nf(t.remoteStore)||Ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=et(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=jy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),PM.apply(this,arguments)}function OM(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function kM(n,e,t){const r=et(n);let i=r.Tc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Gy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||hk(n,r)})}function hk(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(I0(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),LM(n))}function FM(n,e,t){for(const r of t)r instanceof ak?(n.Ic.addReference(r.key,e),eB(n,r)):r instanceof uk?(Ue("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||hk(n,r.key)):ct()}function eB(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ue("SyncEngine","New document in limbo: "+t),n.mc.add(r),LM(n))}function LM(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Qe(En.fromString(e)),r=n.Ac.next();n.yc.set(r,new zU(t)),n.gc=n.gc.insert(t,r),qD(n.remoteStore,new nd(Os(Sy(t.path)),r,"TargetPurposeLimboResolution",Ho.ct))}}function rd(n,e,t){return VM.apply(this,arguments)}function VM(){return VM=(0,Ie.Z)(function*(n,e,t){const r=et(n),i=[],a=[],l=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,y)=>{l.push(r.Rc(y,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const T=$x.Li(y.targetId,w);a.push(T)}}))}),yield Promise.all(l),r.dc.nu(i),yield(f=(0,Ie.Z)(function*(y,w){const T=et(y);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>oe.forEach(w,F=>oe.forEach(F.Fi,H=>T.persistence.referenceDelegate.addReference(x,F.targetId,H)).next(()=>oe.forEach(F.Bi,H=>T.persistence.referenceDelegate.removeReference(x,F.targetId,H)))))}catch(x){if(!Gh(x))throw x;Ue("LocalStore","Failed to update sequence numbers: "+x)}for(const x of w){const F=x.targetId;if(!x.fromCache){const H=T.Ji.get(F),ve=H.withLastLimboFreeSnapshotVersion(H.snapshotVersion);T.Ji=T.Ji.insert(F,ve)}}}),function(y,w){return f.apply(this,arguments)})(r.localStore,a))}),VM.apply(this,arguments)}function tB(n,e){return UM.apply(this,arguments)}function UM(){return UM=(0,Ie.Z)(function*(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){Ue("SyncEngine","User change. New user:",e.toKey());const r=yield B1(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(l=>{l.forEach(f=>{f.reject(new Re(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield rd(t,r.er)}var i}),UM.apply(this,arguments)}function nB(n,e){const t=et(n),r=t.yc.get(e);if(r&&r.fc)return on().add(r.key);{let i=on();const a=t._c.get(e);if(!a)return i;for(const l of a){const f=t.wc.get(l);i=i.unionWith(f.view.nc)}return i}}function rB(n,e){return BM.apply(this,arguments)}function BM(){return BM=(0,Ie.Z)(function*(n,e){const t=et(n),r=yield $D(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&FM(t,e.targetId,i.cc),i}),BM.apply(this,arguments)}function iB(n,e){return jM.apply(this,arguments)}function jM(){return jM=(0,Ie.Z)(function*(n,e){const t=et(n);return G1(t.localStore,e).then(r=>rd(t,r))}),jM.apply(this,arguments)}function sB(n,e,t,r){return $M.apply(this,arguments)}function $M(){return $M=(0,Ie.Z)(function*(n,e,t,r){const i=et(n),a=yield function(l,f){const y=et(l),w=et(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",T=>w.Sn(T,f).next(x=>x?y.localDocuments.getDocuments(T,x):oe.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield Uy(i.remoteStore):"acknowledged"===t||"rejected"===t?(kM(i,e,r||null),OM(i,e),f=e,et(et(i.localStore).mutationQueue).Cn(f)):ct(),yield rd(i,a)):Ue("SyncEngine","Cannot apply mutation batch with id: "+e)}),$M.apply(this,arguments)}function HM(){return HM=(0,Ie.Z)(function*(n,e){const t=et(n);if(qM(t),ZM(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield fk(t,r.toArray());t.vc=!0,yield gM(t.remoteStore,!0);for(const a of i)qD(t.remoteStore,a)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Gy(t,l),Ly(t.localStore,l,!0))),I0(t.remoteStore,l)}),yield i,yield fk(t,r),function(a){const l=et(a);l.yc.forEach((f,y)=>{I0(l.remoteStore,y)}),l.Ic.Ts(),l.yc=new Map,l.gc=new sr(Qe.comparator)}(t),t.vc=!1,yield gM(t.remoteStore,!1)}}),HM.apply(this,arguments)}function fk(n,e,t){return GM.apply(this,arguments)}function GM(){return GM=(0,Ie.Z)(function*(n,e,t){const r=et(n),i=[],a=[];for(const l of e){let f;const y=r._c.get(l);if(y&&0!==y.length){f=yield Fy(r.localStore,Os(y[0]));for(const w of y){const T=r.wc.get(w),x=yield rB(r,T);x.snapshot&&a.push(x.snapshot)}}else{const w=yield H1(r.localStore,l);f=yield Fy(r.localStore,w),yield bM(r,pk(w),l,!1,f.resumeToken)}i.push(f)}return r.dc.nu(a),i}),GM.apply(this,arguments)}function pk(n){return EO(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function aB(n){const e=et(n);return et(et(e.localStore).persistence).$i()}function uB(n,e,t,r){return zM.apply(this,arguments)}function zM(){return zM=(0,Ie.Z)(function*(n,e,t,r){const i=et(n);if(i.vc)return void Ue("SyncEngine","Ignoring unexpected query state notification.");const a=i._c.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield G1(i.localStore,DO(a[0])),f=a0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,bi.EMPTY_BYTE_STRING);yield rd(i,l,f);break}case"rejected":yield Ly(i.localStore,e,!0),Gy(i,e,r);break;default:ct()}}),zM.apply(this,arguments)}function lB(n,e,t){return WM.apply(this,arguments)}function WM(){return WM=(0,Ie.Z)(function*(n,e,t){const r=qM(n);if(r.vc){for(const i of e){if(r._c.has(i)){Ue("SyncEngine","Adding an already active target "+i);continue}const a=yield H1(r.localStore,i),l=yield Fy(r.localStore,a);yield bM(r,pk(a),l.targetId,!1,l.resumeToken),qD(r.remoteStore,l)}for(const i of t)r._c.has(i)&&(yield Ly(r.localStore,i,!1).then(()=>{I0(r.remoteStore,i),Gy(r,i)}).catch(Hh))}}),WM.apply(this,arguments)}function qM(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ck.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YU.bind(null,e),e.dc.nu=BU.bind(null,e.eventManager),e.dc.Pc=jU.bind(null,e.eventManager),e}function ZM(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JU.bind(null,e),e}class C0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ie.Z)(function*(){t.serializer=w0(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return U1(this.persistence,new V1,e.initialUser,this.serializer)}createPersistence(e){return new Vx(UD.zs,this.serializer)}createSharedClientState(e){return new Z1}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class KM extends C0{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield ZM(r.Vc.syncEngine),yield Uy(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return U1(this.persistence,new V1,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new x1(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new F2(t,this.persistence);return new k2(e.asyncQueue,r)}createPersistence(e){const t=jx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?gs.withCacheSize(this.cacheSizeBytes):gs.DEFAULT;return new Bx(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Y1(),WD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Z1}}class gk extends KM{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof Yx&&(r.sharedClientState.syncEngine={jr:sB.bind(null,i),zr:uB.bind(null,i),Wr:lB.bind(null,i),$i:aB.bind(null,i),Qr:iB.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var a=(0,Ie.Z)(function*(l){yield function oB(n,e){return HM.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Y1();if(!Yx.D(t))throw new Re(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=jx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class zy{initialize(e,t){var r=this;return(0,Ie.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>dk(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=tB.bind(null,r.syncEngine),yield gM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new UU}createDatastore(e){const t=w0(e.databaseInfo.databaseId),r=new IU(e.databaseInfo);return new bU(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>dk(this.syncEngine,f,0),l=K1.D()?new K1:new vU,new AU(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,f,y,w){const T=new WU(r,i,a,l,f,y);return w&&(T.vc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ie.Z)(function*(t){const r=et(t);Ue("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Vy(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function mk(n,e=10240){let t=0;return{read:()=>(0,Ie.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class KD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):ni("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class hB{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Di,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const a=yield e.$c(i);return new $U(JSON.parse(a),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ie.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,Ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class fB{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ie.Z)(function*(a,l){const f=et(a),y=c0(f.serializer)+"/documents",w={documents:l.map(H=>l0(f.serializer,H))},T=yield f.vo("BatchGetDocuments",y,w,l.length),x=new Map;T.forEach(H=>{const ee=function OV(n,e){return"found"in e?function(t,r){Et(!!r.found);const i=Nl(t,r.found.name),a=ri(r.found.updateTime),l=r.found.createTime?ri(r.found.createTime):Dt.min(),f=new Yi({mapValue:{fields:r.found.fields}});return pr.newFoundDocument(i,a,l,f)}(n,e):"missing"in e?function(t,r){Et(!!r.missing),Et(!!r.readTime);const i=Nl(t,r.missing),a=ri(r.readTime);return pr.newNoDocument(i,a)}(n,e):ct()}(f.serializer,H);x.set(ee.key.toString(),ee)});const F=[];return l.forEach(H=>{const ee=x.get(H.toString());Et(!!ee),F.push(ee)}),F}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ry(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Qe.fromPath(i);e.mutations.push(new vx(a,e.precondition(a)))}),yield(r=(0,Ie.Z)(function*(i,a){const l=et(i),f=c0(l.serializer)+"/documents",y={writes:a.map(w=>d0(l.serializer,w))};yield l.Io("Commit",f,y)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ct();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?xr.exists(!1):xr.updateTime(t):xr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new Re(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xr.updateTime(t)}return xr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class pB{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new Jx(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ie.Z)(function*(){const t=new fB(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Uc(a)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Ww(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!$O(t)}return!1}}class gB{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Vi.UNAUTHENTICATED,this.clientId=UP.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ie.Z)(function*(f){Ue("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ue("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=jy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function YD(n,e){return YM.apply(this,arguments)}function YM(){return YM=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ie.Z)(function*(a){r.isEqual(a)||(yield B1(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),YM.apply(this,arguments)}function QM(n,e){return JM.apply(this,arguments)}function JM(){return JM=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield XM(n);Ue("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>rk(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>rk(e.remoteStore,a)),n._onlineComponents=e}),JM.apply(this,arguments)}function yk(n){return"FirebaseError"===n.name?n.code===he.FAILED_PRECONDITION||n.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function XM(n){return eR.apply(this,arguments)}function eR(){return eR=(0,Ie.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ue("FirestoreClient","Using user provided OfflineComponentProvider");try{yield YD(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!yk(t))throw t;Ra("Error using user provided cache. Falling back to memory cache: "+t),yield YD(n,new C0)}}else Ue("FirestoreClient","Using default OfflineComponentProvider"),yield YD(n,new C0);return n._offlineComponents}),eR.apply(this,arguments)}function QD(n){return tR.apply(this,arguments)}function tR(){return tR=(0,Ie.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ue("FirestoreClient","Using user provided OnlineComponentProvider"),yield QM(n,n._uninitializedComponentsProvider._online)):(Ue("FirestoreClient","Using default OnlineComponentProvider"),yield QM(n,new zy))),n._onlineComponents}),tR.apply(this,arguments)}function _k(n){return XM(n).then(e=>e.persistence)}function JD(n){return XM(n).then(e=>e.localStore)}function vk(n){return QD(n).then(e=>e.remoteStore)}function nR(n){return QD(n).then(e=>e.syncEngine)}function Wy(n){return rR.apply(this,arguments)}function rR(){return rR=(0,Ie.Z)(function*(n){const e=yield QD(n),t=e.eventManager;return t.onListen=qU.bind(null,e.syncEngine),t.onUnlisten=ZU.bind(null,e.syncEngine),t}),rR.apply(this,arguments)}function Ek(n,e,t={}){const r=new Di;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(i,a,l,f,y){const w=new KD({next:x=>{a.enqueueAndForget(()=>wM(i,T));const F=x.docs.has(l);!F&&x.fromCache?y.reject(new Re(he.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&x.fromCache&&f&&"server"===f.source?y.reject(new Re(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),T=new CM(Sy(l.path),w,{includeMetadataChanges:!0,Ku:!0});return _M(i,T)}(yield Wy(n),n.asyncQueue,e,t,r)})),r.promise}function Ik(n,e,t={}){const r=new Di;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(i,a,l,f,y){const w=new KD({next:x=>{a.enqueueAndForget(()=>wM(i,T)),x.fromCache&&"server"===f.source?y.reject(new Re(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(x)},error:x=>y.reject(x)}),T=new CM(l,w,{includeMetadataChanges:!0,Ku:!0});return _M(i,T)}(yield Wy(n),n.asyncQueue,e,t,r)})),r.promise}function Ck(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const Dk=new Map;function iR(n,e,t){if(!t)throw new Re(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function bk(n,e,t,r){if(!0===e&&!0===r)throw new Re(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Tk(n){if(!Qe.isDocumentKey(n))throw new Re(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Sk(n){if(Qe.isDocumentKey(n))throw new Re(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function XD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ct()}function yn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=XD(n);throw new Re(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ak(n,e){if(e<=0)throw new Re(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class xk{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Ck(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Re(he.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Re(he.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Re(he.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class D0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xk({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Re(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xk(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new C2;switch(t.type){case"firstParty":return new S2(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Re(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Dk.get(e);t&&(Ue("ComponentProvider","Removing Datastore"),Dk.delete(e),t.terminate())}(this),Promise.resolve()}}class gr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gr(this.firestore,e,this._key)}}class Qi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qi(this.firestore,e,this._query)}}class Pl extends Qi{constructor(e,t,r){super(e,t,Sy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gr(this.firestore,null,new Qe(e))}withConverter(e){return new Pl(this.firestore,e,this._path)}}function Rk(n,e,...t){if(n=(0,X.m9)(n),iR("collection","path",e),n instanceof D0){const r=En.fromString(e,...t);return Sk(r),new Pl(n,null,r)}{if(!(n instanceof gr||n instanceof Pl))throw new Re(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(e,...t));return Sk(r),new Pl(n.firestore,null,r)}}function eb(n,e,...t){if(n=(0,X.m9)(n),1===arguments.length&&(e=UP.A()),iR("doc","path",e),n instanceof D0){const r=En.fromString(e,...t);return Tk(r),new gr(n,null,new Qe(r))}{if(!(n instanceof gr||n instanceof Pl))throw new Re(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(e,...t));return Tk(r),new gr(n.firestore,n instanceof Pl?n.converter:null,new Qe(r))}}function Nk(n,e){return n=(0,X.m9)(n),e=(0,X.m9)(e),(n instanceof gr||n instanceof Pl)&&(e instanceof gr||e instanceof Pl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function sR(n,e){return n=(0,X.m9)(n),e=(0,X.m9)(e),n instanceof Qi&&e instanceof Qi&&n.firestore===e.firestore&&Xw(n._query,e._query)&&n.converter===e.converter}class bB{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Jx(this,"async_queue_retry"),this.Xc=()=>{const t=WD();t&&Ue("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=WD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=WD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Di;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Gh(t))throw t;Ue("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,ni("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=yM.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(i),i}Zc(){this.Wc&&ct()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ie.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function oR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class TB{constructor(){this._progressObserver={},this._taskCompletionResolver=new Di,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class mr extends D0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new bB,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Pk(this),this._firestoreClient.terminate()}}function ii(n){return n._firestoreClient||Pk(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Pk(n){var e,t,r;const i=n._freezeSettings(),a=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new rV(n._databaseId,f,n._persistenceKey,(w=i).host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,Ck(w.experimentalLongPollingOptions),w.useFetchStreams));var f,w;n._firestoreClient=new gB(n._authCredentials,n._appCheckCredentials,n._queue,a),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function Ok(n,e,t){const r=new Di;return n.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield YD(n,t),yield QM(n,e),r.resolve()}catch(i){const a=i;if(!yk(a))throw a;Ra("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function kk(n){if(n._initialized||n._terminated)throw new Re(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ol{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ol(bi.fromBase64String(e))}catch(t){throw new Re(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ol(bi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class id{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Dg{constructor(e){this._methodName=e}}class tb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return en(this._lat,e._lat)||en(this._long,e._long)}}const LB=/^__.*__$/;class VB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new td(e,this.data,this.fieldMask,t,this.fieldTransforms):new My(e,this.data,t,this.fieldTransforms)}}class Fk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new td(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Lk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct()}}class nb{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new nb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return sb(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Lk(this.ca)&&LB.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class UB{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||w0(e)}ya(e,t,r,i=!1){return new nb({ca:e,methodName:t,ga:r,path:Gr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bg(n){const e=n._freezeSettings(),t=w0(n._databaseId);return new UB(n._databaseId,!!e.ignoreUndefinedProperties,t)}function rb(n,e,t,r,i,a={}){const l=n.ya(a.merge||a.mergeFields?2:0,e,t,i);cR("Data must be an object, but it was:",l,r);const f=Bk(r,l);let y,w;if(a.merge)y=new uo(l.fieldMask),w=l.fieldTransforms;else if(a.mergeFields){const T=[];for(const x of a.mergeFields){const F=S0(e,x,t);if(!l.contains(F))throw new Re(he.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);$k(T,F)||T.push(F)}y=new uo(T),w=l.fieldTransforms.filter(x=>y.covers(x.field))}else y=null,w=l.fieldTransforms;return new VB(new Yi(f),y,w)}class T0 extends Dg{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof T0}}function Vk(n,e,t){return new nb({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class aR extends Dg{_toFieldTransform(e){return new r0(e.path,new Ay)}isEqual(e){return e instanceof aR}}class BB extends Dg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Vk(this,e,!0),r=this.pa.map(a=>Tg(a,t)),i=new gg(r);return new r0(e.path,i)}isEqual(e){return this===e}}class jB extends Dg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Vk(this,e,!0),r=this.pa.map(a=>Tg(a,t)),i=new mg(r);return new r0(e.path,i)}isEqual(e){return this===e}}class $B extends Dg{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new xy(e.serializer,RO(e.serializer,this.Ia));return new r0(e.path,t)}isEqual(e){return this===e}}function uR(n,e,t,r){const i=n.ya(1,e,t);cR("Data must be an object, but it was:",i,r);const a=[],l=Yi.empty();zh(r,(y,w)=>{const T=ib(e,y,t);w=(0,X.m9)(w);const x=i.da(T);if(w instanceof T0)a.push(T);else{const F=Tg(w,x);null!=F&&(a.push(T),l.set(T,F))}});const f=new uo(a);return new Fk(l,f,i.fieldTransforms)}function lR(n,e,t,r,i,a){const l=n.ya(1,e,t),f=[S0(e,r,t)],y=[i];if(a.length%2!=0)throw new Re(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<a.length;F+=2)f.push(S0(e,a[F])),y.push(a[F+1]);const w=[],T=Yi.empty();for(let F=f.length-1;F>=0;--F)if(!$k(w,f[F])){const H=f[F];let ee=y[F];ee=(0,X.m9)(ee);const ve=l.da(H);if(ee instanceof T0)w.push(H);else{const Te=Tg(ee,ve);null!=Te&&(w.push(H),T.set(H,Te))}}const x=new uo(w);return new Fk(T,x,l.fieldTransforms)}function Uk(n,e,t,r=!1){return Tg(t,n.ya(r?4:3,e))}function Tg(n,e){if(jk(n=(0,X.m9)(n)))return cR("Unsupported field value:",e,n),Bk(n,e);if(n instanceof Dg)return function(t,r){if(!Lk(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let f=Tg(l,r.wa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,X.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return RO(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Ar.fromDate(t);return{timestampValue:Ny(r.serializer,i)}}if(t instanceof Ar){const i=new Ar(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ny(r.serializer,i)}}if(t instanceof tb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ol)return{bytesValue:JO(r.serializer,t._byteString)};if(t instanceof gr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Tx(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${XD(t)}`)}(n,e)}function Bk(n,e){const t={};return eO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zh(n,(r,i)=>{const a=Tg(i,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function jk(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ar||n instanceof tb||n instanceof Ol||n instanceof gr||n instanceof Dg)}function cR(n,e,t){if(!jk(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=XD(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function S0(n,e,t){if((e=(0,X.m9)(e))instanceof id)return e._internalPath;if("string"==typeof e)return ib(n,e);throw sb("Field path arguments must be of type string or ",n,!1,void 0,t)}const HB=new RegExp("[~\\*/\\[\\]]");function ib(n,e,t){if(e.search(HB)>=0)throw sb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new id(...e.split("."))._internalPath}catch{throw sb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sb(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(a||l)&&(y+=" (found",a&&(y+=` in field ${r}`),l&&(y+=` in document ${i}`),y+=")"),new Re(he.INVALID_ARGUMENT,f+n+y)}function $k(n,e){return n.some(t=>t.isEqual(e))}class A0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new gr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new GB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ob("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class GB extends A0{data(){return super.data()}}function ob(n,e){return"string"==typeof e?ib(n,e):e instanceof id?e._internalPath:e._delegate._internalPath}function Hk(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dR{}class x0 extends dR{}function sf(n,e,...t){let r=[];e instanceof dR&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof qy).length,l=i.filter(f=>f instanceof M0).length;if(a>1||a>0&&l>0)throw new Re(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class M0 extends x0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new M0(e,t,r)}_apply(e){const t=this._parse(e);return qk(e._query,t),new Qi(e.firestore,e.converter,mx(e._query,t))}_parse(e){const t=bg(e.firestore);return function(i,a,l,f,y,w,T){let x;if(y.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Re(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){Wk(T,w);const F=[];for(const H of T)F.push(zk(f,i,H));x={arrayValue:{values:F}}}else x=zk(f,i,T)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||Wk(T,w),x=Uk(l,"where",T,"in"===w||"not-in"===w);return mn.create(y,w,x)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class qy extends dR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Ln.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const f of l)qk(a,f),a=mx(a,f)}(e._query,t),new Qi(e.firestore,e.converter,mx(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class hR extends x0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new hR(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Re(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new by(i,a);return function(f,y){if(null===px(f)){const w=DD(f);null!==w&&Zk(0,w,y.field)}}(r,l),l}(e._query,this._field,this._direction);return new Qi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Xc(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class ab extends x0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new ab(e,t,r)}_apply(e){return new Qi(e.firestore,e.converter,bD(e._query,this._limit,this._limitType))}}class ub extends x0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ub(e,t,r)}_apply(e){const t=Gk(e,this.type,this._docOrFields,this._inclusive);return new Qi(e.firestore,e.converter,(i=t,new Xc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class lb extends x0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new lb(e,t,r)}_apply(e){const t=Gk(e,this.type,this._docOrFields,this._inclusive);return new Qi(e.firestore,e.converter,(i=t,new Xc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Gk(n,e,t,r){if(t[0]=(0,X.m9)(t[0]),t[0]instanceof A0)return function(i,a,l,f,y){if(!f)throw new Re(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const T of pg(i))if(T.field.isKeyField())w.push(hg(a,f.key));else{const x=f.data.field(T.field);if(yD(x))throw new Re(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const F=T.field.canonicalString();throw new Re(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}w.push(x)}return new Qh(w,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=bg(n.firestore);return function(a,l,f,y,w,T){const x=a.explicitOrderBy;if(w.length>x.length)throw new Re(he.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let H=0;H<w.length;H++){const ee=w[H];if(x[H].field.isKeyField()){if("string"!=typeof ee)throw new Re(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof ee}`);if(!gx(a)&&-1!==ee.indexOf("/"))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${ee}' contains a slash.`);const ve=a.path.child(En.fromString(ee));if(!Qe.isDocumentKey(ve))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${ve}' is not because it contains an odd number of segments.`);const Te=new Qe(ve);F.push(hg(l,Te))}else{const ve=Uk(f,y,ee);F.push(ve)}}return new Qh(F,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function zk(n,e,t){if("string"==typeof(t=(0,X.m9)(t))){if(""===t)throw new Re(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gx(e)&&-1!==t.indexOf("/"))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(En.fromString(t));if(!Qe.isDocumentKey(r))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hg(n,new Qe(r))}if(t instanceof gr)return hg(n,t._key);throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${XD(t)}.`)}function Wk(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qk(n,e){if(e.isInequality()){const r=DD(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Re(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=px(n);null!==a&&Zk(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Re(he.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Zk(n,e,t){if(!t.isEqual(e))throw new Re(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class fR{convertValue(e,t="none"){switch(Kh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ct()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return zh(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new tb(zr(e.latitude),zr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=_D(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Zw(e));default:return null}}convertTimestamp(e){const t=Wh(e);return new Ar(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=En.fromString(e);Et(u1(r));const i=new qh(r.get(1),r.get(3)),a=new Qe(r.popFirst(5));return i.isEqual(t)||ni(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function cb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class XB extends fR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ol(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gr(this.firestore,null,t)}}class Sg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sd extends A0{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new R0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ob("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class R0 extends sd{data(e={}){return super.data(e)}}class af{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Sg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new R0(this._firestore,this._userDataWriter,r.key,r,new Sg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new R0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Sg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new R0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Sg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,w=-1;return 0!==l.type&&(y=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),w=a.indexOf(l.doc.key)),{type:tj(l.type),doc:f,oldIndex:y,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function tj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct()}}function Yk(n,e){return n instanceof sd&&e instanceof sd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof af&&e instanceof af&&n._firestore===e._firestore&&sR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class uf extends fR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ol(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gr(this.firestore,null,t)}}function Qk(n,e,t){n=yn(n,gr);const r=yn(n.firestore,mr),i=cb(n.converter,e,t);return Zy(r,[rb(bg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,xr.none())])}function Jk(n,e,t,...r){n=yn(n,gr);const i=yn(n.firestore,mr),a=bg(i);let l;return l="string"==typeof(e=(0,X.m9)(e))||e instanceof id?lR(a,"updateDoc",n._key,e,t,r):uR(a,"updateDoc",n._key,e),Zy(i,[l.toMutation(n._key,xr.exists(!0))])}function Xk(n,...e){var t,r,i;n=(0,X.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||oR(e[l])||(a=e[l],l++);const f={includeMetadataChanges:a.includeMetadataChanges};if(oR(e[l])){const x=e[l];e[l]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[l+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[l+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let y,w,T;if(n instanceof gr)w=yn(n.firestore,mr),T=Sy(n._key.path),y={next:x=>{e[l]&&e[l](pR(w,n,x))},error:e[l+1],complete:e[l+2]};else{const x=yn(n,Qi);w=yn(x.firestore,mr),T=x._query;const F=new uf(w);y={next:H=>{e[l]&&e[l](new af(w,F,x,H))},error:e[l+1],complete:e[l+2]},Hk(n._query)}return function(x,F,H,ee){const ve=new KD(ee),Te=new CM(F,ve,H);return x.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return _M(yield Wy(x),Te)})),()=>{ve.Dc(),x.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return wM(yield Wy(x),Te)}))}}(ii(w),T,f,y)}function Zy(n,e){return function(t,r){const i=new Di;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function KU(n,e,t){return AM.apply(this,arguments)}(yield nR(t),r,i)})),i.promise}(ii(n),e)}function pR(n,e,t){const r=t.docs.get(e._key),i=new uf(n);return new sd(n,i,e._key,r,new Sg(t.hasPendingWrites,t.fromCache),e.converter)}const vj={maxAttempts:5};class eF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=bg(e)}set(e,t,r){this._verifyNotCommitted();const i=lf(e,this._firestore),a=cb(i.converter,t,r),l=rb(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,xr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=lf(e,this._firestore);let l;return l="string"==typeof(t=(0,X.m9)(t))||t instanceof id?lR(this._dataReader,"WriteBatch.update",a._key,t,r,i):uR(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,xr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=lf(e,this._firestore);return this._mutations=this._mutations.concat(new Ry(t._key,xr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function lf(n,e){if((n=(0,X.m9)(n)).firestore!==e)throw new Re(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class wj extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=bg(e)}get(e){const t=lf(e,this._firestore),r=new XB(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ct();const a=i[0];if(a.isFoundDocument())return new A0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new A0(this._firestore,r,t._key,null,t.converter);throw ct()})}set(e,t,r){const i=lf(e,this._firestore),a=cb(i.converter,t,r),l=rb(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=lf(e,this._firestore);let l;return l="string"==typeof(t=(0,X.m9)(t))||t instanceof id?lR(this._dataReader,"Transaction.update",a._key,t,r,i):uR(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=lf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=lf(e,this._firestore),r=new uf(this._firestore);return super.get(e).then(i=>new sd(this._firestore,r,t._key,i._document,new Sg(!1,!1),t.converter))}}!function(n,e=!0){Ey=cs.SDK_VERSION,(0,cs._registerComponent)(new Cc.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new mr(new b2(t.getProvider("auth-internal")),new A2(t.getProvider("app-check-internal")),function(f,y){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Re(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qh(f.options.projectId,y)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,cs.registerVersion)(FP,"3.13.0",n),(0,cs.registerVersion)(FP,"3.13.0","esm2017")}();var Sj=U(4986),Ji=U(4976);function gR(){return(0,Xr.e)((n,e)=>{let t,r=!1;n.subscribe((0,$r.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function xj(n,e){return n===e}var Su=U(2011);U(9568);function mR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function nF(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function rF(){if(!function tV(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}class N0{constructor(e){this._delegate=e}static fromBase64String(e){return rF(),new N0(Ol.fromBase64String(e))}static fromUint8Array(e){return nF(),new N0(Ol.fromUint8Array(e))}toBase64(){return rF(),this._delegate.toBase64()}toUint8Array(){return nF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function yR(n){return function Nj(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Pj{enableIndexedDbPersistence(e,t){return function AB(n,e){kk(n=yn(n,mr));const t=ii(n);if(t._uninitializedComponentsProvider)throw new Re(he.FAILED_PRECONDITION,"SDK cache is already specified.");Ra("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new zy;return Ok(t,i,new KM(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function xB(n){kk(n=yn(n,mr));const e=ii(n);if(e._uninitializedComponentsProvider)throw new Re(he.FAILED_PRECONDITION,"SDK cache is already specified.");Ra("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new zy;return Ok(e,r,new gk(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function MB(n){if(n._initialized&&!n._terminated)throw new Re(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Di;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(t=(0,Ie.Z)(function*(r){if(!Tu.D())return Promise.resolve();const i=r+"main";yield Tu.delete(i)}),function(r){return t.apply(this,arguments)})(jx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class iF{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof qh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ra("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Mk(n,e,t,r={}){var i;const a=(n=yn(n,D0))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==l&&Ra("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),r.mockUserToken){let f,y;if("string"==typeof r.mockUserToken)f=r.mockUserToken,y=Vi.MOCK_USER;else{f=(0,X.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Re(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Vi(w)}n._authCredentials=new D2(new LP(f,y))}}(this._delegate,e,t,r)}enableNetwork(){return function NB(n){return function mB(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield _k(n),t=yield vk(n);return e.setNetworkEnabled(!0),function(r){const i=et(r);return i.vu.delete(0),E0(i)}(t)}))}(ii(n=yn(n,mr)))}(this._delegate)}disableNetwork(){return function PB(n){return function yB(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield _k(n),t=yield vk(n);return e.setNetworkEnabled(!1),(r=(0,Ie.Z)(function*(i){const a=et(i);a.vu.add(0),yield Vy(a),a.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ii(n=yn(n,mr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,bk("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function RB(n){return function(e){const t=new Di;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function XU(n,e){return PM.apply(this,arguments)}(yield nR(e),t)})),t.promise}(ii(n=yn(n,mr)))}(this._delegate)}onSnapshotsInSync(e){return function cj(n,e){return function wB(n,e){const t=new KD(e);return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield Wy(n),i=t,et(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield Wy(n),i=t,void et(r).ku.delete(i);var r,i}))}}(ii(n=yn(n,mr)),oR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ky(this,Rk(this._delegate,e))}catch(t){throw ks(t,"collection()","Firestore.collection()")}}doc(e){try{return new Na(this,eb(this._delegate,e))}catch(t){throw ks(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Fs(this,function DB(n,e){if(n=yn(n,D0),iR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qi(n,null,(t=e,new Xc(En.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ks(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Ej(n,e,t){n=yn(n,mr);const r=Object.assign(Object.assign({},vj),t);return function(i){if(i.maxAttempts<1)throw new Re(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const f=new Di;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const y=yield function wk(n){return QD(n).then(e=>e.datastore)}(i);new pB(i.asyncQueue,y,l,a,f).run()})),f.promise}(ii(n),i=>e(new wj(n,i)),r)}(this._delegate,t=>e(new sF(this,t)))}batch(){return ii(this._delegate),new oF(new eF(this._delegate,e=>Zy(this._delegate,e)))}loadBundle(e){return function OB(n,e){const t=ii(n=yn(n,mr)),r=new TB;return function EB(n,e,t,r){const i=function(a,l){let f;return f="string"==typeof a?GO().encode(a):a,y=function(y,w){if(y instanceof Uint8Array)return mk(y,w);if(y instanceof ArrayBuffer)return mk(new Uint8Array(y),w);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new hB(y,l);var y}(t,w0(e));n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function cB(n,e,t){const r=et(n);var i;(i=(0,Ie.Z)(function*(a,l,f){try{const y=yield l.getMetadata();if(yield function(F,H){const ee=et(F),ve=ri(H.createTime);return ee.persistence.runTransaction("hasNewerBundle","readonly",Te=>ee.qs.getBundleMetadata(Te,H.id)).then(Te=>!!Te&&Te.createTime.compareTo(ve)>=0)}(a.localStore,y))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(F=y).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);f._updateProgress(ok(y));const w=new HU(y,a.localStore,l.serializer);let T=yield l.bc();for(;T;){const F=yield w.zu(T);F&&f._updateProgress(F),T=yield l.bc()}const x=yield w.complete();return yield rd(a,x.Ju,void 0),yield function(F,H){const ee=et(F);return ee.persistence.runTransaction("Save bundle","readwrite",ve=>ee.qs.saveBundleMetadata(ve,H))}(a.localStore,y),f._completeWith(x.progress),Promise.resolve(x.Hu)}catch(y){return Ra("SyncEngine",`Loading bundle failed with ${y}`),f._failWith(y),Promise.resolve(new Set)}var F}),function(a,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield nR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function kB(n,e){return function IB(n,e){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(t,r){const i=et(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.qs.getNamedQuery(a,r))}(yield JD(n),e)}))}(ii(n=yn(n,mr)),e).then(t=>t?new Qi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Fs(this,t):null)}}class db extends fR{constructor(e){super(),this.firestore=e}convertBytes(e){return new N0(new Ol(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Na.forKey(t,this.firestore,null)}}class sF{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new db(e)}get(e){const t=xg(e);return this._delegate.get(t).then(r=>new P0(this._firestore,new sd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=xg(e);return r?(mR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=xg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=xg(e);return this._delegate.delete(t),this}}class oF{constructor(e){this._delegate=e}set(e,t,r){const i=xg(e);return r?(mR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=xg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=xg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ag{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new R0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new O0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ag.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Ag(e,new db(e),t),i.set(t,a)),a}}Ag.INSTANCES=new WeakMap;class Na{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new db(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Na(t,new gr(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new Na(t,new gr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ky(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ky(this.firestore,Rk(this._delegate,e))}catch(t){throw ks(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,X.m9)(e))instanceof gr&&Nk(this._delegate,e)}set(e,t){t=mR("DocumentReference.set",t);try{return t?Qk(this._delegate,e,t):Qk(this._delegate,e)}catch(r){throw ks(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Jk(this._delegate,e):Jk(this._delegate,e,t,...r)}catch(i){throw ks(i,"updateDoc()","DocumentReference.update()")}}delete(){return function uj(n){return Zy(yn(n.firestore,mr),[new Ry(n._key,xr.none())])}(this._delegate)}onSnapshot(...e){const t=aF(e),r=uF(e,i=>new P0(this.firestore,new sd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Xk(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function rj(n){n=yn(n,gr);const e=yn(n.firestore,mr),t=ii(e),r=new uf(e);return function _B(n,e){const t=new Di;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(i,a,l){try{const f=yield function(y,w){const T=et(y);return T.persistence.runTransaction("read document","readonly",x=>T.localDocuments.getDocument(x,w))}(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new Re(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const y=jy(f,`Failed to get document '${a} from cache`);l.reject(y)}}),function(i,a,l){return r.apply(this,arguments)})(yield JD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new sd(e,r,n._key,i,new Sg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function ij(n){n=yn(n,gr);const e=yn(n.firestore,mr);return Ek(ii(e),n._key,{source:"server"}).then(t=>pR(e,n,t))}(this._delegate):function nj(n){n=yn(n,gr);const e=yn(n.firestore,mr);return Ek(ii(e),n._key).then(t=>pR(e,n,t))}(this._delegate),t.then(r=>new P0(this.firestore,new sd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Na(this.firestore,this._delegate.withConverter(e?Ag.getInstance(this.firestore,e):null))}}function ks(n,e,t){return n.message=n.message.replace(e,t),n}function aF(n){for(const e of n)if("object"==typeof e&&!yR(e))return e;return{}}function uF(n,e){var t,r;let i;return i=yR(n[0])?n[0]:yR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class P0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Na(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Yk(this._delegate,e._delegate)}}class O0 extends P0{data(e){const t=this._delegate.data(e);return function I2(n,e){n||ct()}(void 0!==t),t}}class Fs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new db(e)}where(e,t,r){try{return new Fs(this.firestore,sf(this._delegate,function zB(n,e,t){const r=e,i=ob("where",n);return M0._create(i,r,t)}(e,t,r)))}catch(i){throw ks(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Fs(this.firestore,sf(this._delegate,function WB(n,e="asc"){const t=e,r=ob("orderBy",n);return hR._create(r,t)}(e,t)))}catch(r){throw ks(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Fs(this.firestore,sf(this._delegate,function qB(n){return Ak("limit",n),ab._create("limit",n,"F")}(e)))}catch(t){throw ks(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Fs(this.firestore,sf(this._delegate,function ZB(n){return Ak("limitToLast",n),ab._create("limitToLast",n,"L")}(e)))}catch(t){throw ks(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Fs(this.firestore,sf(this._delegate,function KB(...n){return ub._create("startAt",n,!0)}(...e)))}catch(t){throw ks(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Fs(this.firestore,sf(this._delegate,function YB(...n){return ub._create("startAfter",n,!1)}(...e)))}catch(t){throw ks(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Fs(this.firestore,sf(this._delegate,function QB(...n){return lb._create("endBefore",n,!1)}(...e)))}catch(t){throw ks(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Fs(this.firestore,sf(this._delegate,function JB(...n){return lb._create("endAt",n,!0)}(...e)))}catch(t){throw ks(t,"endAt()","Query.endAt()")}}isEqual(e){return sR(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function oj(n){n=yn(n,Qi);const e=yn(n.firestore,mr),t=ii(e),r=new uf(e);return function vB(n,e){const t=new Di;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(i,a,l){try{const f=yield $D(i,a,!0),y=new lk(a,f.ir),w=y.sc(f.documents),T=y.applyChanges(w,!1);l.resolve(T.snapshot)}catch(f){const y=jy(f,`Failed to execute query '${a} against cache`);l.reject(y)}}),function(i,a,l){return r.apply(this,arguments)})(yield JD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new af(e,r,n,i))}(this._delegate):"server"===e?.source?function aj(n){n=yn(n,Qi);const e=yn(n.firestore,mr),t=ii(e),r=new uf(e);return Ik(t,n._query,{source:"server"}).then(i=>new af(e,r,n,i))}(this._delegate):function sj(n){n=yn(n,Qi);const e=yn(n.firestore,mr),t=ii(e),r=new uf(e);return Hk(n._query),Ik(t,n._query).then(i=>new af(e,r,n,i))}(this._delegate),t.then(r=>new _R(this.firestore,new af(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=aF(e),r=uF(e,i=>new _R(this.firestore,new af(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Xk(this._delegate,t,r)}withConverter(e){return new Fs(this.firestore,this._delegate.withConverter(e?Ag.getInstance(this.firestore,e):null))}}class kj{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new O0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class _R{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Fs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new O0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new kj(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new O0(this._firestore,r))})}isEqual(e){return Yk(this._delegate,e._delegate)}}class Ky extends Fs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Na(this.firestore,e):null}doc(e){try{return new Na(this.firestore,void 0===e?eb(this._delegate):eb(this._delegate,e))}catch(t){throw ks(t,"doc()","CollectionReference.doc()")}}add(e){return function lj(n,e){const t=yn(n.firestore,mr),r=eb(n),i=cb(n.converter,e);return Zy(t,[rb(bg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,xr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Na(this.firestore,t))}isEqual(e){return Nk(this._delegate,e._delegate)}withConverter(e){return new Ky(this.firestore,this._delegate.withConverter(e?Ag.getInstance(this.firestore,e):null))}}function xg(n){return yn(n,gr)}class vR{constructor(...e){this._delegate=new id(...e)}static documentId(){return new vR(Gr.keyField().canonicalString())}isEqual(e){return(e=(0,X.m9)(e))instanceof id&&this._delegate._internalPath.isEqual(e._internalPath)}}class Mg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Cj(){return new aR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Mg(e)}static delete(){const e=function Ij(){return new T0("deleteField")}();return e._methodName="FieldValue.delete",new Mg(e)}static arrayUnion(...e){const t=function Dj(...n){return new BB("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Mg(t)}static arrayRemove(...e){const t=function bj(...n){return new jB("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Mg(t)}static increment(e){const t=function Tj(n){return new $B("increment",n)}(e);return t._methodName="FieldValue.increment",new Mg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Fj={Firestore:iF,GeoPoint:tb,Timestamp:Ar,Blob:N0,Transaction:sF,WriteBatch:oF,DocumentReference:Na,DocumentSnapshot:P0,Query:Fs,QueryDocumentSnapshot:O0,QuerySnapshot:_R,CollectionReference:Ky,FieldPath:vR,FieldValue:Mg,setLogLevel:function Oj(n){!function E2(n){$h.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function Vj(n){(function Lj(n,e){n.INTERNAL.registerComponent(new Cc.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Fj)))})(n,(e,t)=>new iF(e,t,new Pj)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(sm.Z);var Uj=U(6451),hb=U(5363),Bj=U(6063);class jj extends Hi.x{constructor(e=1/0,t=1/0,r=Bj.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let f=0;for(let y=1;y<r.length&&r[y]<=l;y+=2)f=y;f&&r.splice(0,f+1)}}}var $j=U(3099);function lF(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,$j.B)({connector:()=>new jj(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function cF(n,e){return(0,fc.m)(e)?Jn(()=>n,e):Jn(()=>n)}var wR=U(9468);U(259);const IR=new Map,hF={activated:!1,tokenObservers:[]},qj={initialized:!1,enabled:!1};function Wr(n){return IR.get(n)||Object.assign({},hF)}function pb(){return qj}const CR="https://content-firebaseappcheck.googleapis.com/v1",Qj="exchangeDebugToken",fF={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Xj{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ie.Z)(function*(){t.stop();try{t.pending=new X.BH,yield function e$(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new X.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Xi=new X.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function DR(n){if(!Wr(n).activated)throw Xi.create("use-before-activation",{appName:n.name})}function yb(n,e){return TR.apply(this,arguments)}function TR(){return TR=(0,Ie.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const x=yield i.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,f;try{l=yield fetch(n,a)}catch(x){throw Xi.create("fetch-network-error",{originalErrorMessage:x?.message})}if(200!==l.status)throw Xi.create("fetch-status-error",{httpStatus:l.status});try{f=yield l.json()}catch(x){throw Xi.create("fetch-parse-error",{originalErrorMessage:x?.message})}const y=f.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw Xi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const w=1e3*Number(y[1]),T=Date.now();return{token:f.token,expireTimeMillis:T+w,issuedAtTimeMillis:T}}),TR.apply(this,arguments)}function pF(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${CR}/projects/${t}/apps/${r}:${Qj}?key=${i}`,body:{debug_token:e}}}const i$="firebase-app-check-database",s$=1,k0="firebase-app-check-store";let _b=null;function SR(){return SR=(0,Ie.Z)(function*(n,e){const r=(yield function mF(){return _b||(_b=new Promise((n,e)=>{try{const t=indexedDB.open(i$,s$);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Xi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(k0,{keyPath:"compositeKey"})}}catch(t){e(Xi.create("storage-open",{originalErrorMessage:t?.message}))}}),_b)}()).transaction(k0,"readwrite"),a=r.objectStore(k0).put({compositeKey:n,value:e});return new Promise((l,f)=>{a.onsuccess=y=>{l()},r.onerror=y=>{var w;f(Xi.create("storage-set",{originalErrorMessage:null===(w=y.target.error)||void 0===w?void 0:w.message}))}})}),SR.apply(this,arguments)}const F0=new Oo.Yd("@firebase/app-check");function MR(n,e){return(0,X.hl)()?function a$(n,e){return function yF(n,e){return SR.apply(this,arguments)}(function vF(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{F0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function NR(){return pb().enabled}function PR(){return OR.apply(this,arguments)}function OR(){return OR=(0,Ie.Z)(function*(){const n=pb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),OR.apply(this,arguments)}const f$={error:"UNKNOWN_ERROR"};function p$(n){return X.US.encodeString(JSON.stringify(n),!1)}function vb(n){return kR.apply(this,arguments)}function kR(){return kR=(0,Ie.Z)(function*(n,e=!1){const t=n.app;DR(t);const r=Wr(t);let a,i=r.token;if(i&&!Yy(i)&&(r.token=void 0,i=void 0),!i){const y=yield r.cachedTokenPromise;y&&(Yy(y)?i=y:yield MR(t,void 0))}if(!e&&i&&Yy(i))return{token:i.token};let f,l=!1;if(NR()){r.exchangeTokenPromise||(r.exchangeTokenPromise=yb(pF(t,yield PR()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const y=yield r.exchangeTokenPromise;return yield MR(t,y),r.token=y,{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Wr(t).exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?F0.warn(y.message):F0.error(y),a=y}return i?a?f=Yy(i)?{token:i.token,internalError:a}:CF(a):(f={token:i.token},r.token=i,yield MR(t,i)):f=CF(a),l&&function IF(n,e){const t=Wr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,f),f}),kR.apply(this,arguments)}function FR(){return FR=(0,Ie.Z)(function*(n){const e=n.app;DR(e);const{provider:t}=Wr(e);if(NR()){const r=yield PR(),{token:i}=yield yb(pF(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),FR.apply(this,arguments)}function VR(n,e){const t=Wr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function EF(n){const{app:e}=n,t=Wr(e);let r=t.tokenRefresher;r||(r=function g$(n){const{app:e}=n;return new Xj((0,Ie.Z)(function*(){let r;if(r=Wr(e).token?yield vb(n,!0):yield vb(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Wr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},fF.RETRIAL_MIN_WAIT,fF.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Yy(n){return n.expireTimeMillis-Date.now()>0}function CF(n){return{token:p$(f$),error:n}}class m${constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Wr(this.app);for(const t of e)VR(this.app,t.next);return Promise.resolve()}}const RF="app-check-internal";!function M$(){(0,cs._registerComponent)(new Cc.wA("app-check",n=>function y$(n,e){return new m$(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(RF).initialize()})),(0,cs._registerComponent)(new Cc.wA(RF,n=>function _$(n){return{getToken:e=>vb(n,e),getLimitedUseToken:()=>function wF(n){return FR.apply(this,arguments)}(n),addTokenListener:e=>function LR(n,e,t,r){const{app:i}=n,a=Wr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Yy(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),EF(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>EF(n))}(n,"INTERNAL",e),removeTokenListener:e=>VR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,cs.registerVersion)("@firebase/app-check","0.8.0")}();class $R{constructor(){return(0,Ji.vb)("app-check")}}typeof window<"u"&&window;var k$=U(9260);const PF=new h.OlP("angularfire2.auth.use-emulator"),OF=new h.OlP("angularfire2.auth.settings"),kF=new h.OlP("angularfire2.auth.tenant-id"),FF=new h.OlP("angularfire2.auth.langugage-code"),LF=new h.OlP("angularfire2.auth.use-device-language"),VF=new h.OlP("angularfire.auth.persistence"),UF=(n,e,t,r,i,a,l,f)=>(0,Su.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,a&&y.useDeviceLanguage(),l)for(const[w,T]of Object.entries(l))y.settings[w]=T;return f&&y.setPersistence(f),y},[t,r,i,a,l,f]);let BF=(()=>{class n{constructor(t,r,i,a,l,f,y,w,T,x,F,H){const ee=new Hi.x,ve=at(void 0).pipe((0,hb.Q)(l.outsideAngular),Jn(()=>a.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,9568)))),(0,gt.U)(()=>(0,Su.on)(t,a,r)),(0,gt.U)(Te=>UF(Te,a,f,w,T,x,y,F)),lF({bufferSize:1,refCount:!1}));if(Zo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=at(null);else{ve.pipe(Gi()).subscribe();const mt=ve.pipe(Jn(Ft=>Ft.getRedirectResult().then(nn=>nn,()=>null)),Ji.iC,lF({bufferSize:1,refCount:!1})),It=ve.pipe(Jn(Ft=>new li.y(nn=>({unsubscribe:a.runOutsideAngular(()=>Ft.onAuthStateChanged(vn=>nn.next(vn),vn=>nn.error(vn),()=>nn.complete()))})))),vt=ve.pipe(Jn(Ft=>new li.y(nn=>({unsubscribe:a.runOutsideAngular(()=>Ft.onIdTokenChanged(vn=>nn.next(vn),vn=>nn.error(vn),()=>nn.complete()))}))));this.authState=mt.pipe(cF(It),(0,wR.R)(l.outsideAngular),(0,hb.Q)(l.insideAngular)),this.user=mt.pipe(cF(vt),(0,wR.R)(l.outsideAngular),(0,hb.Q)(l.insideAngular)),this.idToken=this.user.pipe(Jn(Ft=>Ft?(0,gn.D)(Ft.getIdToken()):at(null))),this.idTokenResult=this.user.pipe(Jn(Ft=>Ft?(0,gn.D)(Ft.getIdTokenResult()):at(null))),this.credential=(0,Uj.T)(mt,ee,this.authState.pipe(Pi(Ft=>!Ft))).pipe((0,gt.U)(Ft=>Ft?.user?Ft:null),(0,wR.R)(l.outsideAngular),(0,hb.Q)(l.insideAngular))}return(0,Su.pX)(this,ve,a,{spy:{apply:(Te,mt,It)=>{(Te.startsWith("signIn")||Te.startsWith("createUser"))&&It.then(vt=>ee.next(vt))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Su.Dh),h.LFG(Su.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Ji.HU),h.LFG(PF,8),h.LFG(OF,8),h.LFG(kF,8),h.LFG(FF,8),h.LFG(LF,8),h.LFG(VF,8),h.LFG($R,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function jF(n,e){return function L$(n,e=Sj.z){return new li.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function GR(n,e){return jF(n,e).pipe((0,gt.U)(t=>({payload:t,type:"query"})))}function Eb(n,e){return GR(n,e).pipe(ca(void 0),gR(),(0,gt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const y=i.find(T=>T.doc.ref.isEqual(l.ref)),w=t?.payload.docs.find(T=>T.ref.isEqual(l.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(l.metadata)||!y&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),a}))}function $F(n,e,t){return Eb(n,t).pipe(tl((r,i)=>function U$(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function B$(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return zR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return zR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return zR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),function Aj(n,e=la.y){return n=n??xj,(0,Xr.e)((t,r)=>{let i,a=!0;t.subscribe((0,$r.x)(r,l=>{const f=e(l);(a||!n(i,f))&&(a=!1,i=f,r.next(l))}))})}(),(0,gt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function zR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function HF(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class GF{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Eb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,gt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ca(void 0),gR(),Pi(([r,i])=>i.length>0||!r),(0,gt.U)(([r,i])=>i),Ji.iC)}auditTrail(e){return this.stateChanges(e).pipe(tl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=HF(e);return $F(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ji.iC)}valueChanges(e={}){return GR(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Ji.iC)}get(e){return(0,gn.D)(this.query.get(e)).pipe(Ji.iC)}add(e){return this.ref.add(e)}doc(e){return new zF(this.ref.doc(e),this.afs)}}class zF{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=ZF(r,t);return new GF(i,a,this.afs)}snapshotChanges(){return function V$(n,e){return jF(n,e).pipe(ca(void 0),gR(),(0,gt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ji.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,gt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,gn.D)(this.ref.get(e)).pipe(Ji.iC)}}class j${constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Eb(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Pi(t=>t.length>0),Ji.iC):Eb(this.query,this.afs.schedulers.outsideAngular).pipe(Ji.iC)}auditTrail(e){return this.stateChanges(e).pipe(tl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=HF(e);return $F(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ji.iC)}valueChanges(e={}){return GR(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Ji.iC)}get(e){return(0,gn.D)(this.query.get(e)).pipe(Ji.iC)}}const WF=new h.OlP("angularfire2.enableFirestorePersistence"),qF=new h.OlP("angularfire2.firestore.persistenceSettings"),$$=new h.OlP("angularfire2.firestore.settings"),H$=new h.OlP("angularfire2.firestore.use-emulator");function ZF(n,e=(t=>t)){return{query:e(n),ref:n}}let Ib=(()=>{class n{constructor(t,r,i,a,l,f,y,w,T,x,F,H,ee,ve,Te,mt,It){this.schedulers=y;const vt=(0,Su.on)(t,f,r),Ft=T;x&&UF(vt,f,F,ee,ve,Te,H,mt),[this.firestore,this.persistenceEnabled$]=(0,Su.cc)(`${vt.name}.firestore`,"AngularFirestore",vt.name,()=>{const nn=f.runOutsideAngular(()=>vt.firestore());if(a&&nn.settings(a),Ft&&nn.useEmulator(...Ft),i&&!Zo(l)){const vn=()=>{try{return(0,gn.D)(nn.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(_s){return typeof console<"u"&&console.warn(_s),at(!1)}};return[nn,f.runOutsideAngular(vn)]}return[nn,at(!1)]},[a,Ft,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=ZF(i,r),f=this.schedulers.ngZone.run(()=>a);return new GF(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new j$(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new zF(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Su.Dh),h.LFG(Su.xv,8),h.LFG(WF,8),h.LFG($$,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Ji.HU),h.LFG(qF,8),h.LFG(H$,8),h.LFG(BF,8),h.LFG(PF,8),h.LFG(OF,8),h.LFG(kF,8),h.LFG(FF,8),h.LFG(LF,8),h.LFG(VF,8),h.LFG($R,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),G$=(()=>{class n{constructor(){k$.Z.registerVersion("angularfire",Ji.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:WF,useValue:!0},{provide:qF,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Ib]}),n})(),WR=(()=>{var n;class e{constructor(r){this.afs=r}loadFeaturedData(){return this.afs.collection("posts",r=>r.where("isFeatured","==",!0).limit(4)).snapshotChanges().pipe((0,gt.U)(r=>r.map(i=>{const a=i.payload.doc.data();return{id:i.payload.doc.id,data:a}})))}loadLatest(){return this.afs.collection("posts",r=>r.orderBy("createdAt")).snapshotChanges().pipe((0,gt.U)(r=>r.map(i=>{const a=i.payload.doc.data();return{id:i.payload.doc.id,data:a}})))}loadCategoryPosts(r){return this.afs.collection("posts",i=>i.where("category.categoryId","==",r).limit(4)).snapshotChanges().pipe((0,gt.U)(i=>i.map(a=>{const l=a.payload.doc.data();return{id:a.payload.doc.id,data:l}})))}loadOnePost(r){return this.afs.collection("posts").doc(r).valueChanges()}loadSimilar(r){return this.afs.collection("posts",i=>i.where("category.categoryId","==",r).limit(4)).snapshotChanges().pipe((0,gt.U)(i=>i.map(a=>{const l=a.payload.doc.data();return{id:a.payload.doc.id,data:l}})))}countViws(r){const i={views:sm.Z.firestore.FieldValue.increment(1)};this.afs.doc(`posts/${r}`).update(i).then(()=>{})}}return(n=e).\u0275fac=function(r){return new(r||n)(h.LFG(Ib))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function z$(n,e){1&n&&(h.TgZ(0,"small",10),h._uU(1,"Featured"),h.qZA())}const W$=function(n){return["/post",n]};function q$(n,e){if(1&n&&(h.TgZ(0,"div",1),h._UZ(1,"img",2),h.TgZ(2,"div",3)(3,"small",4),h._uU(4),h.qZA(),h.YNc(5,z$,2,0,"small",5),h.TgZ(6,"small",6),h._uU(7),h.qZA(),h.TgZ(8,"small",7),h._uU(9,"Last Update - SEP 20, 2023"),h.qZA(),h.TgZ(10,"h5",8),h._uU(11),h.qZA(),h.TgZ(12,"h5",8),h._uU(13),h.qZA(),h.TgZ(14,"small",9),h._uU(15),h.ALo(16,"date"),h.qZA()()()),2&n){const t=h.oxw();h.Q6J("routerLink",h.VKq(10,W$,t.postData.id)),h.xp6(1),h.s9C("src",t.postData.data.postImgPath,h.LSH),h.xp6(3),h.Oqu(t.postData.data.category.category),h.xp6(1),h.Q6J("ngIf",t.postData.data.isFeatured),h.xp6(2),h.hij("Views -",t.postData.data.views,""),h.xp6(4),h.hij(" ",t.postData.data.title,""),h.xp6(2),h.Oqu(t.postData.data.excerpt),h.xp6(2),h.hij("Last Update - ",h.lcZ(16,8,t.postData.data.createdAt.toMillis()),"")}}let qR=(()=>{var n;class e{ngOnInit(){}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-post-card"]],inputs:{postData:"postData"},decls:1,vars:1,consts:[["class","card shadow-effect",3,"routerLink",4,"ngIf"],[1,"card","shadow-effect",3,"routerLink"],["alt","post-image",1,"card-img-top",3,"src"],[1,"card-body"],[1,"bg-light","text-danger","text-center"],["class","bg-light text-success  text-center ml-2",4,"ngIf"],[1,"bg-light","text-info","text-center","ml-2"],[1,"bg-light","text-warning","text-center","ml-2"],[1,"mt-1"],[1,"bg-light","text-warning","text-center","ml-3"],[1,"bg-light","text-success","text-center","ml-2"]],template:function(r,i){1&r&&h.YNc(0,q$,17,12,"div",0),2&r&&h.Q6J("ngIf",i.postData)},dependencies:[Is,ep,Br],styles:[".card[_ngcontent-%COMP%]{max-width:400px;border:none;box-shadow:0 0 33px -10px #4772fe4d;min-height:500px}"]}),e})();function Z$(n,e){if(1&n&&(h.TgZ(0,"div",9),h._UZ(1,"app-post-card",10),h.qZA()),2&n){const t=e.$implicit;h.xp6(1),h.Q6J("postData",t)}}function K$(n,e){if(1&n&&(h.TgZ(0,"div",11),h._UZ(1,"app-post-card",10),h.qZA()),2&n){const t=e.$implicit;h.xp6(1),h.Q6J("postData",t)}}let Y$=(()=>{var n;class e{constructor(r){this.postService=r,this.featuredPostArray=[],this.latestPostArray=[],this.postService.loadFeaturedData().subscribe(i=>{this.featuredPostArray=i}),this.postService.loadLatest().subscribe(i=>{this.latestPostArray=i})}ngOnInit(){}}return(n=e).\u0275fac=function(r){return new(r||n)(h.Y36(WR))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home"]],decls:18,vars:2,consts:[[1,"featured-section"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","text-center","mt-5"],[1,"text-white"],["class","col-lg-3",4,"ngFor","ngForOf"],[1,"container","mt-5"],[1,"col-md-12","text-center"],["class","col-md-4 mt-3",4,"ngFor","ngForOf"],[1,"col-lg-3"],[3,"postData"],[1,"col-md-4","mt-3"]],template:function(r,i){1&r&&(h.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),h._uU(5,"Featured Posts"),h.qZA(),h.TgZ(6,"p",4),h._uU(7,"bla bla fdgd g fdgdds asf sfd af ds fsd dsf sdf "),h.qZA()()(),h.TgZ(8,"div",2),h.YNc(9,Z$,2,1,"div",5),h.qZA()()(),h.TgZ(10,"section",6)(11,"div",7)(12,"h2"),h._uU(13,"Latest Posts"),h.qZA(),h.TgZ(14,"p"),h._uU(15,"lorem ipsum dolor sit amet considence application elite."),h.qZA()(),h.TgZ(16,"div",2),h.YNc(17,K$,2,1,"div",8),h.qZA()()),2&r&&(h.xp6(9),h.Q6J("ngForOf",i.featuredPostArray),h.xp6(8),h.Q6J("ngForOf",i.latestPostArray))},dependencies:[Es,qR],styles:[".featured-section[_ngcontent-%COMP%]{padding-left:130px;padding-right:130px;padding-bottom:130px;background-color:var(--primary-color)}"]}),e})();function Q$(n,e){if(1&n&&(h.TgZ(0,"div",6),h._UZ(1,"app-post-card",7),h.qZA()),2&n){const t=e.$implicit;h.xp6(1),h.Q6J("postData",t)}}let J$=(()=>{var n;class e{constructor(r,i){this.route=r,this.postService=i,this.postsArray=[]}ngOnInit(){this.route.params.subscribe(r=>{this.catgoryObj=r,this.postService.loadCategoryPosts(r.id).subscribe(i=>{this.postsArray=i})})}}return(n=e).\u0275fac=function(r){return new(r||n)(h.Y36(vc),h.Y36(WR))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-single-catgory"]],decls:9,vars:2,consts:[[1,"bg-theme","p-5"],[1,"container"],[1,"text-white"],[1,"container","mt-5","mb-5"],[1,"row"],["class","col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-md-4","mb-3"],[3,"postData"]],template:function(r,i){1&r&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),h._uU(3),h.qZA(),h.TgZ(4,"p",2),h._uU(5,"lorem iosum multi functions bla Egyption Vil,pre Harry elite"),h.qZA()()(),h.TgZ(6,"div",3)(7,"div",4),h.YNc(8,Q$,2,1,"div",5),h.qZA()()),2&r&&(h.xp6(3),h.Oqu(i.catgoryObj.category),h.xp6(5),h.Q6J("ngForOf",i.postsArray))},dependencies:[Es,qR]}),e})(),KF=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Rg=(()=>{class n extends KF{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const kl=new h.OlP("NgValueAccessor"),tH={provide:kl,useExisting:(0,h.Gpc)(()=>Cb),multi:!0},rH=new h.OlP("CompositionEventMode");let Cb=(()=>{class n extends KF{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function nH(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(rH,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[h._Bn([tH]),h.qOj]}),n})();const iH=!1;function cf(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const ys=new h.OlP("NgValidators"),df=new h.OlP("NgAsyncValidators"),sH=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function eL(n){return cf(n.value)?{required:!0}:null}function nL(n){return cf(n.value)||sH.test(n.value)?null:{email:!0}}function Db(n){return null}function oL(n){return null!=n}function aL(n){const e=(0,h.QGY)(n)?(0,gn.D)(n):n;if(iH&&!(0,h.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new h.vHH(-1101,t)}return e}function uL(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function lL(n,e){return e.map(t=>t(n))}function cL(n){return n.map(e=>function oH(n){return!n.validate}(e)?e:t=>e.validate(t))}function ZR(n){return null!=n?function dL(n){if(!n)return null;const e=n.filter(oL);return 0==e.length?null:function(t){return uL(lL(t,e))}}(cL(n)):null}function KR(n){return null!=n?function hL(n){if(!n)return null;const e=n.filter(oL);return 0==e.length?null:function(t){return function X$(...n){const e=(0,$i.jO)(n),{args:t,keys:r}=lc(n),i=new li.y(a=>{const{length:l}=t;if(!l)return void a.complete();const f=new Array(l);let y=l,w=l;for(let T=0;T<l;T++){let x=!1;(0,nu.Xf)(t[T]).subscribe((0,$r.x)(a,F=>{x||(x=!0,w--),f[T]=F},()=>y--,void 0,()=>{(!y||!x)&&(w||a.next(r?Ju(r,f):f),a.complete())}))}});return e?i.pipe(Ni(e)):i}(lL(t,e).map(aL)).pipe((0,gt.U)(uL))}}(cL(n)):null}function fL(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function YR(n){return n?Array.isArray(n)?n:[n]:[]}function bb(n,e){return Array.isArray(n)?n.includes(e):n===e}function mL(n,e){const t=YR(e);return YR(n).forEach(i=>{bb(t,i)||t.push(i)}),t}function yL(n,e){return YR(e).filter(t=>!bb(n,t))}class _L{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ZR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=KR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ls extends _L{get formDirective(){return null}get path(){return null}}class hf extends _L{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class vL{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let wL=(()=>{class n extends vL{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(hf,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),QR=(()=>{class n extends vL{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ls,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();function EL(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const eN=!1,L0="VALID",Sb="INVALID",Qy="PENDING",V0="DISABLED";function tN(n){return(Ab(n)?n.validators:n)||null}function nN(n,e){return(Ab(e)?e.asyncValidators:n)||null}function Ab(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class DL{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===L0}get invalid(){return this.status===Sb}get pending(){return this.status==Qy}get disabled(){return this.status===V0}get enabled(){return this.status!==V0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(mL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(mL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(yL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(yL(e,this._rawAsyncValidators))}hasValidator(e){return bb(this._rawValidators,e)}hasAsyncValidator(e){return bb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Qy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=V0,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=L0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===L0||this.status===Qy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?V0:L0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Qy,this._hasOwnPendingAsyncValidator=!0;const t=aL(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?V0:this.errors?Sb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Qy)?Qy:this._anyControlsHaveStatus(Sb)?Sb:L0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ab(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function fH(n){return Array.isArray(n)?ZR(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function pH(n){return Array.isArray(n)?KR(n):n||null}(this._rawAsyncValidators)}}class rN extends DL{constructor(e,t,r){super(tN(t),nN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function CL(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new h.vHH(1002,eN?function hH(n,e){return`Must supply a value for form control ${EL(n,e)}`}(e,i):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function IL(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,eN?function cH(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new h.vHH(1001,eN?function dH(n,e){return`Cannot find form control ${EL(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Jy=new h.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>xb}),xb="always";function U0(n,e,t=xb){iN(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function yH(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&bL(n,e)})}(n,e),function vH(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function _H(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&bL(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function mH(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Nb(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function iN(n,e){const t=function pL(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(fL(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function gL(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(fL(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Nb(e._rawValidators,i),Nb(e._rawAsyncValidators,i)}function bL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const DH={provide:Ls,useExisting:(0,h.Gpc)(()=>j0)},B0=(()=>Promise.resolve())();let j0=(()=>{class n extends Ls{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new rN({},ZR(t),KR(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){B0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),U0(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){B0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){B0.then(()=>{const r=this._findContainer(t.path),i=new rN({});(function TL(n,e){iN(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){B0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){B0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function SL(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ys,10),h.Y36(df,10),h.Y36(Jy,8))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([DH]),h.qOj]}),n})();function AL(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function xL(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const ML=class extends DL{constructor(e=null,t,r){super(tN(t),nN(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ab(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=xL(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){AL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){AL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){xL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},SH={provide:hf,useExisting:(0,h.Gpc)(()=>uN)},PL=(()=>Promise.resolve())();let uN=(()=>{class n extends hf{constructor(t,r,i,a,l,f){super(),this._changeDetectorRef=l,this.callSetDisabledState=f,this.control=new ML,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function aN(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Cb?t=a:function IH(n){return Object.getPrototypeOf(n.constructor)===Rg}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function oN(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){U0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){PL.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,h.D6c)(r);PL.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Mb(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ls,9),h.Y36(ys,10),h.Y36(df,10),h.Y36(kl,10),h.Y36(h.sBO,8),h.Y36(Jy,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([SH]),h.qOj,h.TTD]}),n})(),lN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),kL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),Ng=(()=>{class n{constructor(){this._validator=Db}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Db,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const zH={provide:ys,useExisting:(0,h.Gpc)(()=>Ob),multi:!0};let Ob=(()=>{class n extends Ng{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=h.D6c,this.createValidator=t=>eL}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([zH]),h.qOj]}),n})();const qH={provide:ys,useExisting:(0,h.Gpc)(()=>gN),multi:!0};let gN=(()=>{class n extends Ng{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=h.D6c,this.createValidator=t=>nL}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[h._Bn([qH]),h.qOj]}),n})(),QH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[kL]}),n})(),XH=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Jy,useValue:t.callSetDisabledState??xb}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[QH]}),n})(),eG=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-comment-form"]],decls:17,vars:0,consts:[[1,"card","mt-5","shadow-effect"],[1,"card-body"],[1,"form-group"],["for",""],["type","text","placeholder","Enter your name here",1,"form-control","shadow-effect"],["cols","30","rows","10","placeholder","Add your comment here",1,"form-control","shadow-effect"],[1,"btn","btn-info","btn-theme"]],template:function(r,i){1&r&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h4"),h._uU(3,"Leave a Comment"),h.qZA(),h.TgZ(4,"p"),h._uU(5,"You can leave a comment using this comment form"),h.qZA(),h.TgZ(6,"form")(7,"div",2)(8,"label",3),h._uU(9,"Name"),h.qZA(),h._UZ(10,"input",4),h.qZA(),h.TgZ(11,"div",2)(12,"label",3),h._uU(13,"Comment"),h.qZA(),h._UZ(14,"textarea",5),h.qZA(),h.TgZ(15,"button",6),h._uU(16," Add a Comment"),h.qZA()()()())},dependencies:[lN,QR,j0]}),e})(),tG=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-comments-list"]],decls:52,vars:0,consts:[[1,"card","mb-5","mt-5","pb-5","shadow-effect"],[1,"card-body"],[1,"mt-3","mb-3"],[1,"comment-box","mt-3"],[1,"mb-0"],[1,"text-danger"],["href","#",1,"mt-1"],["href","#",1,"mt-1","ml-3"]],template:function(r,i){1&r&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),h._uU(3," Comments(15)"),h.qZA(),h.TgZ(4,"div",3)(5,"h6",4),h._uU(6," Anas Issa"),h.qZA(),h.TgZ(7,"small",5),h._uU(8," Last Update - SEP 20, 2023"),h.qZA(),h.TgZ(9,"div",2),h._uU(10," lorem ipsum lord of the rings is the best movie ever "),h.qZA(),h.TgZ(11,"a",6),h._uU(12," Reply"),h.qZA(),h.TgZ(13,"a",7),h._uU(14,"View Reply"),h.qZA(),h._UZ(15,"hr"),h.qZA(),h.TgZ(16,"div",3)(17,"h6",4),h._uU(18," Anas Issa"),h.qZA(),h.TgZ(19,"small",5),h._uU(20," Last Update - SEP 20, 2023"),h.qZA(),h.TgZ(21,"div",2),h._uU(22," lorem ipsum lord of the rings is the best movie ever "),h.qZA(),h.TgZ(23,"a",6),h._uU(24," Reply"),h.qZA(),h.TgZ(25,"a",7),h._uU(26,"View Reply"),h.qZA(),h._UZ(27,"hr"),h.qZA(),h.TgZ(28,"div",3)(29,"h6",4),h._uU(30," Anas Issa"),h.qZA(),h.TgZ(31,"small",5),h._uU(32," Last Update - SEP 20, 2023"),h.qZA(),h.TgZ(33,"div",2),h._uU(34," lorem ipsum lord of the rings is the best movie ever "),h.qZA(),h.TgZ(35,"a",6),h._uU(36," Reply"),h.qZA(),h.TgZ(37,"a",7),h._uU(38,"View Reply"),h.qZA(),h._UZ(39,"hr"),h.qZA(),h.TgZ(40,"div",3)(41,"h6",4),h._uU(42," Anas Issa"),h.qZA(),h.TgZ(43,"small",5),h._uU(44," Last Update - SEP 20, 2023"),h.qZA(),h.TgZ(45,"div",2),h._uU(46," lorem ipsum lord of the rings is the best movie ever "),h.qZA(),h.TgZ(47,"a",6),h._uU(48," Reply"),h.qZA(),h.TgZ(49,"a",7),h._uU(50,"View Reply"),h.qZA(),h._UZ(51,"hr"),h.qZA()()())},styles:[".comment-box[_ngcontent-%COMP%]{padding:15px 35px;background-color:#f0f0f0}"]}),e})();function nG(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1,"Featured"),h.qZA())}function rG(n,e){if(1&n&&(h.TgZ(0,"div",6),h._UZ(1,"img",7),h.TgZ(2,"div",8)(3,"small",9),h._uU(4),h.qZA(),h.YNc(5,nG,2,0,"small",10),h.TgZ(6,"small",11),h._uU(7),h.qZA(),h.TgZ(8,"small",12),h._uU(9),h.ALo(10,"date"),h.qZA(),h.TgZ(11,"h1",13),h._uU(12),h.qZA(),h._UZ(13,"p",14),h.qZA()()),2&n){const t=h.oxw();h.xp6(1),h.s9C("src",t.post.postImgPath,h.LSH),h.xp6(3),h.Oqu(t.post.category.category),h.xp6(1),h.Q6J("ngIf",t.post.data.isFeatured),h.xp6(2),h.hij("Views - ",t.post.views,""),h.xp6(2),h.hij("Last Update - ",h.lcZ(10,7,t.post.createdAt.toMillis()),""),h.xp6(3),h.hij(" ",t.post.title,""),h.xp6(1),h.Q6J("innerHTML",t.post.content,h.oJD)}}function iG(n,e){if(1&n&&(h.TgZ(0,"div"),h._UZ(1,"app-post-card",16),h.qZA()),2&n){const t=e.$implicit;h.xp6(1),h.Q6J("postData",t)}}const sG=[{path:"",component:Y$},{path:"category/:category/:id",component:J$},{path:"post/:id",component:(()=>{var n;class e{constructor(r,i){this.postSrvice=r,this.route=i,this.postSimilarArray=[]}ngOnInit(){this.route.params.subscribe(r=>{this.postSrvice.countViws(r.id),this.postSrvice.loadOnePost(r.id).subscribe(i=>{this.post=i,this.loadSimilarPosts(this.post.category.categoryId),console.log("postt",this.post)})})}loadSimilarPosts(r){this.postSrvice.loadSimilar(r).subscribe(i=>{this.postSimilarArray=i})}}return(n=e).\u0275fac=function(r){return new(r||n)(h.Y36(WR),h.Y36(vc))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-single-post"]],decls:8,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-md-9"],["class","card shadow-effect",4,"ngIf"],[1,"col-md-3"],[4,"ngFor","ngForOf"],[1,"card","shadow-effect"],["alt","",1,"card-img-top","img-fluid",3,"src"],[1,"card-body"],[1,"bg-light","text-danger","text-center"],["class","bg-light text-success  text-center ml-2",4,"ngIf"],[1,"bg-light","text-info","text-center","ml-2"],[1,"bg-light","text-warning","text-center","ml-2"],[1,"mt-3","mb-3"],[3,"innerHTML"],[1,"bg-light","text-success","text-center","ml-2"],[3,"postData"]],template:function(r,i){1&r&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2),h.YNc(3,rG,14,9,"div",3),h._UZ(4,"app-comment-form")(5,"app-comments-list"),h.qZA(),h.TgZ(6,"div",4),h.YNc(7,iG,2,1,"div",5),h.qZA()()()),2&r&&(h.xp6(3),h.Q6J("ngIf",i.post),h.xp6(4),h.Q6J("ngForOf",i.postSimilarArray))},dependencies:[Es,Is,eG,tG,qR,Br]}),e})()},{path:"about",component:(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-about-us"]],decls:16,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","mb-5","p-5","bg-theme"],[1,"text-white","text-center"],[1,"p-5","mt-4","bg-secondary-theme","text-theme-primary"],[1,"text-center"],[1,"btn","btn-info","btn-sm","mt-4","btn-theme"]],template:function(r,i){1&r&&(h.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),h._uU(3,"About Us"),h.qZA(),h.TgZ(4,"div",3)(5,"p"),h._uU(6,"lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money"),h.qZA(),h.TgZ(7,"p"),h._uU(8,"lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money"),h.qZA(),h.TgZ(9,"p"),h._uU(10,"lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money"),h.qZA(),h.TgZ(11,"p"),h._uU(12,"lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money"),h.qZA(),h.TgZ(13,"div",4)(14,"button",5),h._uU(15," Back to Home"),h.qZA()()()()())}}),e})()},{path:"terms-conditions",component:(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-conditions-and-terms"]],decls:16,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","mb-5","p-5","bg-theme"],[1,"text-white","text-center"],[1,"p-5","mt-4","bg-secondary-theme","text-theme-primary"],[1,"text-center"],[1,"btn","btn-info","btn-sm","mt-4","btn-theme"]],template:function(r,i){1&r&&(h.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),h._uU(3,"Terms & Conditions"),h.qZA(),h.TgZ(4,"div",3)(5,"p"),h._uU(6,"lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money"),h.qZA(),h.TgZ(7,"p"),h._uU(8,"lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money"),h.qZA(),h.TgZ(9,"p"),h._uU(10,"lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money"),h.qZA(),h.TgZ(11,"p"),h._uU(12,"lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money lorem ipsum lord of the rings bla something about horses and coins and making money"),h.qZA(),h.TgZ(13,"div",4)(14,"button",5),h._uU(15," Back to Home"),h.qZA()()()()())}}),e})()},{path:"contact",component:(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-contact-us"]],decls:2,vars:0,template:function(r,i){1&r&&(h.TgZ(0,"p"),h._uU(1,"contact-us works!"),h.qZA())}}),e})()}];let oG=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[RT.forRoot(sG),RT]}),e})(),aG=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-header"]],decls:4,vars:0,consts:[[1,"navbar","navbar-expand-lg","fixed-top","bg-white"],[1,"container","justify-content-center"],["href","/",1,"site-logo"]],template:function(r,i){1&r&&(h.TgZ(0,"header",0)(1,"div",1)(2,"a",2),h._uU(3,"ANG-BLOG"),h.qZA()()())},styles:["header[_ngcontent-%COMP%]{height:100px}.site-logo[_ngcontent-%COMP%]{padding:5px 20px;border-radius:20px;background-color:var(--secondary-color);color:var(--primary-color);font-size:1.5em;text-decoration:none}.site-logo[_ngcontent-%COMP%]:hover{text-decoration:underline}"]}),e})(),uG=(()=>{var n;class e{constructor(r){this.afs=r}loadData(){return this.afs.collection("categories").snapshotChanges().pipe((0,gt.U)(r=>r.map(i=>{const a=i.payload.doc.data();return{id:i.payload.doc.id,data:a}})))}}return(n=e).\u0275fac=function(r){return new(r||n)(h.LFG(Ib))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const lG=function(n,e){return["/category",n,e]};function cG(n,e){if(1&n&&(h.TgZ(0,"li",5)(1,"a",6),h._uU(2),h.qZA()()),2&n){const t=e.$implicit;h.xp6(1),h.Q6J("routerLink",h.WLB(2,lG,t.data.category,t.id)),h.xp6(1),h.hij(" ",t.data.category,"")}}let dG=(()=>{var n;class e{constructor(r){this.categoryService=r,this.categoryArray=[]}ngOnInit(){this.categoryService.loadData().subscribe(r=>{console.log("init mavbar",r),this.categoryArray=r})}}return(n=e).\u0275fac=function(r){return new(r||n)(h.Y36(uG))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-category-navbar"]],decls:5,vars:1,consts:[[1,"navbar","navbar-expand-lg","fixed-top"],[1,"container"],[1,"collapse","navbar-collapse","justify-content-center"],[1,"navbar-nav"],["class","nav-item ml-3",4,"ngFor","ngForOf"],[1,"nav-item","ml-3"],["href","",1,"nav-link",3,"routerLink"]],template:function(r,i){1&r&&(h.TgZ(0,"nav",0)(1,"div",1)(2,"div",2)(3,"ul",3),h.YNc(4,cG,3,5,"li",4),h.qZA()()()()),2&r&&(h.xp6(4),h.Q6J("ngForOf",i.categoryArray))},dependencies:[Es,ep],styles:["nav[_ngcontent-%COMP%]{margin-top:100px;height:50px;background-color:var(--navbar-footer-color)}.nav-link[_ngcontent-%COMP%]{text-transform:uppercase;color:var(--primary-color)}"]}),e})(),hG=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-footer"]],decls:22,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-12","text-center"],[1,"site-logo"],[1,"nav","justify-content-center"],[1,"nav-item"],["href","",1,"nav-link"],[1,"mb-2","mt-2"]],template:function(r,i){1&r&&(h.TgZ(0,"footer")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),h._uU(5,"ANG-BLOG"),h.qZA(),h.TgZ(6,"div")(7,"ul",4)(8,"li",5)(9,"a",6),h._uU(10,"Home"),h.qZA()(),h.TgZ(11,"li",5)(12,"a",6),h._uU(13,"About"),h.qZA()(),h.TgZ(14,"li",5)(15,"a",6),h._uU(16,"Terms & Conditions"),h.qZA()(),h.TgZ(17,"li",5)(18,"a",6),h._uU(19,"Contact us"),h.qZA()()()(),h.TgZ(20,"p",7),h._uU(21," Copyright @2023 My BlogSite "),h.qZA()()()()())},styles:["footer[_ngcontent-%COMP%]{height:130px;padding:15px;background-color:var(--navbar-footer-color)}.site-logo[_ngcontent-%COMP%]{padding:5px 20px;border-radius:20px;background-color:var(--secondary-color);font-size:1.2em}.nav-link[_ngcontent-%COMP%]{color:var(--primary-color)}"]}),e})(),fG=(()=>{var n;class e{constructor(r){this.afs=r}addSubs(r){console.log("data",r),this.afs.collection("subscribers").add(r).then(()=>{})}checkSub(r){return console.log(r.email),this.afs.collection("subscribers",i=>i.where("email","==",r.email)).get()}}return(n=e).\u0275fac=function(r){return new(r||n)(h.LFG(Ib))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function pG(n,e){1&n&&(h.TgZ(0,"div",7),h._uU(1," Email is Already in use "),h.qZA())}function gG(n,e){1&n&&(h.TgZ(0,"div",8),h._uU(1," Thanks for subscribing to our newsletter Service. "),h.qZA())}function mG(n,e){1&n&&(h.TgZ(0,"div"),h._uU(1,"Name is required"),h.qZA())}function yG(n,e){if(1&n&&(h.TgZ(0,"div",19),h.YNc(1,mG,2,0,"div",20),h.qZA()),2&n){h.oxw();const t=h.MAs(4);h.xp6(1),h.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function _G(n,e){1&n&&(h.TgZ(0,"div"),h._uU(1,"Email is required"),h.qZA())}function vG(n,e){if(1&n&&(h.TgZ(0,"div",19),h.YNc(1,_G,2,0,"div",20),h.qZA()),2&n){h.oxw();const t=h.MAs(8);h.xp6(1),h.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function wG(n,e){1&n&&(h.TgZ(0,"div"),h._uU(1,"Please Enter a valid email"),h.qZA())}function EG(n,e){if(1&n&&(h.TgZ(0,"div",19),h.YNc(1,wG,2,0,"div",20),h.qZA()),2&n){h.oxw();const t=h.MAs(8);h.xp6(1),h.Q6J("ngIf",null==t.errors?null:t.errors.email)}}const IG=function(n){return{"is-invalid":n}};function CG(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"form",9,10),h.NdJ("ngSubmit",function(){h.CHM(t);const i=h.MAs(1),a=h.oxw();return h.KtG(a.onSubmit(i.value))}),h.TgZ(2,"div",11),h._UZ(3,"input",12,13),h.YNc(5,yG,2,1,"div",14),h.qZA(),h.TgZ(6,"div",11),h._UZ(7,"input",15,16),h.YNc(9,vG,2,1,"div",14),h.YNc(10,EG,2,1,"div",14),h.qZA(),h.TgZ(11,"div",17)(12,"button",18),h._uU(13,"SUBSCRIBE"),h.qZA()()()}if(2&n){const t=h.MAs(1),r=h.MAs(4),i=h.MAs(8);h.xp6(3),h.Q6J("ngClass",h.VKq(5,IG,r.touched&&r.invalid)),h.xp6(2),h.Q6J("ngIf",r.touched&&r.invalid),h.xp6(4),h.Q6J("ngIf",i.touched&&i.invalid),h.xp6(1),h.Q6J("ngIf",i.touched&&i.invalid),h.xp6(2),h.Q6J("disabled",t.invalid)}}let DG=(()=>{var n;class e{constructor(r){this.subservice=r,this.isEmailError=!1,this.isSubscribed=!1}onSubmit(r){console.log("blblblblb",r),this.subservice.checkSub({name:r.name,email:r.email}).subscribe(a=>{a.empty?(this.subservice.addSubs(r),this.isSubscribed=!0):this.isEmailError=!0})}}return(n=e).\u0275fac=function(r){return new(r||n)(h.Y36(fG))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-subscription-form"]],decls:10,vars:3,consts:[[1,"card"],[1,"card-body"],[1,"text-center","mt-3","mb-5"],[1,"m-auto","subs-text"],["class","alert alert-danger mt-3",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],["class","form-inline  mt-5 mb-5",3,"ngSubmit",4,"ngIf"],[1,"alert","alert-danger","mt-3"],[1,"alert","alert-info","mt-3"],[1,"form-inline","mt-5","mb-5",3,"ngSubmit"],["subForm","ngForm"],[1,"form-group","col-md-5"],["name","name","ngModel","","required","","type","text","placeholder","Your Name",1,"form-control",3,"ngClass"],["Name","ngModel"],["class","text-danger",4,"ngIf"],["name","emai","required","","email","","ngModel","","type","email","placeholder","Email Address",1,"form-control"],["Email","ngModel"],[1,"col-md-2"],[1,"btn","btn-info","btn-block","btn-theme",3,"disabled"],[1,"text-danger"],[4,"ngIf"]],template:function(r,i){1&r&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),h._uU(4,"Subscription Form"),h.qZA(),h.TgZ(5,"p",3),h._uU(6," Lorem Ipsum bla vfrgreg re g vfrgreg re grmkukmh khdgskdkhsfg djdkgkher vfrgreg re grmkukmh khdgskdkhsfg djdkgkher vfrgreg re grmkukmh khdgskdkhsfg djdkgkherrmkukmh khdgskdkhsfg djdkgkher relktklre tb.n,nvdf retuelr.gfdg "),h.qZA(),h.YNc(7,pG,2,0,"div",4),h.YNc(8,gG,2,0,"div",5),h.YNc(9,CG,14,7,"form",6),h.qZA()()()),2&r&&(h.xp6(7),h.Q6J("ngIf",i.isEmailError),h.xp6(1),h.Q6J("ngIf",i.isSubscribed),h.xp6(1),h.Q6J("ngIf",!i.isSubscribed))},dependencies:[jt,Is,lN,Cb,wL,QR,Ob,gN,uN,j0],styles:[".card[_ngcontent-%COMP%]{background-color:var(--secondary-color);border:none;box-shadow:0 0 33px -10px #4772fe4d;width:1200px}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%]{width:100%}.subs-text[_ngcontent-%COMP%]{width:500px}"]}),e})(),bG=(()=>{var n;class e{constructor(){this.title="title "}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"app-body"],[1,"container","mt-5","mb-5"],[1,"justify-content-center"]],template:function(r,i){1&r&&(h._UZ(0,"app-header")(1,"app-category-navbar"),h.TgZ(2,"div",0),h._UZ(3,"router-outlet"),h.qZA(),h.TgZ(4,"div",1)(5,"div",2),h._UZ(6,"app-subscription-form"),h.qZA()(),h._UZ(7,"app-footer"))},dependencies:[h_,aG,dG,hG,DG],styles:[".app-body[_ngcontent-%COMP%]{min-height:35vh;margin-top:150px}"]}),e})();const TG_firebaseConfig={apiKey:"AIzaSyA3pUZnCkSGybSbPw9qKMlGyi1YUq-o6zU",authDomain:"ang-blog-3dc21.firebaseapp.com",projectId:"ang-blog-3dc21",storageBucket:"ang-blog-3dc21.appspot.com",messagingSenderId:"1084289609633",appId:"1:1084289609633:web:46827fcc86a3d6d1a325e0"};let SG=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[bG]}),n.\u0275inj=h.cJS({imports:[aa,oG,G$,Su.hO.initializeApp(TG_firebaseConfig),XH]}),e})();bf().bootstrapModule(SG).catch(n=>console.error(n))},9751:(_t,Me,U)=>{U.d(Me,{y:()=>ye});var h=U(2961),$=U(727),O=U(8822),re=U(9635),ue=U(2416),le=U(576),Ce=U(2806);let ye=(()=>{class Q{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const qe=new Q;return qe.source=this,qe.operator=Ae,qe}subscribe(Ae,qe,rt){const _e=function z(Q){return Q&&Q instanceof h.Lv||function W(Q){return Q&&(0,le.m)(Q.next)&&(0,le.m)(Q.error)&&(0,le.m)(Q.complete)}(Q)&&(0,$.Nn)(Q)}(Ae)?Ae:new h.Hp(Ae,qe,rt);return(0,Ce.x)(()=>{const{operator:Ne,source:ke}=this;_e.add(Ne?Ne.call(_e,ke):ke?this._subscribe(_e):this._trySubscribe(_e))}),_e}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(qe){Ae.error(qe)}}forEach(Ae,qe){return new(qe=we(qe))((rt,_e)=>{const Ne=new h.Hp({next:ke=>{try{Ae(ke)}catch(je){_e(je),Ne.unsubscribe()}},error:_e,complete:rt});this.subscribe(Ne)})}_subscribe(Ae){var qe;return null===(qe=this.source)||void 0===qe?void 0:qe.subscribe(Ae)}[O.L](){return this}pipe(...Ae){return(0,re.U)(Ae)(this)}toPromise(Ae){return new(Ae=we(Ae))((qe,rt)=>{let _e;this.subscribe(Ne=>_e=Ne,Ne=>rt(Ne),()=>qe(_e))})}}return Q.create=$e=>new Q($e),Q})();function we(Q){var $e;return null!==($e=Q??ue.v.Promise)&&void 0!==$e?$e:Promise}},7579:(_t,Me,U)=>{U.d(Me,{x:()=>Ce});var h=U(9751),$=U(727);const re=(0,U(3888).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=U(8737),le=U(2806);let Ce=(()=>{class we extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const Q=new ye(this,this);return Q.operator=z,Q}_throwIfClosed(){if(this.closed)throw new re}next(z){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(z)}})}error(z){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:Q}=this;for(;Q.length;)Q.shift().error(z)}})}complete(){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:Q,isStopped:$e,observers:Ae}=this;return Q||$e?$.Lc:(this.currentObservers=null,Ae.push(z),new $.w0(()=>{this.currentObservers=null,(0,ue.P)(Ae,z)}))}_checkFinalizedStatuses(z){const{hasError:Q,thrownError:$e,isStopped:Ae}=this;Q?z.error($e):Ae&&z.complete()}asObservable(){const z=new h.y;return z.source=this,z}}return we.create=(W,z)=>new ye(W,z),we})();class ye extends Ce{constructor(W,z){super(),this.destination=W,this.source=z}next(W){var z,Q;null===(Q=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===Q||Q.call(z,W)}error(W){var z,Q;null===(Q=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===Q||Q.call(z,W)}complete(){var W,z;null===(z=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===z||z.call(W)}_subscribe(W){var z,Q;return null!==(Q=null===(z=this.source)||void 0===z?void 0:z.subscribe(W))&&void 0!==Q?Q:$.Lc}}},2961:(_t,Me,U)=>{U.d(Me,{Hp:()=>rt,Lv:()=>Q});var h=U(576),$=U(727),O=U(2416),re=U(7849);function ue(){}const le=we("C",void 0,void 0);function we(Se,be,Pe){return{kind:Se,value:be,error:Pe}}var W=U(3410),z=U(2806);class Q extends $.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,$.Nn)(be)&&be.add(this)):this.destination=je}static create(be,Pe,He){return new rt(be,Pe,He)}next(be){this.isStopped?ke(function ye(Se){return we("N",Se,void 0)}(be),this):this._next(be)}error(be){this.isStopped?ke(function Ce(Se){return we("E",void 0,Se)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?ke(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Ae(Se,be){return $e.call(Se,be)}class qe{constructor(be){this.partialObserver=be}next(be){const{partialObserver:Pe}=this;if(Pe.next)try{Pe.next(be)}catch(He){_e(He)}}error(be){const{partialObserver:Pe}=this;if(Pe.error)try{Pe.error(be)}catch(He){_e(He)}else _e(be)}complete(){const{partialObserver:be}=this;if(be.complete)try{be.complete()}catch(Pe){_e(Pe)}}}class rt extends Q{constructor(be,Pe,He){let Fe;if(super(),(0,h.m)(be)||!be)Fe={next:be??void 0,error:Pe??void 0,complete:He??void 0};else{let ae;this&&O.v.useDeprecatedNextContext?(ae=Object.create(be),ae.unsubscribe=()=>this.unsubscribe(),Fe={next:be.next&&Ae(be.next,ae),error:be.error&&Ae(be.error,ae),complete:be.complete&&Ae(be.complete,ae)}):Fe=be}this.destination=new qe(Fe)}}function _e(Se){O.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Se):(0,re.h)(Se)}function ke(Se,be){const{onStoppedNotification:Pe}=O.v;Pe&&W.z.setTimeout(()=>Pe(Se,be))}const je={closed:!0,next:ue,error:function Ne(Se){throw Se},complete:ue}},727:(_t,Me,U)=>{U.d(Me,{Lc:()=>le,w0:()=>ue,Nn:()=>Ce});var h=U(576);const O=(0,U(3888).d)(we=>function(z){we(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((Q,$e)=>`${$e+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var re=U(8737);class ue{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Ae of z)Ae.remove(this);else z.remove(this);const{initialTeardown:Q}=this;if((0,h.m)(Q))try{Q()}catch(Ae){W=Ae instanceof O?Ae.errors:[Ae]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Ae of $e)try{ye(Ae)}catch(qe){W=W??[],qe instanceof O?W=[...W,...qe.errors]:W.push(qe)}}if(W)throw new O(W)}}add(W){var z;if(W&&W!==this)if(this.closed)ye(W);else{if(W instanceof ue){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(W)}}_hasParent(W){const{_parentage:z}=this;return z===W||Array.isArray(z)&&z.includes(W)}_addParent(W){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(W),z):z?[z,W]:W}_removeParent(W){const{_parentage:z}=this;z===W?this._parentage=null:Array.isArray(z)&&(0,re.P)(z,W)}remove(W){const{_finalizers:z}=this;z&&(0,re.P)(z,W),W instanceof ue&&W._removeParent(this)}}ue.EMPTY=(()=>{const we=new ue;return we.closed=!0,we})();const le=ue.EMPTY;function Ce(we){return we instanceof ue||we&&"closed"in we&&(0,h.m)(we.remove)&&(0,h.m)(we.add)&&(0,h.m)(we.unsubscribe)}function ye(we){(0,h.m)(we)?we():we.unsubscribe()}},2416:(_t,Me,U)=>{U.d(Me,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(_t,Me,U)=>{U.d(Me,{E:()=>$});const $=new(U(9751).y)(ue=>ue.complete())},8996:(_t,Me,U)=>{U.d(Me,{D:()=>be});var h=U(8421),$=U(5363),O=U(9468),le=U(9751),ye=U(2202),we=U(576),W=U(9672);function Q(Pe,He){if(!Pe)throw new Error("Iterable cannot be null");return new le.y(Fe=>{(0,W.f)(Fe,He,()=>{const ae=Pe[Symbol.asyncIterator]();(0,W.f)(Fe,He,()=>{ae.next().then(Je=>{Je.done?Fe.complete():Fe.next(Je.value)})},0,!0)})})}var $e=U(3670),Ae=U(8239),qe=U(1144),rt=U(6495),_e=U(2206),Ne=U(4532),ke=U(3260);function be(Pe,He){return He?function Se(Pe,He){if(null!=Pe){if((0,$e.c)(Pe))return function re(Pe,He){return(0,h.Xf)(Pe).pipe((0,O.R)(He),(0,$.Q)(He))}(Pe,He);if((0,qe.z)(Pe))return function Ce(Pe,He){return new le.y(Fe=>{let ae=0;return He.schedule(function(){ae===Pe.length?Fe.complete():(Fe.next(Pe[ae++]),Fe.closed||this.schedule())})})}(Pe,He);if((0,Ae.t)(Pe))return function ue(Pe,He){return(0,h.Xf)(Pe).pipe((0,O.R)(He),(0,$.Q)(He))}(Pe,He);if((0,_e.D)(Pe))return Q(Pe,He);if((0,rt.T)(Pe))return function z(Pe,He){return new le.y(Fe=>{let ae;return(0,W.f)(Fe,He,()=>{ae=Pe[ye.h](),(0,W.f)(Fe,He,()=>{let Je,bt;try{({value:Je,done:bt}=ae.next())}catch(nt){return void Fe.error(nt)}bt?Fe.complete():Fe.next(Je)},0,!0)}),()=>(0,we.m)(ae?.return)&&ae.return()})}(Pe,He);if((0,ke.L)(Pe))return function je(Pe,He){return Q((0,ke.Q)(Pe),He)}(Pe,He)}throw(0,Ne.z)(Pe)}(Pe,He):(0,h.Xf)(Pe)}},8421:(_t,Me,U)=>{U.d(Me,{Xf:()=>$e});var h=U(7582),$=U(1144),O=U(8239),re=U(9751),ue=U(3670),le=U(2206),Ce=U(4532),ye=U(6495),we=U(3260),W=U(576),z=U(7849),Q=U(8822);function $e(Se){if(Se instanceof re.y)return Se;if(null!=Se){if((0,ue.c)(Se))return function Ae(Se){return new re.y(be=>{const Pe=Se[Q.L]();if((0,W.m)(Pe.subscribe))return Pe.subscribe(be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Se);if((0,$.z)(Se))return function qe(Se){return new re.y(be=>{for(let Pe=0;Pe<Se.length&&!be.closed;Pe++)be.next(Se[Pe]);be.complete()})}(Se);if((0,O.t)(Se))return function rt(Se){return new re.y(be=>{Se.then(Pe=>{be.closed||(be.next(Pe),be.complete())},Pe=>be.error(Pe)).then(null,z.h)})}(Se);if((0,le.D)(Se))return Ne(Se);if((0,ye.T)(Se))return function _e(Se){return new re.y(be=>{for(const Pe of Se)if(be.next(Pe),be.closed)return;be.complete()})}(Se);if((0,we.L)(Se))return function ke(Se){return Ne((0,we.Q)(Se))}(Se)}throw(0,Ce.z)(Se)}function Ne(Se){return new re.y(be=>{(function je(Se,be){var Pe,He,Fe,ae;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Pe=(0,h.KL)(Se);!(He=yield Pe.next()).done;)if(be.next(He.value),be.closed)return}catch(Je){Fe={error:Je}}finally{try{He&&!He.done&&(ae=Pe.return)&&(yield ae.call(Pe))}finally{if(Fe)throw Fe.error}}be.complete()})})(Se,be).catch(Pe=>be.error(Pe))})}},6451:(_t,Me,U)=>{U.d(Me,{T:()=>le});var h=U(8189),$=U(8421),O=U(515),re=U(7669),ue=U(8996);function le(...Ce){const ye=(0,re.yG)(Ce),we=(0,re._6)(Ce,1/0),W=Ce;return W.length?1===W.length?(0,$.Xf)(W[0]):(0,h.J)(we)((0,ue.D)(W,ye)):O.E}},5403:(_t,Me,U)=>{U.d(Me,{x:()=>$});var h=U(2961);function $(re,ue,le,Ce,ye){return new O(re,ue,le,Ce,ye)}class O extends h.Lv{constructor(ue,le,Ce,ye,we,W){super(ue),this.onFinalize=we,this.shouldUnsubscribe=W,this._next=le?function(z){try{le(z)}catch(Q){ue.error(Q)}}:super._next,this._error=ye?function(z){try{ye(z)}catch(Q){ue.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=Ce?function(){try{Ce()}catch(z){ue.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:le}=this;super.unsubscribe(),!le&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},4004:(_t,Me,U)=>{U.d(Me,{U:()=>O});var h=U(4482),$=U(5403);function O(re,ue){return(0,h.e)((le,Ce)=>{let ye=0;le.subscribe((0,$.x)(Ce,we=>{Ce.next(re.call(ue,we,ye++))}))})}},8189:(_t,Me,U)=>{U.d(Me,{J:()=>O});var h=U(5577),$=U(4671);function O(re=1/0){return(0,h.z)($.y,re)}},5577:(_t,Me,U)=>{U.d(Me,{z:()=>ye});var h=U(4004),$=U(8421),O=U(4482),re=U(9672),ue=U(5403),Ce=U(576);function ye(we,W,z=1/0){return(0,Ce.m)(W)?ye((Q,$e)=>(0,h.U)((Ae,qe)=>W(Q,Ae,$e,qe))((0,$.Xf)(we(Q,$e))),z):("number"==typeof W&&(z=W),(0,O.e)((Q,$e)=>function le(we,W,z,Q,$e,Ae,qe,rt){const _e=[];let Ne=0,ke=0,je=!1;const Se=()=>{je&&!_e.length&&!Ne&&W.complete()},be=He=>Ne<Q?Pe(He):_e.push(He),Pe=He=>{Ae&&W.next(He),Ne++;let Fe=!1;(0,$.Xf)(z(He,ke++)).subscribe((0,ue.x)(W,ae=>{$e?.(ae),Ae?be(ae):W.next(ae)},()=>{Fe=!0},void 0,()=>{if(Fe)try{for(Ne--;_e.length&&Ne<Q;){const ae=_e.shift();qe?(0,re.f)(W,qe,()=>Pe(ae)):Pe(ae)}Se()}catch(ae){W.error(ae)}}))};return we.subscribe((0,ue.x)(W,be,()=>{je=!0,Se()})),()=>{rt?.()}}(Q,$e,we,z)))}},5363:(_t,Me,U)=>{U.d(Me,{Q:()=>re});var h=U(9672),$=U(4482),O=U(5403);function re(ue,le=0){return(0,$.e)((Ce,ye)=>{Ce.subscribe((0,O.x)(ye,we=>(0,h.f)(ye,ue,()=>ye.next(we),le),()=>(0,h.f)(ye,ue,()=>ye.complete(),le),we=>(0,h.f)(ye,ue,()=>ye.error(we),le)))})}},3099:(_t,Me,U)=>{U.d(Me,{B:()=>ue});var h=U(8421),$=U(7579),O=U(2961),re=U(4482);function ue(Ce={}){const{connector:ye=(()=>new $.x),resetOnError:we=!0,resetOnComplete:W=!0,resetOnRefCountZero:z=!0}=Ce;return Q=>{let $e,Ae,qe,rt=0,_e=!1,Ne=!1;const ke=()=>{Ae?.unsubscribe(),Ae=void 0},je=()=>{ke(),$e=qe=void 0,_e=Ne=!1},Se=()=>{const be=$e;je(),be?.unsubscribe()};return(0,re.e)((be,Pe)=>{rt++,!Ne&&!_e&&ke();const He=qe=qe??ye();Pe.add(()=>{rt--,0===rt&&!Ne&&!_e&&(Ae=le(Se,z))}),He.subscribe(Pe),!$e&&rt>0&&($e=new O.Hp({next:Fe=>He.next(Fe),error:Fe=>{Ne=!0,ke(),Ae=le(je,we,Fe),He.error(Fe)},complete:()=>{_e=!0,ke(),Ae=le(je,W),He.complete()}}),(0,h.Xf)(be).subscribe($e))})(Q)}}function le(Ce,ye,...we){if(!0===ye)return void Ce();if(!1===ye)return;const W=new O.Hp({next:()=>{W.unsubscribe(),Ce()}});return(0,h.Xf)(ye(...we)).subscribe(W)}},9468:(_t,Me,U)=>{U.d(Me,{R:()=>$});var h=U(4482);function $(O,re=0){return(0,h.e)((ue,le)=>{le.add(O.schedule(()=>ue.subscribe(le),re))})}},8505:(_t,Me,U)=>{U.d(Me,{b:()=>ue});var h=U(576),$=U(4482),O=U(5403),re=U(4671);function ue(le,Ce,ye){const we=(0,h.m)(le)||Ce||ye?{next:le,error:Ce,complete:ye}:le;return we?(0,$.e)((W,z)=>{var Q;null===(Q=we.subscribe)||void 0===Q||Q.call(we);let $e=!0;W.subscribe((0,O.x)(z,Ae=>{var qe;null===(qe=we.next)||void 0===qe||qe.call(we,Ae),z.next(Ae)},()=>{var Ae;$e=!1,null===(Ae=we.complete)||void 0===Ae||Ae.call(we),z.complete()},Ae=>{var qe;$e=!1,null===(qe=we.error)||void 0===qe||qe.call(we,Ae),z.error(Ae)},()=>{var Ae,qe;$e&&(null===(Ae=we.unsubscribe)||void 0===Ae||Ae.call(we)),null===(qe=we.finalize)||void 0===qe||qe.call(we)}))}):re.y}},4408:(_t,Me,U)=>{U.d(Me,{o:()=>ue});var h=U(727);class $ extends h.w0{constructor(Ce,ye){super()}schedule(Ce,ye=0){return this}}const O={setInterval(le,Ce,...ye){const{delegate:we}=O;return we?.setInterval?we.setInterval(le,Ce,...ye):setInterval(le,Ce,...ye)},clearInterval(le){const{delegate:Ce}=O;return(Ce?.clearInterval||clearInterval)(le)},delegate:void 0};var re=U(8737);class ue extends ${constructor(Ce,ye){super(Ce,ye),this.scheduler=Ce,this.work=ye,this.pending=!1}schedule(Ce,ye=0){var we;if(this.closed)return this;this.state=Ce;const W=this.id,z=this.scheduler;return null!=W&&(this.id=this.recycleAsyncId(z,W,ye)),this.pending=!0,this.delay=ye,this.id=null!==(we=this.id)&&void 0!==we?we:this.requestAsyncId(z,this.id,ye),this}requestAsyncId(Ce,ye,we=0){return O.setInterval(Ce.flush.bind(Ce,this),we)}recycleAsyncId(Ce,ye,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return ye;null!=ye&&O.clearInterval(ye)}execute(Ce,ye){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(Ce,ye);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ce,ye){let W,we=!1;try{this.work(Ce)}catch(z){we=!0,W=z||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:Ce,scheduler:ye}=this,{actions:we}=ye;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(we,this),null!=Ce&&(this.id=this.recycleAsyncId(ye,Ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(_t,Me,U)=>{U.d(Me,{v:()=>O});var h=U(6063);class ${constructor(ue,le=$.now){this.schedulerActionCtor=ue,this.now=le}schedule(ue,le=0,Ce){return new this.schedulerActionCtor(this,ue).schedule(Ce,le)}}$.now=h.l.now;class O extends ${constructor(ue,le=$.now){super(ue,le),this.actions=[],this._active=!1}flush(ue){const{actions:le}=this;if(this._active)return void le.push(ue);let Ce;this._active=!0;do{if(Ce=ue.execute(ue.state,ue.delay))break}while(ue=le.shift());if(this._active=!1,Ce){for(;ue=le.shift();)ue.unsubscribe();throw Ce}}}},4986:(_t,Me,U)=>{U.d(Me,{z:()=>O});var h=U(4408);const O=new(U(7565).v)(h.o)},6063:(_t,Me,U)=>{U.d(Me,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(_t,Me,U)=>{U.d(Me,{z:()=>h});const h={setTimeout($,O,...re){const{delegate:ue}=h;return ue?.setTimeout?ue.setTimeout($,O,...re):setTimeout($,O,...re)},clearTimeout($){const{delegate:O}=h;return(O?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(_t,Me,U)=>{U.d(Me,{h:()=>$});const $=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(_t,Me,U)=>{U.d(Me,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(_t,Me,U)=>{U.d(Me,{_6:()=>le,jO:()=>re,yG:()=>ue});var h=U(576);function O(Ce){return Ce[Ce.length-1]}function re(Ce){return(0,h.m)(O(Ce))?Ce.pop():void 0}function ue(Ce){return function $(Ce){return Ce&&(0,h.m)(Ce.schedule)}(O(Ce))?Ce.pop():void 0}function le(Ce,ye){return"number"==typeof O(Ce)?Ce.pop():ye}},8737:(_t,Me,U)=>{function h($,O){if($){const re=$.indexOf(O);0<=re&&$.splice(re,1)}}U.d(Me,{P:()=>h})},3888:(_t,Me,U)=>{function h($){const re=$(ue=>{Error.call(ue),ue.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}U.d(Me,{d:()=>h})},2806:(_t,Me,U)=>{U.d(Me,{O:()=>re,x:()=>O});var h=U(2416);let $=null;function O(ue){if(h.v.useDeprecatedSynchronousErrorHandling){const le=!$;if(le&&($={errorThrown:!1,error:null}),ue(),le){const{errorThrown:Ce,error:ye}=$;if($=null,Ce)throw ye}}else ue()}function re(ue){h.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=ue)}},9672:(_t,Me,U)=>{function h($,O,re,ue=0,le=!1){const Ce=O.schedule(function(){re(),le?$.add(this.schedule(null,ue)):this.unsubscribe()},ue);if($.add(Ce),!le)return Ce}U.d(Me,{f:()=>h})},4671:(_t,Me,U)=>{function h($){return $}U.d(Me,{y:()=>h})},1144:(_t,Me,U)=>{U.d(Me,{z:()=>h});const h=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(_t,Me,U)=>{U.d(Me,{D:()=>$});var h=U(576);function $(O){return Symbol.asyncIterator&&(0,h.m)(O?.[Symbol.asyncIterator])}},576:(_t,Me,U)=>{function h($){return"function"==typeof $}U.d(Me,{m:()=>h})},3670:(_t,Me,U)=>{U.d(Me,{c:()=>O});var h=U(8822),$=U(576);function O(re){return(0,$.m)(re[h.L])}},6495:(_t,Me,U)=>{U.d(Me,{T:()=>O});var h=U(2202),$=U(576);function O(re){return(0,$.m)(re?.[h.h])}},8239:(_t,Me,U)=>{U.d(Me,{t:()=>$});var h=U(576);function $(O){return(0,h.m)(O?.then)}},3260:(_t,Me,U)=>{U.d(Me,{L:()=>re,Q:()=>O});var h=U(7582),$=U(576);function O(ue){return(0,h.FC)(this,arguments,function*(){const Ce=ue.getReader();try{for(;;){const{value:ye,done:we}=yield(0,h.qq)(Ce.read());if(we)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(ye)}}finally{Ce.releaseLock()}})}function re(ue){return(0,$.m)(ue?.getReader)}},4482:(_t,Me,U)=>{U.d(Me,{A:()=>$,e:()=>O});var h=U(576);function $(re){return(0,h.m)(re?.lift)}function O(re){return ue=>{if($(ue))return ue.lift(function(le){try{return re(le,this)}catch(Ce){this.error(Ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(_t,Me,U)=>{U.d(Me,{U:()=>O,z:()=>$});var h=U(4671);function $(...re){return O(re)}function O(re){return 0===re.length?h.y:1===re.length?re[0]:function(le){return re.reduce((Ce,ye)=>ye(Ce),le)}}},7849:(_t,Me,U)=>{U.d(Me,{h:()=>O});var h=U(2416),$=U(3410);function O(re){$.z.setTimeout(()=>{const{onUnhandledError:ue}=h.v;if(!ue)throw re;ue(re)})}},4532:(_t,Me,U)=>{function h($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Me,{z:()=>h})},4650:(_t,Me,U)=>{U.d(Me,{$8M:()=>Ya,$WT:()=>Vr,$Z:()=>NE,AFp:()=>wi,ALo:()=>Zc,AaK:()=>ye,CHM:()=>jl,CRH:()=>eA,CZH:()=>ay,CqO:()=>iI,D6c:()=>Ow,EJc:()=>uy,EpF:()=>nI,F4k:()=>rI,FYo:()=>A_,FiY:()=>So,GfV:()=>hE,Gpc:()=>z,JOm:()=>Tt,KtG:()=>ja,LFG:()=>Vt,LSH:()=>m_,Lbi:()=>NC,Lck:()=>LS,MAs:()=>ki,MMx:()=>Km,NdJ:()=>sv,OlP:()=>an,Oqu:()=>wh,P3R:()=>rE,PXZ:()=>HC,Q6J:()=>rv,QGY:()=>Em,Qsj:()=>sT,R0b:()=>ao,RDi:()=>Vb,Rgc:()=>Up,SBq:()=>uh,Sil:()=>Vh,Suo:()=>XS,TTD:()=>pd,TgZ:()=>vm,VKq:()=>cC,WLB:()=>Qm,X6Q:()=>YC,XFs:()=>dt,Xpm:()=>Ut,Xts:()=>__,Y36:()=>fh,YKP:()=>Kv,YNc:()=>er,Yjl:()=>Qt,Yz7:()=>st,Z0I:()=>Sn,ZZ4:()=>og,_Bn:()=>qm,_UZ:()=>iv,_Vd:()=>ah,_c5:()=>ug,_uU:()=>xm,aQg:()=>my,c2e:()=>Li,cJS:()=>wt,cg1:()=>xv,dDg:()=>BC,dqk:()=>dn,eFA:()=>ti,eJc:()=>wC,ekj:()=>yv,eoX:()=>Jp,f3M:()=>Pn,g9A:()=>RC,h0i:()=>Eu,hGG:()=>Yc,hij:()=>gl,iGM:()=>JS,ifc:()=>L,ip1:()=>MC,jDz:()=>Mh,kL8:()=>Nm,lG2:()=>At,lcZ:()=>ey,lqb:()=>Ec,lri:()=>pw,n5z:()=>Xl,oAB:()=>ie,oJD:()=>tE,oxw:()=>av,q4F:()=>fE,qLn:()=>Qf,qOj:()=>mm,qZA:()=>wm,rWj:()=>gw,s9C:()=>uv,sBO:()=>JC,s_b:()=>ry,soG:()=>El,tb:()=>jC,tp0:()=>gt,uIk:()=>ev,vHH:()=>_e,vpe:()=>Ns,wAp:()=>Mt,xp6:()=>DE,z2F:()=>hy,zSh:()=>ll,zs3:()=>ch});var h=U(7579),$=U(727),O=U(9751),re=U(6451),ue=U(3099);function le(s){for(let o in s)if(s[o]===le)return o;throw Error("Could not find renamed property on target object.")}function Ce(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function ye(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ye).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function we(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const W=le({__forward_ref__:le});function z(s){return s.__forward_ref__=z,s.toString=function(){return ye(this())},s}function Q(s){return $e(s)?s():s}function $e(s){return"function"==typeof s&&s.hasOwnProperty(W)&&s.__forward_ref__===z}function Ae(s){return s&&!!s.\u0275providers}const rt="https://g.co/ng/security#xss";class _e extends Error{constructor(o,u){super(Ne(o,u)),this.code=o}}function Ne(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}function ke(s){return"string"==typeof s?s:null==s?"":String(s)}function He(s,o){throw new _e(-201,!1)}function me(s,o){null==s&&function te(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function st(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function wt(s){return{providers:s.providers||[],imports:s.imports||[]}}function tn(s){return hn(s,Nn)||hn(s,gi)}function Sn(s){return null!==tn(s)}function hn(s,o){return s.hasOwnProperty(o)?s[o]:null}function An(s){return s&&(s.hasOwnProperty(nr)||s.hasOwnProperty(Vn))?s[nr]:null}const Nn=le({\u0275prov:le}),nr=le({\u0275inj:le}),gi=le({ngInjectableDef:le}),Vn=le({ngInjectorDef:le});var dt=(()=>((dt=dt||{})[dt.Default=0]="Default",dt[dt.Host=1]="Host",dt[dt.Self=2]="Self",dt[dt.SkipSelf=4]="SkipSelf",dt[dt.Optional=8]="Optional",dt))();let Un;function zn(s){const o=Un;return Un=s,o}function Fr(s,o,u){const c=tn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&dt.Optional?null:void 0!==o?o:void He(ye(s))}const dn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Wn={},Mr="__NG_DI_FLAG__",Bn="ngTempTokenPath",Zr="ngTokenPath",jn=/\n/gm,_r="\u0275",Kt="__source";let mi;function Yt(s){const o=mi;return mi=s,o}function oi(s,o=dt.Default){if(void 0===mi)throw new _e(-203,!1);return null===mi?Fr(s,void 0,o):mi.get(s,o&dt.Optional?null:void 0,o)}function Vt(s,o=dt.Default){return(function ts(){return Un}()||oi)(Q(s),o)}function Pn(s,o=dt.Default){return Vt(s,Rr(o))}function Rr(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Zn(s){const o=[];for(let u=0;u<s.length;u++){const c=Q(s[u]);if(Array.isArray(c)){if(0===c.length)throw new _e(900,!1);let d,g=dt.Default;for(let _=0;_<c.length;_++){const C=c[_],b=Lr(C);"number"==typeof b?-1===b?d=C.token:g|=b:d=C}o.push(Vt(d,g))}else o.push(Vt(c))}return o}function Kr(s,o){return s[Mr]=o,s.prototype[Mr]=o,s}function Lr(s){return s[Mr]}function j(s){return{toString:s}.toString()}var k=(()=>((k=k||{})[k.OnPush=0]="OnPush",k[k.Default=1]="Default",k))(),L=(()=>{return(s=L||(L={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",L;var s})();const N={},Z=[],De=le({\u0275cmp:le}),Xe=le({\u0275dir:le}),St=le({\u0275pipe:le}),Ct=le({\u0275mod:le}),Zt=le({\u0275fac:le}),xt=le({__NG_ELEMENT_ID__:le});let Tn=0;function Ut(s){return j(()=>{const o=Au(s),u={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===k.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||L.Emulated,id:"c"+Tn++,styles:s.styles||Z,_:null,schemas:s.schemas||null,tView:null};ff(u);const c=s.dependencies;return u.directiveDefs=co(c,!1),u.pipeDefs=co(c,!0),u})}function ws(s){return pt(s)||fn(s)}function pe(s){return null!==s}function ie(s){return j(()=>({type:s.type,bootstrap:s.bootstrap||Z,declarations:s.declarations||Z,imports:s.imports||Z,exports:s.exports||Z,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function ft(s,o){if(null==s)return N;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),u[d]=c,o&&(o[d]=g)}return u}function At(s){return j(()=>{const o=Au(s);return ff(o),o})}function Qt(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function pt(s){return s[De]||null}function fn(s){return s[Xe]||null}function rn(s){return s[St]||null}function Vr(s){const o=pt(s)||fn(s)||rn(s);return null!==o&&o.standalone}function wr(s,o){const u=s[Ct]||null;if(!u&&!0===o)throw new Error(`Type ${ye(s)} does not have '\u0275mod' property.`);return u}function Au(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||Z,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ft(s.inputs,o),outputs:ft(s.outputs)}}function ff(s){s.features?.forEach(o=>o(s))}function co(s,o){if(!s)return null;const u=o?rn:ws;return()=>("function"==typeof s?s():s).map(c=>u(c)).filter(pe)}const Er=0,Ke=1,jt=2,xn=3,pn=4,Vs=5,Ir=6,Es=7,$n=8,Pa=9,Is=10,$t=11,xu=12,Ti=13,Oa=14,Us=15,or=16,ho=17,fo=18,Si=19,Go=20,Ur=21,Cn=22,Fl=1,ka=2,zo=7,Bs=8,po=9,Nr=10;function Qr(s){return Array.isArray(s)&&"object"==typeof s[Fl]}function ji(s){return Array.isArray(s)&&!0===s[Fl]}function go(s){return 0!=(4&s.flags)}function Mu(s){return s.componentOffset>-1}function Fa(s){return 1==(1&s.flags)}function Br(s){return!!s.template}function js(s){return 0!=(256&s[jt])}function Cs(s,o){return s.hasOwnProperty(Zt)?s[Zt]:null}class fd{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function pd(){return Ru}function Ru(s){return s.type.prototype.ngOnChanges&&(s.setInput=Hs),_f}function _f(){const s=Nu(this),o=s?.current;if(o){const u=s.previous;if(u===N)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Hs(s,o,u,c){const d=this.declaredInputs[u],g=Nu(s)||function vf(s,o){return s[Ll]=o}(s,{previous:N,current:null}),_=g.current||(g.current={}),C=g.previous,b=C[d];_[d]=new fd(b&&b.currentValue,o,C===N),s[c]=o}pd.ngInherit=!0;const Ll="__ngSimpleChanges__";function Nu(s){return s[Ll]||null}const On=function(s,o,u){};function ar(s){for(;Array.isArray(s);)s=s[Er];return s}function vo(s,o){return ar(o[s])}function Pr(s,o){return ar(o[s.index])}function Ou(s,o){return s.data[o]}function Jr(s,o){return s[o]}function Cr(s,o){const u=o[s];return Qr(u)?u:u[Er]}function Gs(s){return 64==(64&s[jt])}function Ds(s,o){return null==o?null:s[o]}function Ba(s){s[fo]=0}function Yo(s,o){s[Vs]+=o;let u=s,c=s[xn];for(;null!==c&&(1===o&&1===u[Vs]||-1===o&&0===u[Vs]);)c[Vs]+=o,u=c,c=c[xn]}const Rt={lFrame:Ha(null),bindingsEnabled:!0};function md(){return Rt.bindingsEnabled}function ge(){return Rt.lFrame.lView}function Lt(){return Rt.lFrame.tView}function jl(s){return Rt.lFrame.contextLView=s,s[$n]}function ja(s){return Rt.lFrame.contextLView=null,s}function Kn(){let s=_d();for(;null!==s&&64===s.type;)s=s.parent;return s}function _d(){return Rt.lFrame.currentTNode}function xi(s,o){const u=Rt.lFrame;u.currentTNode=s,u.isParent=o}function Fu(){return Rt.lFrame.isParent}function Or(){const s=Rt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function bs(){return Rt.lFrame.bindingIndex++}function Id(s,o){const u=Rt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Yn(o)}function Yn(s){Rt.lFrame.currentDirectiveIndex=s}function $a(){return Rt.lFrame.currentQueryIndex}function Cd(s){Rt.lFrame.currentQueryIndex=s}function Vu(s){const o=s[Ke];return 2===o.type?o.declTNode:1===o.type?s[Ir]:null}function Dd(s,o,u){if(u&dt.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||u&dt.Host||(d=Vu(g),null===d||(g=g[Us],10&d.type))););if(null===d)return!1;o=d,s=g}const c=Rt.lFrame=$l();return c.currentTNode=o,c.lView=s,!0}function Xo(s){const o=$l(),u=s[Ke];Rt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function $l(){const s=Rt.lFrame,o=null===s?null:s.child;return null===o?Ha(s):o}function Ha(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Hl(){const s=Rt.lFrame;return Rt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Uu=Hl;function bd(){const s=Hl();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function jr(){return Rt.lFrame.selectedIndex}function is(s){Rt.lFrame.selectedIndex=s}function Mn(){const s=Rt.lFrame;return Ou(s.tView,s.selectedIndex)}function Bu(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:C,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:R}=g;_&&(s.contentHooks??(s.contentHooks=[])).push(-u,_),C&&((s.contentHooks??(s.contentHooks=[])).push(u,C),(s.contentCheckHooks??(s.contentCheckHooks=[])).push(u,C)),b&&(s.viewHooks??(s.viewHooks=[])).push(-u,b),A&&((s.viewHooks??(s.viewHooks=[])).push(u,A),(s.viewCheckHooks??(s.viewCheckHooks=[])).push(u,A)),null!=R&&(s.destroyHooks??(s.destroyHooks=[])).push(u,R)}}function Wl(s,o,u){ju(s,o,3,u)}function xd(s,o,u,c){(3&s[jt])===u&&ju(s,o,u,c)}function Md(s,o){let u=s[jt];(3&u)===o&&(u&=2047,u+=1,s[jt]=u)}function ju(s,o,u,c){const g=c??-1,_=o.length-1;let C=0;for(let b=void 0!==c?65535&s[fo]:0;b<_;b++)if("number"==typeof o[b+1]){if(C=o[b],null!=c&&C>=c)break}else o[b]<0&&(s[fo]+=65536),(C<g||-1==g)&&(ta(s,u,o,b),s[fo]=(4294901760&s[fo])+b+2),b++}function ta(s,o,u,c){const d=u[c]<0,g=u[c+1],C=s[d?-u[c]:u[c]];if(d){if(s[jt]>>11<s[fo]>>16&&(3&s[jt])===o){s[jt]+=2048,On(4,C,g);try{g.call(C)}finally{On(5,C,g)}}}else{On(4,C,g);try{g.call(C)}finally{On(5,C,g)}}}const Ga=-1;class Ts{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function na(s,o,u){let c=0;for(;c<u.length;){const d=u[c];if("number"==typeof d){if(0!==d)break;c++;const g=u[c++],_=u[c++],C=u[c++];s.setAttribute(o,_,C,g)}else{const g=d,_=u[++c];qs(g)?s.setProperty(o,g,_):s.setAttribute(o,g,_),c++}}return c}function Nd(s){return 3===s||4===s||6===s}function qs(s){return 64===s.charCodeAt(0)}function Eo(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||ra(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function ra(s,o,u,c,d){let g=0,_=s.length;if(-1===o)_=-1;else for(;g<s.length;){const C=s[g++];if("number"==typeof C){if(C===o){_=-1;break}if(C>o){_=g-1;break}}}for(;g<s.length;){const C=s[g];if("number"==typeof C)break;if(C===u){if(null===c)return void(null!==d&&(s[g+1]=d));if(c===s[g+1])return void(s[g+2]=d)}g++,null!==c&&g++,null!==d&&g++}-1!==_&&(s.splice(_,0,o),g=_+1),s.splice(g++,0,u),null!==c&&s.splice(g++,0,c),null!==d&&s.splice(g++,0,d)}function Io(s){return s!==Ga}function ia(s){return 32767&s}function qa(s,o){let u=function Wa(s){return s>>16}(s),c=o;for(;u>0;)c=c[Us],u--;return c}let Zl=!0;function Za(s){const o=Zl;return Zl=s,o}const Kl=255,Gu=5;let Yl=0;const ui={};function Ql(s,o){const u=Od(s,o);if(-1!==u)return u;const c=o[Ke];c.firstCreatePass&&(s.injectorIndex=o.length,ss(c.data,s),ss(o,null),ss(c.blueprint,null));const d=Qn(s,o),g=s.injectorIndex;if(Io(d)){const _=ia(d),C=qa(d,o),b=C[Ke].data;for(let A=0;A<8;A++)o[g+A]=C[_+A]|b[_+A]}return o[g+8]=d,g}function ss(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Od(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Qn(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){if(c=Co(d),null===c)return Ga;if(u++,d=d[Us],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return Ga}function Zs(s,o,u){!function Pd(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(xt)&&(c=u[xt]),null==c&&(c=u[xt]=Yl++);const d=c&Kl;o.data[s+(d>>Gu)]|=1<<d}(s,o,u)}function kd(s,o,u){if(u&dt.Optional||void 0!==s)return s;He()}function Ka(s,o,u,c){if(u&dt.Optional&&void 0===c&&(c=null),!(u&(dt.Self|dt.Host))){const d=s[Pa],g=zn(void 0);try{return d?d.get(o,c,u&dt.Optional):Fr(o,c,u&dt.Optional)}finally{zn(g)}}return kd(c,0,u)}function Fd(s,o,u,c=dt.Default,d){if(null!==s){if(1024&o[jt]){const _=function bf(s,o,u,c,d){let g=s,_=o;for(;null!==g&&null!==_&&1024&_[jt]&&!(256&_[jt]);){const C=Wu(g,_,u,c|dt.Self,ui);if(C!==ui)return C;let b=g.parent;if(!b){const A=_[Ur];if(A){const R=A.get(u,ui,c);if(R!==ui)return R}b=Co(_),_=_[Us]}g=b}return d}(s,o,u,c,ui);if(_!==ui)return _}const g=Wu(s,o,u,c,ui);if(g!==ui)return g}return Ka(o,u,c,d)}function Wu(s,o,u,c,d){const g=function Df(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(xt)?s[xt]:void 0;return"number"==typeof o?o>=0?o&Kl:Jl:o}(u);if("function"==typeof g){if(!Dd(o,s,c))return c&dt.Host?kd(d,0,c):Ka(o,u,c,d);try{const _=g(c);if(null!=_||c&dt.Optional)return _;He()}finally{Uu()}}else if("number"==typeof g){let _=null,C=Od(s,o),b=Ga,A=c&dt.Host?o[or][Ir]:null;for((-1===C||c&dt.SkipSelf)&&(b=-1===C?Qn(s,o):o[C+8],b!==Ga&&qu(c,!1)?(_=o[Ke],C=ia(b),o=qa(b,o)):C=-1);-1!==C;){const R=o[Ke];if(Ks(g,C,R.data)){const B=ur(C,o,u,_,c,A);if(B!==ui)return B}b=o[C+8],b!==Ga&&qu(c,o[Ke].data[C+8]===A)&&Ks(g,C,o)?(_=R,C=ia(b),o=qa(b,o)):C=-1}}return d}function ur(s,o,u,c,d,g){const _=o[Ke],C=_.data[s+8],R=sa(C,_,u,null==c?Mu(C)&&Zl:c!=_&&0!=(3&C.type),d&dt.Host&&g===C);return null!==R?kn(o,_,R,C):ui}function sa(s,o,u,c,d){const g=s.providerIndexes,_=o.data,C=1048575&g,b=s.directiveStart,R=g>>20,K=d?C+R:s.directiveEnd;for(let ne=c?C:C+R;ne<K;ne++){const Ee=_[ne];if(ne<b&&u===Ee||ne>=b&&Ee.type===u)return ne}if(d){const ne=_[b];if(ne&&Br(ne)&&ne.type===u)return b}return null}function kn(s,o,u,c){let d=s[u];const g=o.data;if(function jg(s){return s instanceof Ts}(d)){const _=d;_.resolving&&function Se(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new _e(-200,`Circular dependency in DI detected for ${s}${u}`)}(function je(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ke(s)}(g[u]));const C=Za(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?zn(_.injectImpl):null;Dd(s,c,dt.Default);try{d=s[u]=_.factory(void 0,g,s,c),o.firstCreatePass&&u>=c.directiveStart&&function Bg(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(c){const _=Ru(o);(u.preOrderHooks??(u.preOrderHooks=[])).push(s,_),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(s,_)}d&&(u.preOrderHooks??(u.preOrderHooks=[])).push(0-s,d),g&&((u.preOrderHooks??(u.preOrderHooks=[])).push(s,g),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(s,g))}(u,g[u],o)}finally{null!==b&&zn(b),Za(C),_.resolving=!1,Uu()}}return d}function Ks(s,o,u){return!!(u[o+(s>>Gu)]&1<<s)}function qu(s,o){return!(s&dt.Self||s&dt.Host&&o)}class oa{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Fd(this._tNode,this._lView,o,Rr(c),u)}}function Jl(){return new oa(Kn(),ge())}function Xl(s){return j(()=>{const o=s.prototype.constructor,u=o[Zt]||Ys(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const g=d[Zt]||Ys(d);if(g&&g!==u)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Ys(s){return $e(s)?()=>{const o=Ys(Q(s));return o&&o()}:Cs(s)}function Co(s){const o=s[Ke],u=o.type;return 2===u?o.declTNode:1===u?s[Ir]:null}function Ya(s){return function zu(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const g=u[d];if(Nd(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(g===o)return u[d+1];d+=2}}}return null}(Kn(),s)}const aa="__parameters__";function bo(s,o,u){return j(()=>{const c=function Ld(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...g){if(this instanceof d)return c.apply(this,g),this;const _=new d(...g);return C.annotation=_,C;function C(b,A,R){const B=b.hasOwnProperty(aa)?b[aa]:Object.defineProperty(b,aa,{value:[]})[aa];for(;B.length<=R;)B.push(null);return(B[R]=B[R]||[]).push(_),b}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class an{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=st({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Qs(s,o){s.forEach(u=>Array.isArray(u)?Qs(u,o):o(u))}function sc(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Qa(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Mi(s,o,u){let c=$i(s,o);return c>=0?s[1|c]=u:(c=~c,function Qu(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function gn(s,o){const u=$i(s,o);if(u>=0)return s[1|u]}function $i(s,o){return function Hi(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const g=c+(d-c>>1),_=s[g<<u];if(o===_)return g<<u;_>o?d=g:c=g+1}return~(d<<u)}(s,o,1)}const So=Kr(bo("Optional"),8),gt=Kr(bo("SkipSelf"),4);var Tt=(()=>((Tt=Tt||{})[Tt.Important=1]="Important",Tt[Tt.DashCase=2]="DashCase",Tt))();const zd=new Map;let zi=0;const J="__ngContext__";function se(s,o){Qr(o)?(s[J]=o[Go],function qd(s){zd.set(s[Go],s)}(o)):s[J]=o}let as;function us(s,o){return as(s,o)}function Kd(s){const o=s[xn];return ji(o)?o[xn]:o}function uu(s){return Of(s[Ti])}function lu(s){return Of(s[pn])}function Of(s){for(;null!==s&&!ji(s);)s=s[pn];return s}function fa(s,o,u,c,d){if(null!=c){let g,_=!1;ji(c)?g=c:Qr(c)&&(_=!0,c=c[Er]);const C=ar(c);0===s&&null!==u?null==d?di(o,u,C):Gt(o,u,C,d||null,!0):1===s&&null!==u?Gt(o,u,C,d||null,!0):2===s?function i_(s,o,u){const c=As(s,o);c&&function pa(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,C,_):3===s&&o.destroyNode(C),null!=g&&function jf(s,o,u,c,d){const g=u[zo];g!==ar(u)&&fa(o,s,c,g,d);for(let C=Nr;C<u.length;C++){const b=u[C];Bf(b[Ke],b,s,o,c,g)}}(o,s,g,u,d)}}function Ff(s,o,u){return s.createElement(o,u)}function I(s,o){const u=s[po],c=u.indexOf(o),d=o[xn];512&o[jt]&&(o[jt]&=-513,Yo(d,-1)),u.splice(c,1)}function M(s,o){if(s.length<=Nr)return;const u=Nr+o,c=s[u];if(c){const d=c[ho];null!==d&&d!==s&&I(d,c),o>0&&(s[u-1][pn]=c[pn]);const g=Qa(s,Nr+o);!function Hg(s,o){Bf(s,o,o[$t],2,null,null),o[Er]=null,o[Ir]=null}(c[Ke],c);const _=g[Si];null!==_&&_.detachView(g[Ke]),c[xn]=null,c[pn]=null,c[jt]&=-65}return c}function P(s,o){if(!(128&o[jt])){const u=o[$t];u.destroyNode&&Bf(s,o,u,3,null,null),function v(s){let o=s[Ti];if(!o)return Y(s[Ke],s);for(;o;){let u=null;if(Qr(o))u=o[Ti];else{const c=o[Nr];c&&(u=c)}if(!u){for(;o&&!o[pn]&&o!==s;)Qr(o)&&Y(o[Ke],o),o=o[xn];null===o&&(o=s),Qr(o)&&Y(o[Ke],o),u=o&&o[pn]}o=u}}(o)}}function Y(s,o){if(!(128&o[jt])){o[jt]&=-65,o[jt]|=128,function Be(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof Ts)){const g=u[c+1];if(Array.isArray(g))for(let _=0;_<g.length;_+=2){const C=d[g[_]],b=g[_+1];On(4,C,b);try{b.call(C)}finally{On(5,C,b)}}else{On(4,d,g);try{g.call(d)}finally{On(5,d,g)}}}}}(s,o),function de(s,o){const u=s.cleanup,c=o[Es];let d=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const _=u[g+3];_>=0?c[d=_]():c[d=-_].unsubscribe(),g+=2}else{const _=c[d=u[g+1]];u[g].call(_)}if(null!==c){for(let g=d+1;g<c.length;g++)(0,c[g])();o[Es]=null}}(s,o),1===o[Ke].type&&o[$t].destroy();const u=o[ho];if(null!==u&&ji(o[xn])){u!==o[xn]&&I(u,o);const c=o[Si];null!==c&&c.detachView(s)}!function E(s){zd.delete(s[Go])}(o)}}function Ze(s,o,u){return function yt(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[Er];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:g}=s.data[c.directiveStart+d];if(g===L.None||g===L.Emulated)return null}return Pr(c,u)}}(s,o.parent,u)}function Gt(s,o,u,c,d){s.insertBefore(o,u,c,d)}function di(s,o,u){s.appendChild(o,u)}function Ro(s,o,u,c,d){null!==c?Gt(s,o,u,c,d):di(s,o,u)}function As(s,o){return s.parentNode(o)}let Qd,_c,a_,Gg,ga=function yc(s,o,u){return 40&s.type?Pr(s,u):null};function ol(s,o,u,c){const d=Ze(s,c,o),g=o[$t],C=function Yd(s,o,u){return ga(s,o,u)}(c.parent||o[Ir],c,o);if(null!=d)if(Array.isArray(u))for(let b=0;b<u.length;b++)Ro(g,d,u[b],C,!1);else Ro(g,d,u,C,!1);void 0!==Qd&&Qd(g,c,o,u,d)}function Xd(s,o){if(null!==o){const u=o.type;if(3&u)return Pr(o,s);if(4&u)return ma(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Xd(s,c);{const d=s[o.index];return ji(d)?ma(-1,d):ar(d)}}if(32&u)return us(o,s)()||ar(s[o.index]);{const c=al(s,o);return null!==c?Array.isArray(c)?c[0]:Xd(Kd(s[or]),c):Xd(s,o.next)}}return null}function al(s,o){return null!==o?s[or][Ir].projection[o.projection]:null}function ma(s,o){const u=Nr+s+1;if(u<o.length){const c=o[u],d=c[Ke].firstChild;if(null!==d)return Xd(c,d)}return o[zo]}function Uf(s,o,u,c,d,g,_){for(;null!=u;){const C=c[u.index],b=u.type;if(_&&0===o&&(C&&se(ar(C),c),u.flags|=2),32!=(32&u.flags))if(8&b)Uf(s,o,u.child,c,d,g,!1),fa(o,s,d,C,g);else if(32&b){const A=us(u,c);let R;for(;R=A();)fa(o,s,d,R,g);fa(o,s,d,C,g)}else 16&b?s_(s,o,c,u,d,g):fa(o,s,d,C,g);u=_?u.projectionNext:u.next}}function Bf(s,o,u,c,d,g){Uf(u,c,s.firstChild,o,d,g,!1)}function s_(s,o,u,c,d,g){const _=u[or],b=_[Ir].projection[c.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)fa(o,s,d,b[A],g);else Uf(s,o,b,_[xn],d,g,!0)}function ul(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function $f(s,o,u){const{mergedAttrs:c,classes:d,styles:g}=u;null!==c&&na(s,o,c),null!==d&&ul(s,o,d),null!==g&&function o_(s,o,u){s.setAttribute(o,"style",u)}(s,o,g)}function eh(s){return function Hf(){if(void 0===_c&&(_c=null,dn.trustedTypes))try{_c=dn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return _c}()?.createHTML(s)||s}function Vb(s){a_=s}function u_(){if(void 0===Gg&&(Gg=null,dn.trustedTypes))try{Gg=dn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Gg}function G0(s){return u_()?.createHTML(s)||s}function z0(s){return u_()?.createScriptURL(s)||s}class W0{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rt})`}}function _a(s){return s instanceof W0?s.changingThisBreaksApplicationSecurity:s}function xs(s,o){const u=function th(s){return s instanceof W0&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${rt})`)}return u===o}class zg{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const u=(new window.DOMParser).parseFromString(eh(o),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(o):(u.removeChild(u.firstChild),u)}catch{return null}}}class K0{constructor(o){this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(o){const u=this.inertDocument.createElement("template");return u.innerHTML=eh(o),u}}const Y0=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Gf(s){return(s=String(s)).match(Y0)?s:"unsafe:"+s}function No(s){const o={};for(const u of s.split(","))o[u]=!0;return o}function zf(...s){const o={};for(const u of s)for(const c in u)u.hasOwnProperty(c)&&(o[c]=!0);return o}const nh=No("area,br,col,hr,img,wbr"),Q0=No("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),J0=No("rp,rt"),Wg=zf(nh,zf(Q0,No("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),zf(J0,No("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),zf(J0,Q0)),qg=No("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Wf=zf(qg,No("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),No("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),h_=No("script,style,template");class qb{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let u=o.firstChild,c=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?c=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,c&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let d=this.checkClobberedElement(u,u.nextSibling);if(d){u=d;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(o){const u=o.nodeName.toLowerCase();if(!Wg.hasOwnProperty(u))return this.sanitizedSomething=!0,!h_.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const c=o.attributes;for(let d=0;d<c.length;d++){const g=c.item(d),_=g.name,C=_.toLowerCase();if(!Wf.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let b=g.value;qg[C]&&(b=Gf(b)),this.buf.push(" ",_,'="',p_(b),'"')}return this.buf.push(">"),!0}endElement(o){const u=o.nodeName.toLowerCase();Wg.hasOwnProperty(u)&&!nh.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(o){this.buf.push(p_(o))}checkClobberedElement(o,u){if(u&&(o.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return u}}const Zb=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f_=/([^\#-~ |!])/g;function p_(s){return s.replace(/&/g,"&amp;").replace(Zb,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(f_,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let g_;function eE(s){return"content"in s&&function wN(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Tr=(()=>((Tr=Tr||{})[Tr.NONE=0]="NONE",Tr[Tr.HTML=1]="HTML",Tr[Tr.STYLE=2]="STYLE",Tr[Tr.SCRIPT=3]="SCRIPT",Tr[Tr.URL=4]="URL",Tr[Tr.RESOURCE_URL=5]="RESOURCE_URL",Tr))();function tE(s){const o=Zf();return o?G0(o.sanitize(Tr.HTML,s)||""):xs(s,"HTML")?G0(_a(s)):function vN(s,o){let u=null;try{g_=g_||function Z0(s){const o=new K0(s);return function d_(){try{return!!(new window.DOMParser).parseFromString(eh(""),"text/html")}catch{return!1}}()?new zg(o):o}(s);let c=o?String(o):"";u=g_.getInertBodyElement(c);let d=5,g=c;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,c=g,g=u.innerHTML,u=g_.getInertBodyElement(c)}while(c!==g);return eh((new qb).sanitizeChildren(eE(u)||u))}finally{if(u){const c=eE(u)||u;for(;c.firstChild;)c.removeChild(c.firstChild)}}}(function H0(){return void 0!==a_?a_:typeof document<"u"?document:void 0}(),ke(s))}function m_(s){const o=Zf();return o?o.sanitize(Tr.URL,s)||"":xs(s,"URL")?_a(s):Gf(ke(s))}function Kg(s){const o=Zf();if(o)return z0(o.sanitize(Tr.RESOURCE_URL,s)||"");if(xs(s,"ResourceURL"))return z0(_a(s));throw new _e(904,!1)}function rE(s,o,u){return function Yb(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?Kg:m_}(o,u)(s)}function Zf(){const s=ge();return s&&s[xu]}const __=new an("ENVIRONMENT_INITIALIZER"),wc=new an("INJECTOR",-1),rh=new an("INJECTOR_DEF_TYPES");class iE{get(o,u=Wn){if(u===Wn){const c=new Error(`NullInjectorError: No provider for ${ye(o)}!`);throw c.name="NullInjectorError",c}return u}}function Kf(...s){return{\u0275providers:ih(0,s),\u0275fromNgModule:!0}}function ih(s,...o){const u=[],c=new Set;let d;return Qs(o,g=>{const _=g;v_(_,u,[],c)&&(d||(d=[]),d.push(_))}),void 0!==d&&sE(d,u),u}function sE(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];w_(d,g=>{o.push(g)})}}function v_(s,o,u,c){if(!(s=Q(s)))return!1;let d=null,g=An(s);const _=!g&&pt(s);if(g||_){if(_&&!_.standalone)return!1;d=s}else{const b=s.ngModule;if(g=An(b),!g)return!1;d=b}const C=c.has(d);if(_){if(C)return!1;if(c.add(d),_.dependencies){const b="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const A of b)v_(A,o,u,c)}}else{if(!g)return!1;{if(null!=g.imports&&!C){let A;c.add(d);try{Qs(g.imports,R=>{v_(R,o,u,c)&&(A||(A=[]),A.push(R))})}finally{}void 0!==A&&sE(A,o)}if(!C){const A=Cs(d)||(()=>new d);o.push({provide:d,useFactory:A,deps:Z},{provide:rh,useValue:d,multi:!0},{provide:__,useValue:()=>Vt(d),multi:!0})}const b=g.providers;null==b||C||w_(b,R=>{o.push(R)})}}return d!==s&&void 0!==s.providers}function w_(s,o){for(let u of s)Ae(u)&&(u=u.\u0275providers),Array.isArray(u)?w_(u,o):o(u)}const Jb=le({provide:String,useValue:le});function E_(s){return null!==s&&"object"==typeof s&&Jb in s}function cu(s){return"function"==typeof s}const ll=new an("Set Injector scope."),Qg={},eT={};let I_;function Jg(){return void 0===I_&&(I_=new iE),I_}class Ec{}class aE extends Ec{get destroyed(){return this._destroyed}constructor(o,u,c,d){super(),this.parent=u,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,oh(o,_=>this.processProvider(_)),this.records.set(wc,sh(void 0,this)),d.has("environment")&&this.records.set(Ec,sh(void 0,this));const g=this.records.get(ll);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(rh.multi,Z,dt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=Yt(this),c=zn(void 0);try{return o()}finally{Yt(u),zn(c)}}get(o,u=Wn,c=dt.Default){this.assertNotDestroyed(),c=Rr(c);const d=Yt(this),g=zn(void 0);try{if(!(c&dt.SkipSelf)){let C=this.records.get(o);if(void 0===C){const b=function T_(s){return"function"==typeof s||"object"==typeof s&&s instanceof an}(o)&&tn(o);C=b&&this.injectableDefInScope(b)?sh(C_(o),Qg):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(c&dt.Self?Jg():this.parent).get(o,u=c&dt.Optional&&u===Wn?null:u)}catch(_){if("NullInjectorError"===_.name){if((_[Bn]=_[Bn]||[]).unshift(ye(o)),d)throw _;return function Yr(s,o,u,c){const d=s[Bn];throw o[Kt]&&d.unshift(o[Kt]),s.message=function G(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==_r?s.slice(2):s;let d=ye(o);if(Array.isArray(o))d=o.map(ye).join(" -> ");else if("object"==typeof o){let g=[];for(let _ in o)if(o.hasOwnProperty(_)){let C=o[_];g.push(_+":"+("string"==typeof C?JSON.stringify(C):ye(C)))}d=`{${g.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(jn,"\n  ")}`}("\n"+s.message,d,u,c),s[Zr]=d,s[Bn]=null,s}(_,o,"R3InjectorError",this.source)}throw _}finally{zn(g),Yt(d)}}resolveInjectorInitializers(){const o=Yt(this),u=zn(void 0);try{const c=this.get(__.multi,Z,dt.Self);for(const d of c)d()}finally{Yt(o),zn(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(ye(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(o){let u=cu(o=Q(o))?o:Q(o&&o.provide);const c=function nT(s){return E_(s)?sh(void 0,s.useValue):sh(D_(s),Qg)}(o);if(cu(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=sh(void 0,Qg,!0),d.factory=()=>Zn(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===Qg&&(u.value=eT,u.value=u.factory()),"object"==typeof u.value&&u.value&&function uE(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Q(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function C_(s){const o=tn(s),u=null!==o?o.factory:Cs(s);if(null!==u)return u;if(s instanceof an)throw new _e(204,!1);if(s instanceof Function)return function tT(s){const o=s.length;if(o>0)throw function ua(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new _e(204,!1);const u=function tr(s){return s&&(s[Nn]||s[gi])||null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new _e(204,!1)}function D_(s,o,u){let c;if(cu(s)){const d=Q(s);return Cs(d)||C_(d)}if(E_(s))c=()=>Q(s.useValue);else if(function oE(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Zn(s.deps||[]));else if(function Xb(s){return!(!s||!s.useExisting)}(s))c=()=>Vt(Q(s.useExisting));else{const d=Q(s&&(s.useClass||s.provide));if(!function b_(s){return!!s.deps}(s))return Cs(d)||C_(d);c=()=>new d(...Zn(s.deps))}return c}function sh(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function oh(s,o){for(const u of s)Array.isArray(u)?oh(u,o):u&&Ae(u)?oh(u.\u0275providers,o):o(u)}class rT{}class lE{}class dE{resolveComponentFactory(o){throw function iT(s){const o=Error(`No component factory found for ${ye(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let ah=(()=>{class s{}return s.NULL=new dE,s})();function Xg(){return du(Kn(),ge())}function du(s,o){return new uh(Pr(s,o))}let uh=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=Xg,s})();function Yf(s){return s instanceof uh?s.nativeElement:s}class A_{}let sT=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function oT(){const s=ge(),u=Cr(Kn().index,s);return(Qr(u)?u:s)[$t]}(),s})(),aT=(()=>{class s{}return s.\u0275prov=st({token:s,providedIn:"root",factory:()=>null}),s})();class hE{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const fE=new hE("15.2.9"),em={},x_="ngOriginalError";function M_(s){return s[x_]}class Qf{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&M_(o);for(;u&&M_(u);)u=M_(u);return u||null}}function va(s){return s instanceof Function?s():s}function vE(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===c||s.charCodeAt(d+g)<=32)return d}u=d+1}}const R_="ng-template";function N_(s,o,u){let c=0,d=!0;for(;c<s.length;){let g=s[c++];if("string"==typeof g&&d){const _=s[c++];if(u&&"class"===g&&-1!==vE(_.toLowerCase(),o,0))return!0}else{if(1===g){for(;c<s.length&&"string"==typeof(g=s[c++]);)if(g.toLowerCase()===o)return!0;return!1}"number"==typeof g&&(d=!1)}}return!1}function P_(s){return 4===s.type&&s.value!==R_}function lh(s,o,u){return o===(4!==s.type||u?s.value:R_)}function O_(s,o,u){let c=4;const d=s.attrs||[],g=function EE(s){for(let o=0;o<s.length;o++)if(Nd(s[o]))return o;return s.length}(d);let _=!1;for(let C=0;C<o.length;C++){const b=o[C];if("number"!=typeof b){if(!_)if(4&c){if(c=2|1&c,""!==b&&!lh(s,b,u)||""===b&&1===o.length){if(Po(c))return!1;_=!0}}else{const A=8&c?b:o[++C];if(8&c&&null!==s.attrs){if(!N_(s.attrs,A,u)){if(Po(c))return!1;_=!0}continue}const B=wE(8&c?"class":b,d,P_(s),u);if(-1===B){if(Po(c))return!1;_=!0;continue}if(""!==A){let K;K=B>g?"":d[B+1].toLowerCase();const ne=8&c?K:null;if(ne&&-1!==vE(ne,A,0)||2&c&&A!==K){if(Po(c))return!1;_=!0}}}}else{if(!_&&!Po(c)&&!Po(b))return!1;if(_&&Po(b))continue;_=!1,c=b|1&c}}return Po(c)||_}function Po(s){return 0==(1&s)}function wE(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let g=!1;for(;d<o.length;){const _=o[d];if(_===s)return d;if(3===_||6===_)g=!0;else{if(1===_||2===_){let C=o[++d];for(;"string"==typeof C;)C=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=g?1:2}return-1}return function IE(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function Xf(s,o,u=!1){for(let c=0;c<o.length;c++)if(O_(s,o[c],u))return!0;return!1}function CE(s,o){return s?":not("+o.trim()+")":o}function gT(s){let o=s[0],u=1,c=2,d="",g=!1;for(;u<s.length;){let _=s[u];if("string"==typeof _)if(2&c){const C=s[++u];d+="["+_+(C.length>0?'="'+C+'"':"")+"]"}else 8&c?d+="."+_:4&c&&(d+=" "+_);else""!==d&&!Po(_)&&(o+=CE(g,d),d=""),c=_,g=g||!Po(c);u++}return""!==d&&(o+=CE(g,d)),o}const Bt={};function DE(s){bE(Lt(),ge(),jr()+s,!1)}function bE(s,o,u,c){if(!c)if(3==(3&o[jt])){const g=s.preOrderCheckHooks;null!==g&&Wl(o,g,u)}else{const g=s.preOrderHooks;null!==g&&xd(o,g,0,u)}is(u)}function SE(s,o=null,u=null,c){const d=k_(s,o,u,c);return d.resolveInjectorInitializers(),d}function k_(s,o=null,u=null,c,d=new Set){const g=[u||Z,Kf(s)];return c=c||("object"==typeof s?void 0:ye(s)),new aE(g,o||Jg(),c||null,d)}let ch=(()=>{class s{static create(u,c){if(Array.isArray(u))return SE({name:""},c,u,"");{const d=u.name??"";return SE({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=Wn,s.NULL=new iE,s.\u0275prov=st({token:s,providedIn:"any",factory:()=>Vt(wc)}),s.__NG_ELEMENT_ID__=-1,s})();function fh(s,o=dt.Default){const u=ge();return null===u?Vt(s,o):Fd(Kn(),u,Q(s),o)}function NE(){throw new Error("invalid")}function PE(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const g=u[c+1];if(-1!==g){const _=s.data[g];Cd(u[c]),_.contentQueries(2,o[g],g)}}}function im(s,o,u,c,d,g,_,C,b,A,R){const B=o.blueprint.slice();return B[Er]=d,B[jt]=76|c,(null!==R||s&&1024&s[jt])&&(B[jt]|=1024),Ba(B),B[xn]=B[Us]=s,B[$n]=u,B[Is]=_||s&&s[Is],B[$t]=C||s&&s[$t],B[xu]=b||s&&s[xu]||null,B[Pa]=A||s&&s[Pa]||null,B[Ir]=g,B[Go]=function Wd(){return zi++}(),B[Ur]=R,B[or]=2==o.type?s[or]:B,B}function ip(s,o,u,c,d){let g=s.data[o];if(null===g)g=function sm(s,o,u,c,d){const g=_d(),_=Fu(),b=s.data[o]=function FE(s,o,u,c,d,g){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?g:g&&g.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=b),null!==g&&(_?null==g.child&&null!==b.parent&&(g.child=b):null===g.next&&(g.next=b,b.prev=g)),b}(s,o,u,c,d),function Ed(){return Rt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=u,g.value=c,g.attrs=d;const _=function Qo(){const s=Rt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===_?-1:_.injectorIndex}return xi(g,!0),g}function om(s,o,u,c){if(0===u)return-1;const d=o.length;for(let g=0;g<u;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function X(s,o,u){Xo(o);try{const c=s.viewQuery;null!==c&&G_(1,c,u);const d=s.template;null!==d&&Oo(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&PE(s,o),s.staticViewQueries&&G_(2,s.viewQuery,u);const g=s.components;null!==g&&function OE(s,o){for(let u=0;u<o.length;u++)$T(s,o[u])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[jt]&=-5,bd()}}function cs(s,o,u,c){const d=o[jt];if(128!=(128&d)){Xo(o);try{Ba(o),function Ws(s){return Rt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Oo(s,o,u,2,c);const _=3==(3&d);if(_){const A=s.preOrderCheckHooks;null!==A&&Wl(o,A,null)}else{const A=s.preOrderHooks;null!==A&&xd(o,A,0,null),Md(o,0)}if(function BT(s){for(let o=uu(s);null!==o;o=lu(o)){if(!o[ka])continue;const u=o[po];for(let c=0;c<u.length;c++){const d=u[c];512&d[jt]||Yo(d[xn],1),d[jt]|=512}}}(o),function UT(s){for(let o=uu(s);null!==o;o=lu(o))for(let u=Nr;u<o.length;u++){const c=o[u],d=c[Ke];Gs(c)&&cs(d,c,d.template,c[$n])}}(o),null!==s.contentQueries&&PE(s,o),_){const A=s.contentCheckHooks;null!==A&&Wl(o,A)}else{const A=s.contentHooks;null!==A&&xd(o,A,1),Md(o,1)}!function NT(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)is(~d);else{const g=d,_=u[++c],C=u[++c];Id(_,g),C(2,o[g])}}}finally{is(-1)}}(s,o);const C=s.components;null!==C&&function PT(s,o){for(let u=0;u<o.length;u++)jT(s,o[u])}(o,C);const b=s.viewQuery;if(null!==b&&G_(2,b,c),_){const A=s.viewCheckHooks;null!==A&&Wl(o,A)}else{const A=s.viewHooks;null!==A&&xd(o,A,2),Md(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[jt]&=-41,512&o[jt]&&(o[jt]&=-513,Yo(o[xn],-1))}finally{bd()}}}function Oo(s,o,u,c,d){const g=jr(),_=2&c;try{is(-1),_&&o.length>Cn&&bE(s,o,Cn,!1),On(_?2:0,d),u(c,d)}finally{is(g),On(_?3:1,d)}}function Cc(s,o,u){if(go(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const _=s.data[g];_.contentQueries&&_.contentQueries(1,u[g],g)}}}function Ie(s,o,u){md()&&(function wa(s,o,u,c){const d=u.directiveStart,g=u.directiveEnd;Mu(u)&&function up(s,o,u){const c=Pr(o,s),d=B_(u),g=s[Is],_=fu(s,im(s,d,null,u.onPush?32:16,c,o,g,g.createRenderer(c,u),null,null,null));s[o.index]=_}(o,u,s.data[d+u.componentOffset]),s.firstCreatePass||Ql(u,o),se(c,o);const _=u.initialInputs;for(let C=d;C<g;C++){const b=s.data[C],A=kn(o,s,C,u);se(A,o),null!==_&&hi(0,C-d,A,b,0,_),Br(b)&&(Cr(u.index,o)[$n]=kn(o,s,C,u))}}(s,o,u,Pr(u,o)),64==(64&u.flags)&&vi(s,o,u))}function am(s,o,u=Pr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let g=0;g<c.length;g+=2){const _=c[g+1],C=-1===_?u(o,s):s[_];s[d++]=C}}}function B_(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=sp(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function sp(s,o,u,c,d,g,_,C,b,A){const R=Cn+c,B=R+d,K=function OT(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Bt);return u}(R,B),ne="function"==typeof A?A():A;return K[Ke]={type:s,blueprint:K,template:u,queries:null,viewQuery:C,declTNode:o,data:K.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:ne,incompleteFirstPass:!1}}function kE(s,o,u,c){const d=lp(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&z_(s).push(c,d.length-1))}function cl(s,o,u,c){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const g=s[d];null===c?um(u,o,d,g):c.hasOwnProperty(d)&&um(u,o,c[d],g)}return u}function um(s,o,u,c){s.hasOwnProperty(u)?s[u].push(o,c):s[u]=[o,c]}function ds(s,o,u,c,d,g,_,C){const b=Pr(o,u);let R,A=o.inputs;!C&&null!=A&&(R=A[c])?(pm(s,u,R,c,d),Mu(o)&&function op(s,o){const u=Cr(o,s);16&u[jt]||(u[jt]|=32)}(u,o.index)):3&o.type&&(c=function LE(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=_?_(d,o.value||"",c):d,g.setProperty(b,c,d))}function lm(s,o,u,c){if(md()){const d=null===c?null:{"":-1},g=function cm(s,o){const u=s.directiveRegistry;let c=null,d=null;if(u)for(let g=0;g<u.length;g++){const _=u[g];if(Xf(o,_.selectors,!1))if(c||(c=[]),Br(_))if(null!==_.findHostDirectiveDefs){const C=[];d=d||new Map,_.findHostDirectiveDefs(_,C,d),c.unshift(...C,_),$_(s,o,C.length)}else c.unshift(_),$_(s,o,0);else d=d||new Map,_.findHostDirectiveDefs?.(_,c,d),c.push(_)}return null===c?null:[c,d]}(s,u);let _,C;null===g?_=C=null:[_,C]=g,null!==_&&ei(s,o,u,_,d,C),d&&function dl(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=u[o[d+1]];if(null==g)throw new _e(-301,!1);c.push(o[d],g)}}}(u,c,d)}u.mergedAttrs=Eo(u.mergedAttrs,u.attrs)}function ei(s,o,u,c,d,g){for(let A=0;A<c.length;A++)Zs(Ql(u,o),s,c[A].type);!function bc(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,c.length);for(let A=0;A<c.length;A++){const R=c[A];R.providersResolver&&R.providersResolver(R)}let _=!1,C=!1,b=om(s,o,c.length,null);for(let A=0;A<c.length;A++){const R=c[A];u.mergedAttrs=Eo(u.mergedAttrs,R.hostAttrs),VT(s,u,o,b,R),hu(b,R,d),null!==R.contentQueries&&(u.flags|=4),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(u.flags|=64);const B=R.type.prototype;!_&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((s.preOrderHooks??(s.preOrderHooks=[])).push(u.index),_=!0),!C&&(B.ngOnChanges||B.ngDoCheck)&&((s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(u.index),C=!0),b++}!function ph(s,o,u){const d=o.directiveEnd,g=s.data,_=o.attrs,C=[];let b=null,A=null;for(let R=o.directiveStart;R<d;R++){const B=g[R],K=u?u.get(B):null,Ee=K?K.outputs:null;b=cl(B.inputs,R,b,K?K.inputs:null),A=cl(B.outputs,R,A,Ee);const Ge=null===b||null===_||P_(o)?null:VE(b,R,_);C.push(Ge)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=8),b.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=C,o.inputs=b,o.outputs=A}(s,u,g)}function vi(s,o,u){const c=u.directiveStart,d=u.directiveEnd,g=u.index,_=function Vg(){return Rt.lFrame.currentDirectiveIndex}();try{is(g);for(let C=c;C<d;C++){const b=s.data[C],A=o[C];Yn(C),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&LT(b,A)}}finally{is(-1),Yn(_)}}function LT(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function $_(s,o,u){o.componentOffset=u,(s.components??(s.components=[])).push(o.index)}function hu(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Br(o)&&(u[""]=s)}}function VT(s,o,u,c,d){s.data[c]=d;const g=d.factory||(d.factory=Cs(d.type)),_=new Ts(g,Br(d),fh);s.blueprint[c]=_,u[c]=_,function ap(s,o,u,c,d){const g=d.hostBindings;if(g){let _=s.hostBindingOpCodes;null===_&&(_=s.hostBindingOpCodes=[]);const C=~o.index;(function j_(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(_)!=C&&_.push(C),_.push(u,c,g)}}(s,o,c,om(s,u,d.hostVars,Bt),d)}function ro(s,o,u,c,d,g){const _=Pr(s,o);!function dm(s,o,u,c,d,g,_){if(null==g)s.removeAttribute(o,d,u);else{const C=null==_?ke(g):_(g,c||"",d);s.setAttribute(o,d,C,u)}}(o[$t],_,g,s.value,u,c,d)}function hi(s,o,u,c,d,g){const _=g[o];if(null!==_){const C=c.setInput;for(let b=0;b<_.length;){const A=_[b++],R=_[b++],B=_[b++];null!==C?c.setInput(u,B,A,R):u[R]=B}}}function VE(s,o,u){let c=null,d=0;for(;d<u.length;){const g=u[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===c&&(c=[]);const _=s[g];for(let C=0;C<_.length;C+=2)if(_[C]===o){c.push(g,_[C+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function UE(s,o,u,c){return[s,!0,!1,o,null,0,c,u,null,null]}function jT(s,o){const u=Cr(o,s);if(Gs(u)){const c=u[Ke];48&u[jt]?cs(c,u,c.template,u[$n]):u[Vs]>0&&H_(u)}}function H_(s){for(let c=uu(s);null!==c;c=lu(c))for(let d=Nr;d<c.length;d++){const g=c[d];if(Gs(g))if(512&g[jt]){const _=g[Ke];cs(_,g,_.template,g[$n])}else g[Vs]>0&&H_(g)}const u=s[Ke].components;if(null!==u)for(let c=0;c<u.length;c++){const d=Cr(u[c],s);Gs(d)&&d[Vs]>0&&H_(d)}}function $T(s,o){const u=Cr(o,s),c=u[Ke];(function BE(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),X(c,u,u[$n])}function fu(s,o){return s[Ti]?s[Oa][pn]=o:s[Ti]=o,s[Oa]=o,o}function hm(s){for(;s;){s[jt]|=32;const o=Kd(s);if(js(s)&&!o)return s;s=o}return null}function hl(s,o,u,c=!0){const d=o[Is];d.begin&&d.begin();try{cs(s,o,s.template,u)}catch(_){throw c&&q_(o,_),_}finally{d.end&&d.end()}}function G_(s,o,u){Cd(0),o(s,u)}function lp(s){return s[Es]||(s[Es]=[])}function z_(s){return s.cleanup||(s.cleanup=[])}function q_(s,o){const u=s[Pa],c=u?u.get(Qf,null):null;c&&c.handleError(o)}function pm(s,o,u,c,d){for(let g=0;g<u.length;){const _=u[g++],C=u[g++],b=o[_],A=s.data[_];null!==A.setInput?A.setInput(b,d,c,C):b[C]=d}}function cp(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,g=0;if(null!==o)for(let _=0;_<o.length;_++){const C=o[_];"number"==typeof C?g=C:1==g?d=we(d,C):2==g&&(c=we(c,C+": "+o[++_]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}function dp(s,o,u,c,d=!1){for(;null!==u;){const g=o[u.index];if(null!==g&&c.push(ar(g)),ji(g))for(let C=Nr;C<g.length;C++){const b=g[C],A=b[Ke].firstChild;null!==A&&dp(b[Ke],b,A,c)}const _=u.type;if(8&_)dp(s,o,u.child,c);else if(32&_){const C=us(u,o);let b;for(;b=C();)c.push(b)}else if(16&_){const C=al(o,u);if(Array.isArray(C))c.push(...C);else{const b=Kd(o[or]);dp(b[Ke],b,C,c,!0)}}u=d?u.projectionNext:u.next}return c}class Tc{get rootNodes(){const o=this._lView,u=o[Ke];return dp(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[$n]}set context(o){this._lView[$n]=o}get destroyed(){return 128==(128&this._lView[jt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[xn];if(ji(o)){const u=o[Bs],c=u?u.indexOf(this):-1;c>-1&&(M(o,c),Qa(u,c))}this._attachedToViewContainer=!1}P(this._lView[Ke],this._lView)}onDestroy(o){kE(this._lView[Ke],this._lView,null,o)}markForCheck(){hm(this._cdRefInjectingView||this._lView)}detach(){this._lView[jt]&=-65}reattach(){this._lView[jt]|=64}detectChanges(){hl(this._lView[Ke],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Lf(s,o){Bf(s,o,o[$t],2,null,null)}(this._lView[Ke],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=o}}class jE extends Tc{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;hl(o[Ke],o,o[$n],!1)}checkNoChanges(){}get context(){return null}}class Z_ extends ah{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=pt(o);return new hp(u,this.ngModule)}}function gm(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class $E{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){c=Rr(c);const d=this.injector.get(o,em,c);return d!==em||u===em?d:this.parentInjector.get(o,u,c)}}class hp extends lE{get inputs(){return gm(this.componentDef.inputs)}get outputs(){return gm(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function mT(s){return s.map(gT).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,c,d){let g=(d=d||this.ngModule)instanceof Ec?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const _=g?new $E(o,g):o,C=_.get(A_,null);if(null===C)throw new _e(407,!1);const b=_.get(aT,null),A=C.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",B=c?function kT(s,o,u){return s.selectRootElement(o,u===L.ShadowDom)}(A,c,this.componentDef.encapsulation):Ff(A,R,function HT(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),K=this.componentDef.onPush?288:272,ne=sp(0,null,null,1,0,null,null,null,null,null),Ee=im(null,ne,null,K,null,null,C,A,b,_,null);let Ge,Ye;Xo(Ee);try{const ht=this.componentDef;let Ot,Oe=null;ht.findHostDirectiveDefs?(Ot=[],Oe=new Map,ht.findHostDirectiveDefs(ht,Ot,Oe),Ot.push(ht)):Ot=[ht];const zt=function Y_(s,o){const u=s[Ke],c=Cn;return s[c]=o,ip(u,c,2,"#host",null)}(Ee,B),Gn=function GT(s,o,u,c,d,g,_,C){const b=d[Ke];!function zT(s,o,u,c){for(const d of s)o.mergedAttrs=Eo(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(cp(o,o.mergedAttrs,!0),null!==u&&$f(c,u,o))}(c,s,o,_);const A=g.createRenderer(o,u),R=im(d,B_(u),null,u.onPush?32:16,d[s.index],s,g,A,C||null,null,null);return b.firstCreatePass&&$_(b,s,c.length-1),fu(d,R),d[s.index]=R}(zt,B,ht,Ot,Ee,C,A);Ye=Ou(ne,Cn),B&&function WT(s,o,u,c){if(c)na(s,u,["ng-version",fE.full]);else{const{attrs:d,classes:g}=function yT(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++c]):8===d&&u.push(g);else{if(!Po(d))break;d=g}c++}return{attrs:o,classes:u}}(o.selectors[0]);d&&na(s,u,d),g&&g.length>0&&ul(s,u,g.join(" "))}}(A,ht,B,c),void 0!==u&&function qT(s,o,u){const c=s.projection=[];for(let d=0;d<o.length;d++){const g=u[d];c.push(null!=g?Array.from(g):null)}}(Ye,this.ngContentSelectors,u),Ge=function GE(s,o,u,c,d,g){const _=Kn(),C=d[Ke],b=Pr(_,d);ei(C,d,_,u,null,c);for(let R=0;R<u.length;R++)se(kn(d,C,_.directiveStart+R,_),d);vi(C,d,_),b&&se(b,d);const A=kn(d,C,_.directiveStart+_.componentOffset,_);if(s[$n]=d[$n]=A,null!==g)for(const R of g)R(A,o);return Cc(C,_,s),A}(Gn,ht,Ot,Oe,Ee,[ZT]),X(ne,Ee,null)}finally{bd()}return new K_(this.componentType,Ge,du(Ye,Ee),Ee,Ye)}}class K_ extends rT{constructor(o,u,c,d,g){super(),this.location=c,this._rootLView=d,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new jE(d),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const g=this._rootLView;pm(g[Ke],g,d,o,u),hm(Cr(this._tNode.index,g))}}get injector(){return new oa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function ZT(){const s=Kn();Bu(ge()[Ke],s)}function mm(s){let o=function Q_(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(Br(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new _e(903,!1);d=o.\u0275dir}if(d){if(u){c.push(d);const _=s;_.inputs=J_(s.inputs),_.declaredInputs=J_(s.declaredInputs),_.outputs=J_(s.outputs);const C=d.hostBindings;C&&QT(s,C);const b=d.viewQuery,A=d.contentQueries;if(b&&KT(s,b),A&&YT(s,A),Ce(s.inputs,d.inputs),Ce(s.declaredInputs,d.declaredInputs),Ce(s.outputs,d.outputs),Br(d)&&d.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let _=0;_<g.length;_++){const C=g[_];C&&C.ngInherit&&C(s),C===mm&&(u=!1)}}o=Object.getPrototypeOf(o)}!function zE(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=Eo(d.hostAttrs,u=Eo(u,d.hostAttrs))}}(c)}function J_(s){return s===N?{}:s===Z?[]:s}function KT(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function YT(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,g)=>{o(c,d,g),u(c,d,g)}:o}function QT(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}function Sc(s){return!!X_(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function X_(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ia(s,o,u){return s[o]=u}function fi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function ev(s,o,u,c){const d=ge();return fi(d,bs(),o)&&(Lt(),ro(Mn(),d,s,o,u,c)),ev}function xc(s,o,u,c){return fi(s,bs(),u)?o+ke(u)+c:Bt}function er(s,o,u,c,d,g,_,C){const b=ge(),A=Lt(),R=s+Cn,B=A.firstCreatePass?function eI(s,o,u,c,d,g,_,C,b){const A=o.consts,R=ip(o,s,4,_||null,Ds(A,C));lm(o,u,R,Ds(A,b)),Bu(o,R);const B=R.tView=sp(2,R,c,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,R),B.queries=o.queries.embeddedTView(R)),R}(R,A,b,o,u,c,d,g,_):A.data[R];xi(B,!1);const K=b[$t].createComment("");ol(A,b,K,B),se(K,b),fu(b,b[R]=UE(K,b,K,B)),Fa(B)&&Ie(A,b,B),null!=_&&am(b,B,C)}function ki(s){return Jr(function wd(){return Rt.lFrame.contextLView}(),Cn+s)}function rv(s,o,u){const c=ge();return fi(c,bs(),o)&&ds(Lt(),Mn(),c,s,o,c[$t],u,!1),rv}function gp(s,o,u,c,d){const _=d?"class":"style";pm(s,u,o.inputs[_],_,c)}function vm(s,o,u,c){const d=ge(),g=Lt(),_=Cn+s,C=d[$t],b=g.firstCreatePass?function io(s,o,u,c,d,g){const _=o.consts,b=ip(o,s,2,c,Ds(_,d));return lm(o,u,b,Ds(_,g)),null!==b.attrs&&cp(b,b.attrs,!1),null!==b.mergedAttrs&&cp(b,b.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,b),b}(_,g,d,o,u,c):g.data[_],A=d[_]=Ff(C,o,function Ad(){return Rt.lFrame.currentNamespace}()),R=Fa(b);return xi(b,!0),$f(C,A,b),32!=(32&b.flags)&&ol(g,d,A,b),0===function Vl(){return Rt.lFrame.elementDepthCount}()&&se(A,d),function Ul(){Rt.lFrame.elementDepthCount++}(),R&&(Ie(g,d,b),Cc(g,b,d)),null!==c&&am(d,b),vm}function wm(){let s=Kn();Fu()?function vd(){Rt.lFrame.isParent=!1}():(s=s.parent,xi(s,!1));const o=s;!function Bl(){Rt.lFrame.elementDepthCount--}();const u=Lt();return u.firstCreatePass&&(Bu(u,s),go(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Ss(s){return 0!=(8&s.flags)}(o)&&gp(u,o,ge(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function ql(s){return 0!=(16&s.flags)}(o)&&gp(u,o,ge(),o.stylesWithoutHost,!1),wm}function iv(s,o,u,c){return vm(s,o,u,c),wm(),iv}function nI(){return ge()}function Em(s){return!!s&&"function"==typeof s.then}function rI(s){return!!s&&"function"==typeof s.subscribe}const iI=rI;function sv(s,o,u,c){const d=ge(),g=Lt(),_=Kn();return function ln(s,o,u,c,d,g,_){const C=Fa(c),A=s.firstCreatePass&&z_(s),R=o[$n],B=lp(o);let K=!0;if(3&c.type||_){const Ge=Pr(c,o),Ye=_?_(Ge):Ge,ht=B.length,Ot=_?zt=>_(ar(zt[c.index])):c.index;let Oe=null;if(!_&&C&&(Oe=function kc(s,o,u,c){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const _=d[g];if(_===u&&d[g+1]===c){const C=o[Es],b=d[g+2];return C.length>b?C[b]:null}"string"==typeof _&&(g+=2)}return null}(s,o,d,c.index)),null!==Oe)(Oe.__ngLastListenerFn__||Oe).__ngNextListenerFn__=g,Oe.__ngLastListenerFn__=g,K=!1;else{g=_p(c,o,R,g,!1);const zt=u.listen(Ye,d,g);B.push(g,zt),A&&A.push(d,Ot,ht,ht+1)}}else g=_p(c,o,R,g,!1);const ne=c.outputs;let Ee;if(K&&null!==ne&&(Ee=ne[d])){const Ge=Ee.length;if(Ge)for(let Ye=0;Ye<Ge;Ye+=2){const Gn=o[Ee[Ye]][Ee[Ye+1]].subscribe(g),hr=B.length;B.push(g,Gn),A&&A.push(d,c.index,hr,-(hr+1))}}}(g,d,d[$t],_,s,o,c),sv}function yp(s,o,u,c){try{return On(6,o,u),!1!==u(c)}catch(d){return q_(s,d),!1}finally{On(7,o,u)}}function _p(s,o,u,c,d){return function g(_){if(_===Function)return c;hm(s.componentOffset>-1?Cr(s.index,o):o);let b=yp(o,u,c,_),A=g.__ngNextListenerFn__;for(;A;)b=yp(o,u,A,_)&&b,A=A.__ngNextListenerFn__;return d&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function av(s=1){return function Gl(s){return(Rt.lFrame.contextLView=function Td(s,o){for(;s>0;)o=o[Us],s--;return o}(s,Rt.lFrame.contextLView))[$n]}(s)}function uv(s,o,u){return Fi(s,"",o,"",u),uv}function Fi(s,o,u,c,d){const g=ge(),_=xc(g,o,u,c);return _!==Bt&&ds(Lt(),Mn(),g,s,_,g[$t],d,!1),Fi}function vp(s,o){return s<<17|o<<2}function yu(s){return s>>17&32767}function hv(s){return 2|s}function wn(s){return(131068&s)>>2}function fv(s,o){return-131069&s|o<<2}function _h(s){return 1|s}function Jt(s,o,u,c,d){const g=s[u+1],_=null===o;let C=c?yu(g):wn(g),b=!1;for(;0!==C&&(!1===b||_);){const R=s[C+1];iS(s[C],o)&&(b=!0,s[C+1]=c?_h(R):hv(R)),C=c?yu(R):wn(R)}b&&(s[u+1]=c?hv(g):_h(g))}function iS(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&$i(s,o)>=0}function yv(s,o){return function Fo(s,o,u,c){const d=ge(),g=Lt(),_=function rs(s){const o=Rt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);g.firstUpdatePass&&function wv(s,o,u,c){const d=s.data;if(null===d[u+1]){const g=d[jr()],_=function vv(s,o){return o>=s.expandoStartIndex}(s,u);(function Am(s,o){return 0!=(s.flags&(o?8:16))})(g,c)&&null===o&&!_&&(o=!1),o=function Tm(s,o,u,c){const d=function Lu(s){const o=Rt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=Vc(u=Dp(null,s,o,u,c),o.attrs,c),g=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==d)if(u=Dp(d,s,o,u,c),null===g){let b=function aS(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==wn(c))return s[yu(c)]}(s,o,c);void 0!==b&&Array.isArray(b)&&(b=Dp(null,s,o,b[1],c),b=Vc(b,o.attrs,c),function Sm(s,o,u,c){s[yu(u?o.classBindings:o.styleBindings)]=c}(s,o,c,b))}else g=function vh(s,o,u){let c;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)c=Vc(c,s[g].hostAttrs,u);return Vc(c,o.attrs,u)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),u}(d,g,o,c),function _u(s,o,u,c,d,g){let _=g?o.classBindings:o.styleBindings,C=yu(_),b=wn(_);s[c]=u;let R,A=!1;if(Array.isArray(u)?(R=u[1],(null===R||$i(u,R)>0)&&(A=!0)):R=u,d)if(0!==b){const K=yu(s[C+1]);s[c+1]=vp(K,C),0!==K&&(s[K+1]=fv(s[K+1],c)),s[C+1]=function nS(s,o){return 131071&s|o<<17}(s[C+1],c)}else s[c+1]=vp(C,0),0!==C&&(s[C+1]=fv(s[C+1],c)),C=c;else s[c+1]=vp(b,0),0===C?C=c:s[b+1]=fv(s[b+1],c),b=c;A&&(s[c+1]=hv(s[c+1])),Jt(s,R,c,!0),Jt(s,R,c,!1),function Ep(s,o,u,c,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&$i(g,o)>=0&&(u[c+1]=_h(u[c+1]))}(o,R,s,c,g),_=vp(C,b),g?o.classBindings=_:o.styleBindings=_}(d,g,o,u,_,c)}}(g,s,_,c),o!==Bt&&fi(d,_,o)&&function gI(s,o,u,c,d,g,_,C){if(!(3&o.type))return;const b=s.data,A=b[C+1],R=function rS(s){return 1==(1&s)}(A)?mI(b,o,u,d,wn(A),_):void 0;Wi(R)||(Wi(g)||function tS(s){return 2==(2&s)}(A)&&(g=mI(b,null,u,d,C,_)),function ya(s,o,u,c,d){if(o)d?s.addClass(u,c):s.removeClass(u,c);else{let g=-1===c.indexOf("-")?void 0:Tt.DashCase;null==d?s.removeStyle(u,c,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=Tt.Important),s.setStyle(u,c,d,g))}}(c,_,vo(jr(),u),d,g))}(g,g.data[jr()],d,d[$t],s,d[_+1]=function Ev(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ye(_a(s)))),s}(o,u),c,_)}(s,o,null,!0),yv}function Dp(s,o,u,c,d){let g=null;const _=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<_&&(g=o[C],c=Vc(c,g.hostAttrs,d),g!==s);)C++;return null!==s&&(u.directiveStylingLast=C),c}function Vc(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const _=o[g];"number"==typeof _?d=_:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Mi(s,_,!!u||o[++g]))}return void 0===s?null:s}function mI(s,o,u,c,d,g){const _=null===o;let C;for(;d>0;){const b=s[d],A=Array.isArray(b),R=A?b[1]:b,B=null===R;let K=u[d+1];K===Bt&&(K=B?Z:void 0);let ne=B?gn(K,c):R===c?K:void 0;if(A&&!Wi(ne)&&(ne=gn(b,c)),Wi(ne)&&(C=ne,_))return C;const Ee=s[d+1];d=_?yu(Ee):wn(Ee)}if(null!==o){let b=g?o.residualClasses:o.residualStyles;null!=b&&(C=gn(b,c))}return C}function Wi(s){return void 0!==s}function xm(s,o=""){const u=ge(),c=Lt(),d=s+Cn,g=c.firstCreatePass?ip(c,d,1,o,null):c.data[d],_=u[d]=function sl(s,o){return s.createText(o)}(u[$t],o);ol(c,u,_,g),xi(g,!1)}function wh(s){return gl("",s,""),wh}function gl(s,o,u){const c=ge(),d=xc(c,s,o,u);return d!==Bt&&function Ea(s,o,u){const c=vo(o,s);!function kf(s,o,u){s.setValue(o,u)}(s[$t],c,u)}(c,jr(),d),gl}const $c=void 0;var hS=["en",[["a","p"],["AM","PM"],$c],[["AM","PM"],$c,$c],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$c,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$c,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$c,"{1} 'at' {0}",$c],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function dS(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Ch={};function xv(s){const o=function Pv(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Rv(o);if(u)return u;const c=o.split("-")[0];if(u=Rv(c),u)return u;if("en"===c)return hS;throw new _e(701,!1)}function Nm(s){return xv(s)[Mt.PluralCase]}function Rv(s){return s in Ch||(Ch[s]=dn.ng&&dn.ng.common&&dn.ng.common.locales&&dn.ng.common.locales[s]),Ch[s]}var Mt=(()=>((Mt=Mt||{})[Mt.LocaleId=0]="LocaleId",Mt[Mt.DayPeriodsFormat=1]="DayPeriodsFormat",Mt[Mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mt[Mt.DaysFormat=3]="DaysFormat",Mt[Mt.DaysStandalone=4]="DaysStandalone",Mt[Mt.MonthsFormat=5]="MonthsFormat",Mt[Mt.MonthsStandalone=6]="MonthsStandalone",Mt[Mt.Eras=7]="Eras",Mt[Mt.FirstDayOfWeek=8]="FirstDayOfWeek",Mt[Mt.WeekendRange=9]="WeekendRange",Mt[Mt.DateFormat=10]="DateFormat",Mt[Mt.TimeFormat=11]="TimeFormat",Mt[Mt.DateTimeFormat=12]="DateTimeFormat",Mt[Mt.NumberSymbols=13]="NumberSymbols",Mt[Mt.NumberFormats=14]="NumberFormats",Mt[Mt.CurrencyCode=15]="CurrencyCode",Mt[Mt.CurrencySymbol=16]="CurrencySymbol",Mt[Mt.CurrencyName=17]="CurrencyName",Mt[Mt.Currencies=18]="Currencies",Mt[Mt.Directionality=19]="Directionality",Mt[Mt.PluralCase=20]="PluralCase",Mt[Mt.ExtraData=21]="ExtraData",Mt))();const Dh="en-US";let PI=Dh;function xh(s,o,u,c,d){if(s=Q(s),Array.isArray(s))for(let g=0;g<s.length;g++)xh(s[g],o,u,c,d);else{const g=Lt(),_=ge();let C=cu(s)?s:Q(s.provide),b=D_(s);const A=Kn(),R=1048575&A.providerIndexes,B=A.directiveStart,K=A.providerIndexes>>20;if(cu(s)||!s.multi){const ne=new Ts(b,d,fh),Ee=Wc(C,o,d?R:R+K,B);-1===Ee?(Zs(Ql(A,_),g,C),Wm(g,s,o.length),o.push(C),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(ne),_.push(ne)):(u[Ee]=ne,_[Ee]=ne)}else{const ne=Wc(C,o,R+K,B),Ee=Wc(C,o,R,R+K),Ye=Ee>=0&&u[Ee];if(d&&!Ye||!d&&!(ne>=0&&u[ne])){Zs(Ql(A,_),g,C);const ht=function FS(s,o,u,c,d){const g=new Ts(s,u,fh);return g.multi=[],g.index=o,g.componentProviders=0,tC(g,d,c&&!u),g}(d?kS:qv,u.length,d,c,b);!d&&Ye&&(u[Ee].providerFactory=ht),Wm(g,s,o.length,0),o.push(C),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(ht),_.push(ht)}else Wm(g,s,ne>-1?ne:Ee,tC(u[d?Ee:ne],b,!d&&c));!d&&c&&Ye&&u[Ee].componentProviders++}}}function Wm(s,o,u,c){const d=cu(o),g=function Yg(s){return!!s.useClass}(o);if(d||g){const b=(g?Q(o.useClass):o).prototype.ngOnDestroy;if(b){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const R=A.indexOf(u);-1===R?A.push(u,[c,b]):A[R+1].push(c,b)}else A.push(u,b)}}}function tC(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Wc(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function qv(s,o,u,c){return Zv(this.multi,[])}function kS(s,o,u,c){const d=this.multi;let g;if(this.providerFactory){const _=this.providerFactory.componentProviders,C=kn(u,u[Ke],this.providerFactory.index,c);g=C.slice(0,_),Zv(d,g);for(let b=_;b<C.length;b++)g.push(C[b])}else g=[],Zv(d,g);return g}function Zv(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function qm(s,o=[]){return u=>{u.providersResolver=(c,d)=>function OS(s,o,u){const c=Lt();if(c.firstCreatePass){const d=Br(s);xh(u,c.data,c.blueprint,d,!0),xh(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class Eu{}class Kv{}function LS(s,o){return new Vo(s,o??null)}class Vo extends Eu{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Z_(this);const c=wr(o);this._bootstrapComponents=va(c.bootstrap),this._r3Injector=k_(o,u,[{provide:Eu,useValue:this},{provide:ah,useValue:this.componentFactoryResolver}],ye(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class qc extends Kv{constructor(o){super(),this.moduleType=o}create(o){return new Vo(this.moduleType,o)}}class VS extends Eu{constructor(o,u,c){super(),this.componentFactoryResolver=new Z_(this),this.instance=null;const d=new aE([...o,{provide:Eu,useValue:this},{provide:ah,useValue:this.componentFactoryResolver}],u||Jg(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Km(s,o,u=null){return new VS(s,o,u).injector}let Yv=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=ih(0,u.type),d=c.length>0?Km([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,d)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=st({token:s,providedIn:"environment",factory:()=>new s(Vt(Ec))}),s})();function Mh(s){s.getStandaloneInjector=o=>o.get(Yv).getOrCreateStandaloneInjector(s)}function cC(s,o,u,c){return hC(ge(),Or(),s,o,u,c)}function Qm(s,o,u,c,d){return function fC(s,o,u,c,d,g,_){const C=o+u;return function pl(s,o,u,c){const d=fi(s,o,u);return fi(s,o+1,c)||d}(s,C,d,g)?Ia(s,C+2,_?c.call(_,d,g):c(d,g)):Lp(s,C+2)}(ge(),Or(),s,o,u,c,d)}function Lp(s,o){const u=s[o];return u===Bt?void 0:u}function hC(s,o,u,c,d,g){const _=o+u;return fi(s,_,d)?Ia(s,_+1,g?c.call(g,d):c(d)):Lp(s,_+1)}function Zc(s,o){const u=Lt();let c;const d=s+Cn;u.firstCreatePass?(c=function wl(s,o){if(o)for(let u=o.length-1;u>=0;u--){const c=o[u];if(s===c.name)return c}}(o,u.pipeRegistry),u.data[d]=c,c.onDestroy&&(u.destroyHooks??(u.destroyHooks=[])).push(d,c.onDestroy)):c=u.data[d];const g=c.factory||(c.factory=Cs(c.type)),_=zn(fh);try{const C=Za(!1),b=g();return Za(C),function un(s,o,u,c){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),o[u]=c}(u,ge(),d,b),b}finally{zn(_)}}function ey(s,o,u){const c=s+Cn,d=ge(),g=Jr(d,c);return function Nh(s,o){return s[Ke].data[o].pure}(d,c)?hC(d,Or(),o,g.transform,u,g):g.transform(u)}function ny(s){return o=>{setTimeout(s,void 0,o)}}const Ns=class gC extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let d=o,g=u||(()=>null),_=c;if(o&&"object"==typeof o){const b=o;d=b.next?.bind(b),g=b.error?.bind(b),_=b.complete?.bind(b)}this.__isAsync&&(g=ny(g),d&&(d=ny(d)),_&&(_=ny(_)));const C=super.subscribe({next:d,error:g,complete:_});return o instanceof $.w0&&o.add(C),C}};function ew(){return this._results[Symbol.iterator]()}class Vp{get changes(){return this._changes||(this._changes=new Ns)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Vp.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=ew)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=function yi(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function ic(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],g=o[c];if(u&&(d=u(d),g=u(g)),g!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Up=(()=>{class s{}return s.__NG_ELEMENT_ID__=YS,s})();const KS=Up,tw=class extends KS{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tView,d=im(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);d[ho]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[Si];return null!==_&&(d[Si]=_.createEmbeddedView(c)),X(c,d,o),new Tc(d)}};function YS(){return Bp(Kn(),ge())}function Bp(s,o){return 4&s.type?new tw(o,s,du(s,o)):null}let ry=(()=>{class s{}return s.__NG_ELEMENT_ID__=mC,s})();function mC(){return jp(Kn(),ge())}const yC=ry,iy=class extends yC{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return du(this._hostTNode,this._hostLView)}get injector(){return new oa(this._hostTNode,this._hostLView)}get parentInjector(){const o=Qn(this._hostTNode,this._hostLView);if(Io(o)){const u=qa(o,this._hostLView),c=ia(o);return new oa(u[Ke].data[c+8],u)}return new oa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=_C(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-Nr}createEmbeddedView(o,u,c){let d,g;"number"==typeof c?d=c:null!=c&&(d=c.index,g=c.injector);const _=o.createEmbeddedView(u||{},g);return this.insert(_,d),_}createComponent(o,u,c,d,g){const _=o&&!function Yu(s){return"function"==typeof s}(o);let C;if(_)C=u;else{const B=u||{};C=B.index,c=B.injector,d=B.projectableNodes,g=B.environmentInjector||B.ngModuleRef}const b=_?o:new hp(pt(o)),A=c||this.parentInjector;if(!g&&null==b.ngModule){const K=(_?A:this.parentInjector).get(Ec,null);K&&(g=K)}const R=b.create(A,d,void 0,g);return this.insert(R.hostView,C),R}insert(o,u){const c=o._lView,d=c[Ke];if(function gd(s){return ji(s[xn])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const B=c[xn],K=new iy(B,B[Ir],B[xn]);K.detach(K.indexOf(o))}}const g=this._adjustIndex(u),_=this._lContainer;!function p(s,o,u,c){const d=Nr+c,g=u.length;c>0&&(u[d-1][pn]=o),c<g-Nr?(o[pn]=u[d],sc(u,Nr+c,o)):(u.push(o),o[pn]=null),o[xn]=u;const _=o[ho];null!==_&&u!==_&&function m(s,o){const u=s[po];o[or]!==o[xn][xn][or]&&(s[ka]=!0),null===u?s[po]=[o]:u.push(o)}(_,o);const C=o[Si];null!==C&&C.insertView(s),o[jt]|=64}(d,c,_,g);const C=ma(g,_),b=c[$t],A=As(b,_[zo]);return null!==A&&function r_(s,o,u,c,d,g){c[Er]=d,c[Ir]=o,Bf(s,c,u,1,d,g)}(d,_[Ir],b,c,A,C),o.attachToViewContainerRef(),sc(qi(_),g,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=_C(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=M(this._lContainer,u);c&&(Qa(qi(this._lContainer),u),P(c[Ke],c))}detach(o){const u=this._adjustIndex(o,-1),c=M(this._lContainer,u);return c&&null!=Qa(qi(this._lContainer),u)?new Tc(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function _C(s){return s[Bs]}function qi(s){return s[Bs]||(s[Bs]=[])}function jp(s,o){let u;const c=o[s.index];if(ji(c))u=c;else{let d;if(8&s.type)d=ar(c);else{const g=o[$t];d=g.createComment("");const _=Pr(s,o);Gt(g,As(g,_),d,function Vf(s,o){return s.nextSibling(o)}(g,_),!1)}o[s.index]=u=UE(c,o,d,s),fu(o,u)}return new iy(u,s,o)}class Ta{constructor(o){this.queryList=o,this.matches=null}clone(){return new Ta(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ph{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let g=0;g<c;g++){const _=u.getByIndex(g);d.push(this.queries[_.indexInDeclarationView].clone())}return new Ph(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==nA(o,u).matches&&this.queries[u].setDirty()}}class oo{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Iu{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,g=this.getByIndex(c).embeddedTView(o,d);g&&(g.indexInDeclarationView=c,null!==u?u.push(g):u=[g])}return null!==u?new Iu(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class nw{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new nw(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const g=c[d];this.matchTNodeWithReadOption(o,u,LN(u,g)),this.matchTNodeWithReadOption(o,u,sa(u,o,g,!1,!1))}else c===Up?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,sa(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===uh||d===ry||d===Up&&4&u.type)this.addMatch(u.index,-2);else{const g=sa(u,o,d,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function LN(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function VN(s,o,u,c){return-1===u?function Oh(s,o){return 11&s.type?du(s,o):4&s.type?Bp(s,o):null}(o,s):-2===u?function UN(s,o,u){return u===uh?du(o,s):u===Up?Bp(o,s):u===ry?jp(o,s):void 0}(s,o,c):kn(s,s[Ke],u,o)}function QS(s,o,u,c){const d=o[Si].queries[c];if(null===d.matches){const g=s.data,_=u.matches,C=[];for(let b=0;b<_.length;b+=2){const A=_[b];C.push(A<0?null:VN(o,g[A],_[b+1],u.metadata.read))}d.matches=C}return d.matches}function sy(s,o,u,c){const d=s.queries.getByIndex(u),g=d.matches;if(null!==g){const _=QS(s,o,d,u);for(let C=0;C<g.length;C+=2){const b=g[C];if(b>0)c.push(_[C/2]);else{const A=g[C+1],R=o[-b];for(let B=Nr;B<R.length;B++){const K=R[B];K[ho]===K[xn]&&sy(K[Ke],K,A,c)}if(null!==R[po]){const B=R[po];for(let K=0;K<B.length;K++){const ne=B[K];sy(ne[Ke],ne,A,c)}}}}}return c}function JS(s){const o=ge(),u=Lt(),c=$a();Cd(c+1);const d=nA(u,c);if(s.dirty&&function Ua(s){return 4==(4&s[jt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?sy(u,o,c,[]):QS(u,o,d,c);s.reset(g,Yf),s.notifyOnChanges()}return!0}return!1}function XS(s,o,u,c){const d=Lt();if(d.firstCreatePass){const g=Kn();(function kh(s,o,u){null===s.queries&&(s.queries=new Iu),s.queries.track(new nw(o,u))})(d,new oo(o,u,c),g.index),function tA(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function Hp(s,o,u){const c=new Vp(4==(4&u));kE(s,o,c,c.destroy),null===o[Si]&&(o[Si]=new Ph),o[Si].queries.push(new Ta(c))}(d,ge(),u)}function eA(){return function $p(s,o){return s[Si].queries[o].queryList}(ge(),$a())}function nA(s,o){return s.queries.getByIndex(o)}function wC(s){return!!wr(s)}function Lh(...s){}const MC=new an("Application Initializer");let ay=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Lh,this.reject=Lh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(Em(g))u.push(g);else if(iI(g)){const _=new Promise((C,b)=>{g.subscribe({complete:C,error:b})});u.push(_)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Vt(MC,8))},s.\u0275prov=st({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const wi=new an("AppId",{providedIn:"root",factory:function qp(){return`${Aa()}${Aa()}${Aa()}`}});function Aa(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const RC=new an("Platform Initializer"),NC=new an("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let Li=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=st({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const El=new an("LocaleId",{providedIn:"root",factory:()=>Pn(El,dt.Optional|dt.SkipSelf)||function wA(){return typeof $localize<"u"&&$localize.locale||Dh}()}),uy=new an("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class EA{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let Vh=(()=>{class s{compileModuleSync(u){return new qc(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),g=va(wr(u).declarations).reduce((_,C)=>{const b=pt(C);return b&&_.push(new hp(b)),_},[]);return new EA(c,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=st({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const cw=(()=>Promise.resolve(0))();function Zp(s){typeof Zone>"u"?cw.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ao{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ns(!1),this.onMicrotaskEmpty=new Ns(!1),this.onStable=new Ns(!1),this.onError=new Ns(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function dw(){let s=dn.requestAnimationFrame,o=dn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function CA(s){const o=()=>{!function Yp(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(dn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,fw(s),s.isCheckStableRunning=!0,hw(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),fw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,g,_,C)=>{try{return Qp(s),u.invokeTask(d,g,_,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),ly(s)}},onInvoke:(u,c,d,g,_,C,b)=>{try{return Qp(s),u.invoke(d,g,_,C,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),ly(s)}},onHasTask:(u,c,d,g)=>{u.hasTask(d,g),c===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,fw(s),hw(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,c,d,g)=>(u.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ao.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(ao.isInAngularZone())throw new _e(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const g=this._inner,_=g.scheduleEventTask("NgZoneEvent: "+d,o,Kp,Lh,Lh);try{return g.runTask(_,u,c)}finally{g.cancelTask(_)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const Kp={};function hw(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function fw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Qp(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function ly(s){s._nesting--,hw(s)}class DA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ns,this.onMicrotaskEmpty=new Ns,this.onStable=new Ns,this.onError=new Ns}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}const pw=new an(""),gw=new an("");let Xp,BC=(()=>{class s{constructor(u,c,d){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Xp||(function mw(s){Xp=s}(d),d.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ao.assertNotInAngularZone(),Zp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Zp(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==g),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(Vt(ao),Vt(Jp),Vt(gw))},s.\u0275prov=st({token:s,factory:s.\u0275fac}),s})(),Jp=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return Xp?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=st({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Bo=!1;let xa=null;const yw=new an("AllowMultipleToken"),cy=new an("PlatformDestroyListeners"),jC=new an("appBootstrapListener");class HC{constructor(o,u){this.name=o,this.token=u}}function ti(s,o,u=[]){const c=`Platform: ${o}`,d=new an(c);return(g=[])=>{let _=ww();if(!_||_.injector.get(yw,!1)){const C=[...u,...g,{provide:d,useValue:!0}];s?s(C):function TA(s){if(xa&&!xa.get(yw,!1))throw new _e(400,!1);xa=s;const o=s.get(WC);(function dy(s){const o=s.get(RC,null);o&&o.forEach(u=>u())})(s)}(function eg(s=[],o){return ch.create({name:o,providers:[{provide:ll,useValue:"platform"},{provide:cy,useValue:new Set([()=>xa=null])},...s]})}(C,c))}return function Ii(s){const o=ww();if(!o)throw new _e(401,!1);return o}()}}function ww(){return xa?.get(WC)??null}let WC=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const d=function Ew(s,o){let u;return u="noop"===s?new DA:("zone.js"===s?void 0:s)||new ao(o),u}(c?.ngZone,function qC(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:ao,useValue:d}];return d.run(()=>{const _=ch.create({providers:g,parent:this.injector,name:u.moduleType.name}),C=u.create(_),b=C.injector.get(Qf,null);if(!b)throw new _e(402,!1);return d.runOutsideAngular(()=>{const A=d.onError.subscribe({next:R=>{b.handleError(R)}});C.onDestroy(()=>{Il(this._modules,C),A.unsubscribe()})}),function ZC(s,o,u){try{const c=u();return Em(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(b,d,()=>{const A=C.injector.get(ay);return A.runInitializers(),A.donePromise.then(()=>(function OI(s){me(s,"Expected localeId to be defined"),"string"==typeof s&&(PI=s.toLowerCase().replace(/_/g,"-"))}(C.injector.get(El,Dh)||Dh),this._moduleDoBootstrap(C),C))})})}bootstrapModule(u,c=[]){const d=KC({},c);return function $C(s,o,u){const c=new qc(u);return Promise.resolve(c)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(u){const c=u.injector.get(hy);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new _e(-403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(cy,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Vt(ch))},s.\u0275prov=st({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function KC(s,o){return Array.isArray(o)?o.reduce(KC,s):{...s,...o}}let hy=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,c,d){this._zone=u,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),_=new O.y(C=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{ao.assertNotInAngularZone(),Zp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{ao.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{b.unsubscribe(),A.unsubscribe()}});this.isStable=(0,re.T)(g,_.pipe((0,ue.B)()))}bootstrap(u,c){const d=u instanceof lE;if(!this._injector.get(ay).done){!d&&Vr(u);throw new _e(405,Bo)}let _;_=d?u:this._injector.get(ah).resolveComponentFactory(u),this.componentTypes.push(_.componentType);const C=function _w(s){return s.isBoundToModule}(_)?void 0:this._injector.get(Eu),A=_.create(ch.NULL,[],c||_.selector,C),R=A.location.nativeElement,B=A.injector.get(pw,null);return B?.registerApplication(R),A.onDestroy(()=>{this.detachView(A.hostView),Il(this.components,A),B?.unregisterApplication(R)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Il(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const c=this._injector.get(jC,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Il(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new _e(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(Vt(ao),Vt(Ec),Vt(Qf))},s.\u0275prov=st({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Il(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}function YC(){return!1}let JC=(()=>{class s{}return s.__NG_ELEMENT_ID__=SA,s})();function SA(s){return function tg(s,o,u){if(Mu(s)&&!u){const c=Cr(s.index,o);return new Tc(c,c)}return 47&s.type?new Tc(o[or],o):null}(Kn(),ge(),16==(16&s))}class Tw{constructor(){}supports(o){return Sc(o)}create(o){return new Sw(o)}}const rg=(s,o)=>o;class Sw{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||rg}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,g=null;for(;u||c;){const _=!c||u&&u.currentIndex<Bh(c,d,g)?u:c,C=Bh(_,d,g),b=_.currentIndex;if(_===c)d--,c=c._nextRemoved;else if(u=u._next,null==_.previousIndex)d++;else{g||(g=[]);const A=C-d,R=b-d;if(A!=R){for(let K=0;K<A;K++){const ne=K<g.length?g[K]:g[K]=0,Ee=ne+K;R<=Ee&&Ee<A&&(g[K]=ne+1)}g[_.previousIndex]=R-A}}C!==b&&o(_,C,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Sc(o))throw new _e(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,_,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)g=o[C],_=this._trackByFn(C,g),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,g,_,C)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,_,C),c=!0),u=u._next}else d=0,function JE(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Symbol.iterator]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,C=>{_=this._trackByFn(d,C),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,C,_,d)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,_,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,g,d)):o=this._addAfter(new Aw(u,c),g,d),o}_verifyReinsertion(o,u,c,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new ig),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ig),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Aw{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class xw{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class ig{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new xw,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Bh(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class Mw{constructor(){}supports(o){return o instanceof Map||X_(o)}create(){return new FA}}class FA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||X_(o)))throw new _e(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const g=d._prev,_=d._next;return g&&(g._next=_),_&&(_._prev=g),d._next=null,d._prev=null,d}const c=new Rw(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class Rw{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sg(){return new og([new Tw])}let og=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||sg()),deps:[[s,new gt,new So]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new _e(901,!1)}}return s.\u0275prov=st({token:s,providedIn:"root",factory:sg}),s})();function Nw(){return new my([new Mw])}let my=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Nw()),deps:[[s,new gt,new So]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new _e(901,!1)}}return s.\u0275prov=st({token:s,providedIn:"root",factory:Nw}),s})();const ug=ti(null,"core",[]);let Yc=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Vt(hy))},s.\u0275mod=ie({type:s}),s.\u0275inj=wt({}),s})();function Ow(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(_t,Me,U)=>{U.d(Me,{Z:()=>qe});var h=U(2090),$=U(4859),O=U(6881),re=U(1877);class ue{constructor(_e,Ne){this._delegate=_e,this.firebase=Ne,(0,O._addComponent)(_e,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(_e,Ne=O._DEFAULT_ENTRY_NAME){var ke;this._delegate.checkDestroyed();const je=this._delegate.container.getProvider(_e);return!je.isInitialized()&&"EXPLICIT"===(null===(ke=je.getComponent())||void 0===ke?void 0:ke.instantiationMode)&&je.initialize(),je.getImmediate({identifier:Ne})}_removeServiceInstance(_e,Ne=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(Ne)}_addComponent(_e){(0,O._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,O._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ce=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function we(){const rt=function ye(rt){const _e={},Ne={__esModule:!0,initializeApp:function Se(Fe,ae={}){const Je=O.initializeApp(Fe,ae);if((0,h.r3)(_e,Je.name))return _e[Je.name];const bt=new rt(Je,Ne);return _e[Je.name]=bt,bt},app:je,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Pe(Fe){const ae=Fe.name,Je=ae.replace("-compat","");if(O._registerComponent(Fe)&&"PUBLIC"===Fe.type){const bt=(nt=je())=>{if("function"!=typeof nt[Je])throw Ce.create("invalid-app-argument",{appName:ae});return nt[Je]()};void 0!==Fe.serviceProps&&(0,h.ZB)(bt,Fe.serviceProps),Ne[Je]=bt,rt.prototype[Je]=function(...nt){return this._getService.bind(this,ae).apply(this,Fe.multipleInstances?nt:[])}}return"PUBLIC"===Fe.type?Ne[Je]:null},removeApp:function ke(Fe){delete _e[Fe]},useAsService:function He(Fe,ae){return"serverAuth"===ae?null:ae},modularAPIs:O}};function je(Fe){if(!(0,h.r3)(_e,Fe=Fe||O._DEFAULT_ENTRY_NAME))throw Ce.create("no-app",{appName:Fe});return _e[Fe]}return Ne.default=Ne,Object.defineProperty(Ne,"apps",{get:function be(){return Object.keys(_e).map(Fe=>_e[Fe])}}),je.App=rt,Ne}(ue);return rt.INTERNAL=Object.assign(Object.assign({},rt.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function _e(Ne){(0,h.ZB)(rt,Ne)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),rt}(),z=new re.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const rt=self.firebase.SDK_VERSION;rt&&rt.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qe=W;!function Ae(rt){(0,O.registerVersion)("@firebase/app-compat","0.2.13",rt)}()},6881:(_t,Me,U)=>{U.r(Me),U.d(Me,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>mi,_DEFAULT_ENTRY_NAME:()=>Fr,_addComponent:()=>ut,_addOrOverwriteComponent:()=>kt,_apps:()=>dn,_clearComponents:()=>Zr,_components:()=>qt,_getProvider:()=>Mr,_registerComponent:()=>Wn,_removeServiceInstance:()=>Bn,deleteApp:()=>qn,getApp:()=>oi,getApps:()=>Vt,initializeApp:()=>Yt,onLog:()=>Zn,registerVersion:()=>Rr,setLogLevel:()=>Kr});var h=U(5861),$=U(4859),O=U(1877),re=U(2090);const ue=(pe,ie)=>ie.some(Le=>pe instanceof Le);let le,Ce;const W=new WeakMap,z=new WeakMap,Q=new WeakMap,$e=new WeakMap,Ae=new WeakMap;let _e={get(pe,ie,Le){if(pe instanceof IDBTransaction){if("done"===ie)return z.get(pe);if("objectStoreNames"===ie)return pe.objectStoreNames||Q.get(pe);if("store"===ie)return Le.objectStoreNames[1]?void 0:Le.objectStore(Le.objectStoreNames[0])}return Se(pe[ie])},set:(pe,ie,Le)=>(pe[ie]=Le,!0),has:(pe,ie)=>pe instanceof IDBTransaction&&("done"===ie||"store"===ie)||ie in pe};function je(pe){return"function"==typeof pe?function ke(pe){return pe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function we(){return Ce||(Ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(pe)?function(...ie){return pe.apply(be(this),ie),Se(W.get(this))}:function(...ie){return Se(pe.apply(be(this),ie))}:function(ie,...Le){const ft=pe.call(be(this),ie,...Le);return Q.set(ft,ie.sort?ie.sort():[ie]),Se(ft)}}(pe):(pe instanceof IDBTransaction&&function rt(pe){if(z.has(pe))return;const ie=new Promise((Le,ft)=>{const At=()=>{pe.removeEventListener("complete",Qt),pe.removeEventListener("error",pt),pe.removeEventListener("abort",pt)},Qt=()=>{Le(),At()},pt=()=>{ft(pe.error||new DOMException("AbortError","AbortError")),At()};pe.addEventListener("complete",Qt),pe.addEventListener("error",pt),pe.addEventListener("abort",pt)});z.set(pe,ie)}(pe),ue(pe,function ye(){return le||(le=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(pe,_e):pe)}function Se(pe){if(pe instanceof IDBRequest)return function qe(pe){const ie=new Promise((Le,ft)=>{const At=()=>{pe.removeEventListener("success",Qt),pe.removeEventListener("error",pt)},Qt=()=>{Le(Se(pe.result)),At()},pt=()=>{ft(pe.error),At()};pe.addEventListener("success",Qt),pe.addEventListener("error",pt)});return ie.then(Le=>{Le instanceof IDBCursor&&W.set(Le,pe)}).catch(()=>{}),Ae.set(ie,pe),ie}(pe);if($e.has(pe))return $e.get(pe);const ie=je(pe);return ie!==pe&&($e.set(pe,ie),Ae.set(ie,pe)),ie}const be=pe=>Ae.get(pe),Fe=["get","getKey","getAll","getAllKeys","count"],ae=["put","add","delete","clear"],Je=new Map;function bt(pe,ie){if(!(pe instanceof IDBDatabase)||ie in pe||"string"!=typeof ie)return;if(Je.get(ie))return Je.get(ie);const Le=ie.replace(/FromIndex$/,""),ft=ie!==Le,At=ae.includes(Le);if(!(Le in(ft?IDBIndex:IDBObjectStore).prototype)||!At&&!Fe.includes(Le))return;const Qt=function(){var pt=(0,h.Z)(function*(fn,...rn){const Vr=this.transaction(fn,At?"readwrite":"readonly");let wr=Vr.store;return ft&&(wr=wr.index(rn.shift())),(yield Promise.all([wr[Le](...rn),At&&Vr.done]))[0]});return function(rn){return pt.apply(this,arguments)}}();return Je.set(ie,Qt),Qt}!function Ne(pe){_e=pe(_e)}(pe=>({...pe,get:(ie,Le,ft)=>bt(ie,Le)||pe.get(ie,Le,ft),has:(ie,Le)=>!!bt(ie,Le)||pe.has(ie,Le)}));class nt{constructor(ie){this.container=ie}getPlatformInfoString(){return this.container.getProviders().map(Le=>{if(function Wt(pe){return"VERSION"===pe.getComponent()?.type}(Le)){const ft=Le.getImmediate();return`${ft.library}/${ft.version}`}return null}).filter(Le=>Le).join(" ")}}const ot="@firebase/app",yr=new O.Yd("@firebase/app"),Fr="[DEFAULT]",qr={[ot]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dn=new Map,qt=new Map;function ut(pe,ie){try{pe.container.addComponent(ie)}catch(Le){yr.debug(`Component ${ie.name} failed to register with FirebaseApp ${pe.name}`,Le)}}function kt(pe,ie){pe.container.addOrOverwriteComponent(ie)}function Wn(pe){const ie=pe.name;if(qt.has(ie))return yr.debug(`There were multiple attempts to register component ${ie}.`),!1;qt.set(ie,pe);for(const Le of dn.values())ut(Le,pe);return!0}function Mr(pe,ie){const Le=pe.container.getProvider("heartbeat").getImmediate({optional:!0});return Le&&Le.triggerHeartbeat(),pe.container.getProvider(ie)}function Bn(pe,ie,Le=Fr){Mr(pe,ie).clearInstance(Le)}function Zr(){qt.clear()}const _r=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Kt{constructor(ie,Le,ft){this._isDeleted=!1,this._options=Object.assign({},ie),this._config=Object.assign({},Le),this._name=Le.name,this._automaticDataCollectionEnabled=Le.automaticDataCollectionEnabled,this._container=ft,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ie){this._isDeleted=ie}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}const mi="9.23.0";function Yt(pe,ie={}){let Le=pe;"object"!=typeof ie&&(ie={name:ie});const ft=Object.assign({name:Fr,automaticDataCollectionEnabled:!1},ie),At=ft.name;if("string"!=typeof At||!At)throw _r.create("bad-app-name",{appName:String(At)});if(Le||(Le=(0,re.aH)()),!Le)throw _r.create("no-options");const Qt=dn.get(At);if(Qt){if((0,re.vZ)(Le,Qt.options)&&(0,re.vZ)(ft,Qt.config))return Qt;throw _r.create("duplicate-app",{appName:At})}const pt=new $.H0(At);for(const rn of qt.values())pt.addComponent(rn);const fn=new Kt(Le,ft,pt);return dn.set(At,fn),fn}function oi(pe=Fr){const ie=dn.get(pe);if(!ie&&pe===Fr&&(0,re.aH)())return Yt();if(!ie)throw _r.create("no-app",{appName:pe});return ie}function Vt(){return Array.from(dn.values())}function qn(pe){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,h.Z)(function*(pe){const ie=pe.name;dn.has(ie)&&(dn.delete(ie),yield Promise.all(pe.container.getProviders().map(Le=>Le.delete())),pe.isDeleted=!0)})).apply(this,arguments)}function Rr(pe,ie,Le){var ft;let At=null!==(ft=qr[pe])&&void 0!==ft?ft:pe;Le&&(At+=`-${Le}`);const Qt=At.match(/\s|\//),pt=ie.match(/\s|\//);if(Qt||pt){const fn=[`Unable to register library "${At}" with version "${ie}":`];return Qt&&fn.push(`library name "${At}" contains illegal characters (whitespace or "/")`),Qt&&pt&&fn.push("and"),pt&&fn.push(`version name "${ie}" contains illegal characters (whitespace or "/")`),void yr.warn(fn.join(" "))}Wn(new $.wA(`${At}-version`,()=>({library:At,version:ie}),"VERSION"))}function Zn(pe,ie){if(null!==pe&&"function"!=typeof pe)throw _r.create("invalid-log-argument");(0,O.Am)(pe,ie)}function Kr(pe){(0,O.Ub)(pe)}const Lr="firebase-heartbeat-database",Yr=1,G="firebase-heartbeat-store";let j=null;function k(){return j||(j=function Pe(pe,ie,{blocked:Le,upgrade:ft,blocking:At,terminated:Qt}={}){const pt=indexedDB.open(pe,ie),fn=Se(pt);return ft&&pt.addEventListener("upgradeneeded",rn=>{ft(Se(pt.result),rn.oldVersion,rn.newVersion,Se(pt.transaction),rn)}),Le&&pt.addEventListener("blocked",rn=>Le(rn.oldVersion,rn.newVersion,rn)),fn.then(rn=>{Qt&&rn.addEventListener("close",()=>Qt()),At&&rn.addEventListener("versionchange",Vr=>At(Vr.oldVersion,Vr.newVersion,Vr))}).catch(()=>{}),fn}(Lr,Yr,{upgrade:(pe,ie)=>{0===ie&&pe.createObjectStore(G)}}).catch(pe=>{throw _r.create("idb-open",{originalErrorMessage:pe.message})})),j}function N(){return(N=(0,h.Z)(function*(pe){try{return yield(yield k()).transaction(G).objectStore(G).get(Xe(pe))}catch(ie){if(ie instanceof re.ZR)yr.warn(ie.message);else{const Le=_r.create("idb-get",{originalErrorMessage:ie?.message});yr.warn(Le.message)}}})).apply(this,arguments)}function Z(pe,ie){return De.apply(this,arguments)}function De(){return(De=(0,h.Z)(function*(pe,ie){try{const ft=(yield k()).transaction(G,"readwrite");yield ft.objectStore(G).put(ie,Xe(pe)),yield ft.done}catch(Le){if(Le instanceof re.ZR)yr.warn(Le.message);else{const ft=_r.create("idb-set",{originalErrorMessage:Le?.message});yr.warn(ft.message)}}})).apply(this,arguments)}function Xe(pe){return`${pe.name}!${pe.options.appId}`}class Zt{constructor(ie){this.container=ie,this._heartbeatsCache=null;const Le=this.container.getProvider("app").getImmediate();this._storage=new Ut(Le),this._heartbeatsCachePromise=this._storage.read().then(ft=>(this._heartbeatsCache=ft,ft))}triggerHeartbeat(){var ie=this;return(0,h.Z)(function*(){const ft=ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),At=xt();if(null===ie._heartbeatsCache&&(ie._heartbeatsCache=yield ie._heartbeatsCachePromise),ie._heartbeatsCache.lastSentHeartbeatDate!==At&&!ie._heartbeatsCache.heartbeats.some(Qt=>Qt.date===At))return ie._heartbeatsCache.heartbeats.push({date:At,agent:ft}),ie._heartbeatsCache.heartbeats=ie._heartbeatsCache.heartbeats.filter(Qt=>{const pt=new Date(Qt.date).valueOf();return Date.now()-pt<=2592e6}),ie._storage.overwrite(ie._heartbeatsCache)})()}getHeartbeatsHeader(){var ie=this;return(0,h.Z)(function*(){if(null===ie._heartbeatsCache&&(yield ie._heartbeatsCachePromise),null===ie._heartbeatsCache||0===ie._heartbeatsCache.heartbeats.length)return"";const Le=xt(),{heartbeatsToSend:ft,unsentEntries:At}=function Tn(pe,ie=1024){const Le=[];let ft=pe.slice();for(const At of pe){const Qt=Le.find(pt=>pt.agent===At.agent);if(Qt){if(Qt.dates.push(At.date),vr(Le)>ie){Qt.dates.pop();break}}else if(Le.push({agent:At.agent,dates:[At.date]}),vr(Le)>ie){Le.pop();break}ft=ft.slice(1)}return{heartbeatsToSend:Le,unsentEntries:ft}}(ie._heartbeatsCache.heartbeats),Qt=(0,re.L)(JSON.stringify({version:2,heartbeats:ft}));return ie._heartbeatsCache.lastSentHeartbeatDate=Le,At.length>0?(ie._heartbeatsCache.heartbeats=At,yield ie._storage.overwrite(ie._heartbeatsCache)):(ie._heartbeatsCache.heartbeats=[],ie._storage.overwrite(ie._heartbeatsCache)),Qt})()}}function xt(){return(new Date).toISOString().substring(0,10)}class Ut{constructor(ie){this.app=ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ie=this;return(0,h.Z)(function*(){return(yield ie._canUseIndexedDBPromise)&&(yield function L(pe){return N.apply(this,arguments)}(ie.app))||{heartbeats:[]}})()}overwrite(ie){var Le=this;return(0,h.Z)(function*(){var ft;if(yield Le._canUseIndexedDBPromise){const Qt=yield Le.read();return Z(Le.app,{lastSentHeartbeatDate:null!==(ft=ie.lastSentHeartbeatDate)&&void 0!==ft?ft:Qt.lastSentHeartbeatDate,heartbeats:ie.heartbeats})}})()}add(ie){var Le=this;return(0,h.Z)(function*(){var ft;if(yield Le._canUseIndexedDBPromise){const Qt=yield Le.read();return Z(Le.app,{lastSentHeartbeatDate:null!==(ft=ie.lastSentHeartbeatDate)&&void 0!==ft?ft:Qt.lastSentHeartbeatDate,heartbeats:[...Qt.heartbeats,...ie.heartbeats]})}})()}}function vr(pe){return(0,re.L)(JSON.stringify({version:2,heartbeats:pe})).length}!function ws(pe){Wn(new $.wA("platform-logger",ie=>new nt(ie),"PRIVATE")),Wn(new $.wA("heartbeat",ie=>new Zt(ie),"PRIVATE")),Rr(ot,"0.9.13",pe),Rr(ot,"0.9.13","esm2017"),Rr("fire-js","")}("")},4859:(_t,Me,U)=>{U.d(Me,{H0:()=>ye,wA:()=>O});var h=U(5861),$=U(2090);class O{constructor(W,z,Q){this.name=W,this.instanceFactory=z,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const re="[DEFAULT]";class ue{constructor(W,z){this.name=W,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const z=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(z)){const Q=new $.BH;if(this.instancesDeferred.set(z,Q),this.isInitialized(z)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:z});$e&&Q.resolve($e)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(W){var z;const Q=this.normalizeInstanceIdentifier(W?.identifier),$e=null!==(z=W?.optional)&&void 0!==z&&z;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Ae){if($e)return null;throw Ae}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function Ce(we){return"EAGER"===we.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[z,Q]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(z);try{const Ae=this.getOrInitializeService({instanceIdentifier:$e});Q.resolve(Ae)}catch{}}}}clearInstance(W=re){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,h.Z)(function*(){const z=Array.from(W.instances.values());yield Promise.all([...z.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...z.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=re){return this.instances.has(W)}getOptions(W=re){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:z={}}=W,Q=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:Q,options:z});for(const[Ae,qe]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Ae)&&qe.resolve($e);return $e}onInit(W,z){var Q;const $e=this.normalizeInstanceIdentifier(z),Ae=null!==(Q=this.onInitCallbacks.get($e))&&void 0!==Q?Q:new Set;Ae.add(W),this.onInitCallbacks.set($e,Ae);const qe=this.instances.get($e);return qe&&W(qe,$e),()=>{Ae.delete(W)}}invokeOnInitCallbacks(W,z){const Q=this.onInitCallbacks.get(z);if(Q)for(const $e of Q)try{$e(W,z)}catch{}}getOrInitializeService({instanceIdentifier:W,options:z={}}){let Q=this.instances.get(W);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(we=W,we===re?void 0:we),options:z}),this.instances.set(W,Q),this.instancesOptions.set(W,z),this.invokeOnInitCallbacks(Q,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,Q)}catch{}var we;return Q||null}normalizeInstanceIdentifier(W=re){return this.component?this.component.multipleInstances?W:re:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ye{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const z=this.getProvider(W.name);if(z.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);z.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const z=new ue(W,this);return this.providers.set(W,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(_t,Me,U)=>{U.d(Me,{Am:()=>we,Ub:()=>ye,Yd:()=>Ce,in:()=>$});const h=[];var $=(()=>{return(W=$||($={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",$;var W})();const O={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},re=$.INFO,ue={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},le=(W,z,...Q)=>{if(z<W.logLevel)return;const $e=(new Date).toISOString(),Ae=ue[z];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Ae](`[${$e}]  ${W.name}:`,...Q)};class Ce{constructor(z){this.name=z,this._logLevel=re,this._logHandler=le,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in $))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?O[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...z),this._logHandler(this,$.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...z),this._logHandler(this,$.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,$.INFO,...z),this._logHandler(this,$.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,$.WARN,...z),this._logHandler(this,$.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...z),this._logHandler(this,$.ERROR,...z)}}function ye(W){h.forEach(z=>{z.setLogLevel(W)})}function we(W,z){for(const Q of h){let $e=null;z&&z.level&&($e=O[z.level]),Q.userLogHandler=null===W?null:(Ae,qe,...rt)=>{const _e=rt.map(Ne=>{if(null==Ne)return null;if("string"==typeof Ne)return Ne;if("number"==typeof Ne||"boolean"==typeof Ne)return Ne.toString();if(Ne instanceof Error)return Ne.message;try{return JSON.stringify(Ne)}catch{return null}}).filter(Ne=>Ne).join(" ");qe>=($e??Ae.logLevel)&&W({level:$[qe].toLowerCase(),message:_e,args:rt,type:Ae.name})}}}},259:(_t,Me,U)=>{U.d(Me,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=U(6881);(0,h.registerVersion)("firebase","9.23.0","app")},9260:(_t,Me,U)=>{U.d(Me,{Z:()=>h.Z});var h=U(3942);h.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(_t,Me,U)=>{U.r(Me);var h=U(5861),$=U(3942),O=U(1389),re=U(2090),Ce=(U(6881),U(1877),U(4859));function ye(){return window}const we=2e3;function z(){return z=(0,h.Z)(function*(k,L,N){var Z;const{BuildInfo:De}=ye();(0,O.as)(L.sessionId,"AuthEvent did not contain a session ID");const Xe=yield function Ne(k){return ke.apply(this,arguments)}(L.sessionId),St={};return(0,O.at)()?St.ibi=De.packageName:(0,O.au)()?St.apn=De.packageName:(0,O.av)(k,"operation-not-supported-in-this-environment"),De.displayName&&(St.appDisplayName=De.displayName),St.sessionId=Xe,(0,O.aw)(k,N,L.type,void 0,null!==(Z=L.eventId)&&void 0!==Z?Z:void 0,St)}),z.apply(this,arguments)}function $e(){return($e=(0,h.Z)(function*(k){const{BuildInfo:L}=ye(),N={};(0,O.at)()?N.iosBundleId=L.packageName:(0,O.au)()?N.androidPackageName=L.packageName:(0,O.av)(k,"operation-not-supported-in-this-environment"),yield(0,O.ax)(k,N)})).apply(this,arguments)}function rt(){return(rt=(0,h.Z)(function*(k,L,N){const{cordova:Z}=ye();let De=()=>{};try{yield new Promise((Xe,St)=>{let Ct=null;function Zt(){var Ut;Xe();const vr=null===(Ut=Z.plugins.browsertab)||void 0===Ut?void 0:Ut.close;"function"==typeof vr&&vr(),"function"==typeof N?.close&&N.close()}function xt(){Ct||(Ct=window.setTimeout(()=>{St((0,O.az)(k,"redirect-cancelled-by-user"))},we))}function Tn(){"visible"===document?.visibilityState&&xt()}L.addPassiveListener(Zt),document.addEventListener("resume",xt,!1),(0,O.au)()&&document.addEventListener("visibilitychange",Tn,!1),De=()=>{L.removePassiveListener(Zt),document.removeEventListener("resume",xt,!1),document.removeEventListener("visibilitychange",Tn,!1),Ct&&window.clearTimeout(Ct)}})}finally{De()}})).apply(this,arguments)}function ke(){return(ke=(0,h.Z)(function*(k){const L=function je(k){if((0,O.as)(/[0-9a-zA-Z]+/.test(k),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(k);const L=new ArrayBuffer(k.length),N=new Uint8Array(L);for(let Z=0;Z<k.length;Z++)N[Z]=k.charCodeAt(Z);return N}(k),N=yield crypto.subtle.digest("SHA-256",L);return Array.from(new Uint8Array(N)).map(De=>De.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Se=20;class be extends O.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(L=>{this.resolveInialized=L})}addPassiveListener(L){this.passiveListeners.add(L)}removePassiveListener(L){this.passiveListeners.delete(L)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(L){return this.resolveInialized(),this.passiveListeners.forEach(N=>N(L)),super.onEvent(L)}initialized(){var L=this;return(0,h.Z)(function*(){yield L.initPromise})()}}function Fe(k){return ae.apply(this,arguments)}function ae(){return(ae=(0,h.Z)(function*(k){const L=yield nt()._get(Wt(k));return L&&(yield nt()._remove(Wt(k))),L})).apply(this,arguments)}function bt(){const k=[],L="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let N=0;N<Se;N++){const Z=Math.floor(Math.random()*L.length);k.push(L.charAt(Z))}return k.join("")}function nt(){return(0,O.aC)(O.b)}function Wt(k){return(0,O.aD)("authEvent",k.config.apiKey,k.name)}function yr(k){if(!k?.includes("?"))return{};const[L,...N]=k.split("?");return(0,re.zd)(N.join("?"))}const ce=class es{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(L){var N=this;return(0,h.Z)(function*(){const Z=L._key();let De=N.eventManagers.get(Z);return De||(De=new be(L),N.eventManagers.set(Z,De),N.attachCallbackListeners(L,De)),De})()}_openPopup(L){(0,O.av)(L,"operation-not-supported-in-this-environment")}_openRedirect(L,N,Z,De){var Xe=this;return(0,h.Z)(function*(){!function _e(k){var L,N,Z,De,Xe,St,Ct,Zt,xt,Tn;const Ut=ye();(0,O.aA)("function"==typeof(null===(L=Ut?.universalLinks)||void 0===L?void 0:L.subscribe),k,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aA)(typeof(null===(N=Ut?.BuildInfo)||void 0===N?void 0:N.packageName)<"u",k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aA)("function"==typeof(null===(Xe=null===(De=null===(Z=Ut?.cordova)||void 0===Z?void 0:Z.plugins)||void 0===De?void 0:De.browsertab)||void 0===Xe?void 0:Xe.openUrl),k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(Zt=null===(Ct=null===(St=Ut?.cordova)||void 0===St?void 0:St.plugins)||void 0===Ct?void 0:Ct.browsertab)||void 0===Zt?void 0:Zt.isAvailable),k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(Tn=null===(xt=Ut?.cordova)||void 0===xt?void 0:xt.InAppBrowser)||void 0===Tn?void 0:Tn.open),k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(L);const St=yield Xe._initialize(L);yield St.initialized(),St.resetRedirect(),(0,O.aG)(),yield Xe._originValidation(L);const Ct=function Pe(k,L,N=null){return{type:L,eventId:N,urlResponse:null,sessionId:bt(),postBody:null,tenantId:k.tenantId,error:(0,O.az)(k,"no-auth-event")}}(L,Z,De);yield function He(k,L){return nt()._set(Wt(k),L)}(L,Ct);const Zt=yield function W(k,L,N){return z.apply(this,arguments)}(L,Ct,N),xt=yield function Ae(k){const{cordova:L}=ye();return new Promise(N=>{L.plugins.browsertab.isAvailable(Z=>{let De=null;Z?L.plugins.browsertab.openUrl(k):De=L.InAppBrowser.open(k,(0,O.ay)()?"_blank":"_system","location=yes"),N(De)})})}(Zt);return function qe(k,L,N){return rt.apply(this,arguments)}(L,St,xt)})()}_isIframeWebStorageSupported(L,N){throw new Error("Method not implemented.")}_originValidation(L){const N=L._key();return this.originValidationPromises[N]||(this.originValidationPromises[N]=function Q(k){return $e.apply(this,arguments)}(L)),this.originValidationPromises[N]}attachCallbackListeners(L,N){const{universalLinks:Z,handleOpenURL:De,BuildInfo:Xe}=ye(),St=setTimeout((0,h.Z)(function*(){yield Fe(L),N.onEvent(fe())}),500),Ct=function(){var Tn=(0,h.Z)(function*(Ut){clearTimeout(St);const vr=yield Fe(L);let ws=null;vr&&Ut?.url&&(ws=function Je(k,L){var N,Z;const De=function vs(k){const L=yr(k),N=L.link?decodeURIComponent(L.link):void 0,Z=yr(N).link,De=L.deep_link_id?decodeURIComponent(L.deep_link_id):void 0;return yr(De).link||De||Z||N||k}(L);if(De.includes("/__/auth/callback")){const Xe=yr(De),St=Xe.firebaseError?function ot(k){try{return JSON.parse(k)}catch{return null}}(decodeURIComponent(Xe.firebaseError)):null,Ct=null===(Z=null===(N=St?.code)||void 0===N?void 0:N.split("auth/"))||void 0===Z?void 0:Z[1],Zt=Ct?(0,O.az)(Ct):null;return Zt?{type:k.type,eventId:k.eventId,tenantId:k.tenantId,error:Zt,urlResponse:null,sessionId:null,postBody:null}:{type:k.type,eventId:k.eventId,tenantId:k.tenantId,sessionId:k.sessionId,urlResponse:De,postBody:null}}return null}(vr,Ut.url)),N.onEvent(ws||fe())});return function(vr){return Tn.apply(this,arguments)}}();typeof Z<"u"&&"function"==typeof Z.subscribe&&Z.subscribe(null,Ct);const Zt=De,xt=`${Xe.packageName.toLowerCase()}://`;ye().handleOpenURL=function(){var Tn=(0,h.Z)(function*(Ut){if(Ut.toLowerCase().startsWith(xt)&&Ct({url:Ut}),"function"==typeof Zt)try{Zt(Ut)}catch(vr){console.error(vr)}});return function(Ut){return Tn.apply(this,arguments)}}()}};function fe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.az)("no-auth-event")}}const Ve=1e3;function it(){var k;return(null===(k=self?.location)||void 0===k?void 0:k.protocol)||null}function cn(k=(0,re.z$)()){return!("file:"!==it()&&"ionic:"!==it()&&"capacitor:"!==it()||!k.toLowerCase().match(/iphone|ipad|ipod|android/))}function tr(){try{const k=self.localStorage,L=O.aL();if(k)return k.setItem(L,"1"),k.removeItem(L),!function hn(k=(0,re.z$)()){return function tn(){return(0,re.w1)()&&11===document?.documentMode}()||function Sn(k=(0,re.z$)()){return/Edge\/\d+/.test(k)}(k)}()||(0,re.hl)()}catch{return An()&&(0,re.hl)()}return!1}function An(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Nn(){return(function st(){return"http:"===it()||"https:"===it()}()||(0,re.ru)()||cn())&&!function wt(){return(0,re.b$)()||(0,re.UG)()}()&&tr()&&!An()}function nr(){return cn()&&typeof document<"u"}function Vn(){return(Vn=(0,h.Z)(function*(){return!!nr()&&new Promise(k=>{const L=setTimeout(()=>{k(!1)},Ve);document.addEventListener("deviceready",()=>{clearTimeout(L),k(!0)})})})).apply(this,arguments)}const Un={LOCAL:"local",NONE:"none",SESSION:"session"},ts=O.aA,zn="persistence";function qr(k){return dn.apply(this,arguments)}function dn(){return(dn=(0,h.Z)(function*(k){yield k._initializationPromise;const L=ut(),N=O.aD(zn,k.config.apiKey,k.name);L&&L.setItem(N,k._getPersistence())})).apply(this,arguments)}function ut(){var k;try{return(null===(k=function dt(){return typeof window<"u"?window:null}())||void 0===k?void 0:k.sessionStorage)||null}catch{return null}}const kt=O.aA;class Wn{constructor(){this.browserResolver=O.aC(O.k),this.cordovaResolver=O.aC(ce),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(L){var N=this;return(0,h.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._initialize(L)})()}_openPopup(L,N,Z,De){var Xe=this;return(0,h.Z)(function*(){return yield Xe.selectUnderlyingResolver(),Xe.assertedUnderlyingResolver._openPopup(L,N,Z,De)})()}_openRedirect(L,N,Z,De){var Xe=this;return(0,h.Z)(function*(){return yield Xe.selectUnderlyingResolver(),Xe.assertedUnderlyingResolver._openRedirect(L,N,Z,De)})()}_isIframeWebStorageSupported(L,N){this.assertedUnderlyingResolver._isIframeWebStorageSupported(L,N)}_originValidation(L){return this.assertedUnderlyingResolver._originValidation(L)}get _shouldInitProactively(){return nr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return kt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var L=this;return(0,h.Z)(function*(){if(L.underlyingResolver)return;const N=yield function gi(){return Vn.apply(this,arguments)}();L.underlyingResolver=N?L.cordovaResolver:L.browserResolver})()}}function Mr(k){return k.unwrap()}function Zr(k){return _r(k)}function _r(k){const{_tokenResponse:L}=k instanceof re.ZR?k.customData:k;if(!L)return null;if(!(k instanceof re.ZR)&&"temporaryProof"in L&&"phoneNumber"in L)return O.P.credentialFromResult(k);const N=L.providerId;if(!N||N===O.p.PASSWORD)return null;let Z;switch(N){case O.p.GOOGLE:Z=O.V;break;case O.p.FACEBOOK:Z=O.U;break;case O.p.GITHUB:Z=O.W;break;case O.p.TWITTER:Z=O.Z;break;default:const{oauthIdToken:De,oauthAccessToken:Xe,oauthTokenSecret:St,pendingToken:Ct,nonce:Zt}=L;return Xe||St||De||Ct?Ct?N.startsWith("saml.")?O.aO._create(N,Ct):O.L._fromParams({providerId:N,signInMethod:N,pendingToken:Ct,idToken:De,accessToken:Xe}):new O.X(N).credential({idToken:De,accessToken:Xe,rawNonce:Zt}):null}return k instanceof re.ZR?Z.credentialFromError(k):Z.credentialFromResult(k)}function Kt(k,L){return L.catch(N=>{throw N instanceof re.ZR&&function jn(k,L){var N;const Z=null===(N=L.customData)||void 0===N?void 0:N._tokenResponse;if("auth/multi-factor-auth-required"===L?.code)L.resolver=new oi(k,O.aq(k,L));else if(Z){const De=_r(L),Xe=L;De&&(Xe.credential=De,Xe.tenantId=Z.tenantId||void 0,Xe.email=Z.email||void 0,Xe.phoneNumber=Z.phoneNumber||void 0)}}(k,N),N}).then(N=>{const De=N.user;return{operationType:N.operationType,credential:Zr(N),additionalUserInfo:O.ao(N),user:Vt.getOrCreate(De)}})}function mi(k,L){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,h.Z)(function*(k,L){const N=yield L;return{verificationId:N.verificationId,confirm:Z=>Kt(k,N.confirm(Z))}})).apply(this,arguments)}class oi{constructor(L,N){this.resolver=N,this.auth=function Bn(k){return k.wrapped()}(L)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(L){return Kt(Mr(this.auth),this.resolver.resolveSignIn(L))}}class Vt{constructor(L){this._delegate=L,this.multiFactor=O.ar(L)}static getOrCreate(L){return Vt.USER_MAP.has(L)||Vt.USER_MAP.set(L,new Vt(L)),Vt.USER_MAP.get(L)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(L){return this._delegate.getIdTokenResult(L)}getIdToken(L){return this._delegate.getIdToken(L)}linkAndRetrieveDataWithCredential(L){return this.linkWithCredential(L)}linkWithCredential(L){var N=this;return(0,h.Z)(function*(){return Kt(N.auth,O.a0(N._delegate,L))})()}linkWithPhoneNumber(L,N){var Z=this;return(0,h.Z)(function*(){return mi(Z.auth,O.l(Z._delegate,L,N))})()}linkWithPopup(L){var N=this;return(0,h.Z)(function*(){return Kt(N.auth,O.d(N._delegate,L,Wn))})()}linkWithRedirect(L){var N=this;return(0,h.Z)(function*(){return yield qr(O.aH(N.auth)),O.g(N._delegate,L,Wn)})()}reauthenticateAndRetrieveDataWithCredential(L){return this.reauthenticateWithCredential(L)}reauthenticateWithCredential(L){var N=this;return(0,h.Z)(function*(){return Kt(N.auth,O.a1(N._delegate,L))})()}reauthenticateWithPhoneNumber(L,N){return mi(this.auth,O.r(this._delegate,L,N))}reauthenticateWithPopup(L){return Kt(this.auth,O.e(this._delegate,L,Wn))}reauthenticateWithRedirect(L){var N=this;return(0,h.Z)(function*(){return yield qr(O.aH(N.auth)),O.h(N._delegate,L,Wn)})()}sendEmailVerification(L){return O.ae(this._delegate,L)}unlink(L){var N=this;return(0,h.Z)(function*(){return yield O.an(N._delegate,L),N})()}updateEmail(L){return O.aj(this._delegate,L)}updatePassword(L){return O.ak(this._delegate,L)}updatePhoneNumber(L){return O.u(this._delegate,L)}updateProfile(L){return O.ai(this._delegate,L)}verifyBeforeUpdateEmail(L,N){return O.af(this._delegate,L,N)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Vt.USER_MAP=new WeakMap;const qn=O.aA;let Pn=(()=>{class k{constructor(N,Z){if(this.app=N,Z.isInitialized())return this._delegate=Z.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:De}=N.options;qn(De,"invalid-api-key",{appName:N.name}),qn(De,"invalid-api-key",{appName:N.name});const Xe=typeof window<"u"?Wn:void 0;this._delegate=Z.initialize({options:{persistence:Zn(De,N.name),popupRedirectResolver:Xe}}),this._delegate._updateErrorMap(O.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Vt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(N){this._delegate.languageCode=N}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(N){this._delegate.tenantId=N}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(N,Z){O.I(this._delegate,N,Z)}applyActionCode(N){return O.a5(this._delegate,N)}checkActionCode(N){return O.a6(this._delegate,N)}confirmPasswordReset(N,Z){return O.a4(this._delegate,N,Z)}createUserWithEmailAndPassword(N,Z){var De=this;return(0,h.Z)(function*(){return Kt(De._delegate,O.a8(De._delegate,N,Z))})()}fetchProvidersForEmail(N){return this.fetchSignInMethodsForEmail(N)}fetchSignInMethodsForEmail(N){return O.ad(this._delegate,N)}isSignInWithEmailLink(N){return O.ab(this._delegate,N)}getRedirectResult(){var N=this;return(0,h.Z)(function*(){qn(Nn(),N._delegate,"operation-not-supported-in-this-environment");const Z=yield O.j(N._delegate,Wn);return Z?Kt(N._delegate,Promise.resolve(Z)):{credential:null,user:null}})()}addFrameworkForLogging(N){!function me(k,L){(0,O.aH)(k)._logFramework(L)}(this._delegate,N)}onAuthStateChanged(N,Z,De){const{next:Xe,error:St,complete:Ct}=Rr(N,Z,De);return this._delegate.onAuthStateChanged(Xe,St,Ct)}onIdTokenChanged(N,Z,De){const{next:Xe,error:St,complete:Ct}=Rr(N,Z,De);return this._delegate.onIdTokenChanged(Xe,St,Ct)}sendSignInLinkToEmail(N,Z){return O.aa(this._delegate,N,Z)}sendPasswordResetEmail(N,Z){return O.a3(this._delegate,N,Z||void 0)}setPersistence(N){var Z=this;return(0,h.Z)(function*(){let De;switch(function Fr(k,L){ts(Object.values(Un).includes(L),k,"invalid-persistence-type"),(0,re.b$)()?ts(L!==Un.SESSION,k,"unsupported-persistence-type"):(0,re.UG)()?ts(L===Un.NONE,k,"unsupported-persistence-type"):An()?ts(L===Un.NONE||L===Un.LOCAL&&(0,re.hl)(),k,"unsupported-persistence-type"):ts(L===Un.NONE||tr(),k,"unsupported-persistence-type")}(Z._delegate,N),N){case Un.SESSION:De=O.a;break;case Un.LOCAL:De=(yield O.aC(O.i)._isAvailable())?O.i:O.b;break;case Un.NONE:De=O.N;break;default:return O.av("argument-error",{appName:Z._delegate.name})}return Z._delegate.setPersistence(De)})()}signInAndRetrieveDataWithCredential(N){return this.signInWithCredential(N)}signInAnonymously(){return Kt(this._delegate,O._(this._delegate))}signInWithCredential(N){return Kt(this._delegate,O.$(this._delegate,N))}signInWithCustomToken(N){return Kt(this._delegate,O.a2(this._delegate,N))}signInWithEmailAndPassword(N,Z){return Kt(this._delegate,O.a9(this._delegate,N,Z))}signInWithEmailLink(N,Z){return Kt(this._delegate,O.ac(this._delegate,N,Z))}signInWithPhoneNumber(N,Z){return mi(this._delegate,O.s(this._delegate,N,Z))}signInWithPopup(N){var Z=this;return(0,h.Z)(function*(){return qn(Nn(),Z._delegate,"operation-not-supported-in-this-environment"),Kt(Z._delegate,O.c(Z._delegate,N,Wn))})()}signInWithRedirect(N){var Z=this;return(0,h.Z)(function*(){return qn(Nn(),Z._delegate,"operation-not-supported-in-this-environment"),yield qr(Z._delegate),O.f(Z._delegate,N,Wn)})()}updateCurrentUser(N){return this._delegate.updateCurrentUser(N)}verifyPasswordResetCode(N){return O.a7(this._delegate,N)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return k.Persistence=Un,k})();function Rr(k,L,N){let Z=k;"function"!=typeof k&&({next:Z,error:L,complete:N}=k);const De=Z;return{next:St=>De(St&&Vt.getOrCreate(St)),error:L,complete:N}}function Zn(k,L){const N=function qt(k,L){const N=ut();if(!N)return[];const Z=O.aD(zn,k,L);switch(N.getItem(Z)){case Un.NONE:return[O.N];case Un.LOCAL:return[O.i,O.a];case Un.SESSION:return[O.a];default:return[]}}(k,L);if(typeof self<"u"&&!N.includes(O.i)&&N.push(O.i),typeof window<"u")for(const Z of[O.b,O.a])N.includes(Z)||N.push(Z);return N.includes(O.N)||N.push(O.N),N}class Kr{constructor(){this.providerId="phone",this._delegate=new O.P(Mr($.Z.auth()))}static credential(L,N){return O.P.credential(L,N)}verifyPhoneNumber(L,N){return this._delegate.verifyPhoneNumber(L,N)}unwrap(){return this._delegate}}Kr.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,Kr.PROVIDER_ID=O.P.PROVIDER_ID;const Lr=O.aA;class Yr{constructor(L,N,Z=$.Z.app()){var De;Lr(null===(De=Z.options)||void 0===De?void 0:De.apiKey,"invalid-api-key",{appName:Z.name}),this._delegate=new O.R(L,N,Z.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function j(k){k.INTERNAL.registerComponent(new Ce.wA("auth-compat",L=>{const N=L.getProvider("app-compat").getImmediate(),Z=L.getProvider("auth");return new Pn(N,Z)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.Q,FacebookAuthProvider:O.U,GithubAuthProvider:O.W,GoogleAuthProvider:O.V,OAuthProvider:O.X,SAMLAuthProvider:O.Y,PhoneAuthProvider:Kr,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:Yr,TwitterAuthProvider:O.Z,Auth:Pn,AuthCredential:O.J,Error:re.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),k.registerVersion("@firebase/auth-compat","0.4.2")}($.Z)},5861:(_t,Me,U)=>{function h(O,re,ue,le,Ce,ye,we){try{var W=O[ye](we),z=W.value}catch(Q){return void ue(Q)}W.done?re(z):Promise.resolve(z).then(le,Ce)}function $(O){return function(){var re=this,ue=arguments;return new Promise(function(le,Ce){var ye=O.apply(re,ue);function we(z){h(ye,le,Ce,we,W,"next",z)}function W(z){h(ye,le,Ce,we,W,"throw",z)}we(void 0)})}}U.d(Me,{Z:()=>$})},7582:(_t,Me,U)=>{function re(ce,fe){var me={};for(var te in ce)Object.prototype.hasOwnProperty.call(ce,te)&&fe.indexOf(te)<0&&(me[te]=ce[te]);if(null!=ce&&"function"==typeof Object.getOwnPropertySymbols){var xe=0;for(te=Object.getOwnPropertySymbols(ce);xe<te.length;xe++)fe.indexOf(te[xe])<0&&Object.prototype.propertyIsEnumerable.call(ce,te[xe])&&(me[te[xe]]=ce[te[xe]])}return me}function Q(ce,fe,me,te){return new(me||(me=Promise))(function(Ve,it){function st(tn){try{wt(te.next(tn))}catch(Sn){it(Sn)}}function cn(tn){try{wt(te.throw(tn))}catch(Sn){it(Sn)}}function wt(tn){tn.done?Ve(tn.value):function xe(Ve){return Ve instanceof me?Ve:new me(function(it){it(Ve)})}(tn.value).then(st,cn)}wt((te=te.apply(ce,fe||[])).next())})}function Se(ce){return this instanceof Se?(this.v=ce,this):new Se(ce)}function be(ce,fe,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,te=me.apply(ce,fe||[]),Ve=[];return xe={},it("next"),it("throw"),it("return"),xe[Symbol.asyncIterator]=function(){return this},xe;function it(hn){te[hn]&&(xe[hn]=function(tr){return new Promise(function(An,Nn){Ve.push([hn,tr,An,Nn])>1||st(hn,tr)})})}function st(hn,tr){try{!function cn(hn){hn.value instanceof Se?Promise.resolve(hn.value.v).then(wt,tn):Sn(Ve[0][2],hn)}(te[hn](tr))}catch(An){Sn(Ve[0][3],An)}}function wt(hn){st("next",hn)}function tn(hn){st("throw",hn)}function Sn(hn,tr){hn(tr),Ve.shift(),Ve.length&&st(Ve[0][0],Ve[0][1])}}function He(ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,fe=ce[Symbol.asyncIterator];return fe?fe.call(ce):(ce=function rt(ce){var fe="function"==typeof Symbol&&Symbol.iterator,me=fe&&ce[fe],te=0;if(me)return me.call(ce);if(ce&&"number"==typeof ce.length)return{next:function(){return ce&&te>=ce.length&&(ce=void 0),{value:ce&&ce[te++],done:!ce}}};throw new TypeError(fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ce),me={},te("next"),te("throw"),te("return"),me[Symbol.asyncIterator]=function(){return this},me);function te(Ve){me[Ve]=ce[Ve]&&function(it){return new Promise(function(st,cn){!function xe(Ve,it,st,cn){Promise.resolve(cn).then(function(wt){Ve({value:wt,done:st})},it)}(st,cn,(it=ce[Ve](it)).done,it.value)})}}}U.d(Me,{FC:()=>be,KL:()=>He,_T:()=>re,mG:()=>Q,qq:()=>Se}),"function"==typeof SuppressedError&&SuppressedError}},_t=>{_t(_t.s=1236)}]);